(()=>{var e={396(){Number.prototype.map=function(e,t,i,a){return(this-e)*(a-i)/(t-e)+i}},41(){Promise.create=function(){let e=new Promise(((e,t)=>{this.temp_resolve=e,this.temp_reject=t}));return e.resolve=this.temp_resolve,e.reject=this.temp_reject,delete this.temp_resolve,delete this.temp_reject,e},Promise.catchAll=function(e){return Promise.all(e.map((e=>e.catch((e=>{Promise.reject(e)})))))}},305(){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame}},t={};function i(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,i),r.exports}(()=>{"use strict";let e={DAY:"/img/Player/Day/default_head.png",NIGHT:"/img/Player/Night/default_head.png"},t={ID:0};t.URL=e;let a={};a.PLAYER_BODY=t,a.PLAYER_LEFT_HAND={ID:1,URL:{DAY:"/img/Player/Day/default_left_arm.png",NIGHT:"/img/Player/Night/default_left_arm.png"}},a.PLAYER_RIGHT_HAND={ID:2,URL:{DAY:"/img/Player/Day/default_right_arm.png",NIGHT:"/img/Player/Night/default_left_arm.png"}},a.PLAYER_STEP={ID:3,URL:{DAY:"/img/Player/Day/step_player.png",NIGHT:"/img/Player/Day/step_player.png"}},a.TREE0={ID:4,URL:{DAY:"/img/Resources/Day/t1.png",NIGHT:"/img/Resources/Night/t1.png"}},a.TREE1={ID:5,URL:{DAY:"/img/Resources/Day/t2.png",NIGHT:"/img/Resources/Night/t2.png"}},a.TREE2={ID:6,URL:{DAY:"/img/Resources/Day/t3.png",NIGHT:"/img/Resources/Night/t3.png"}},a.TREE3={ID:7,URL:{DAY:"/img/Resources/Day/t4.png",NIGHT:"/img/Resources/Night/t4.png"}},a.TREE4={ID:8,URL:{DAY:"/img/Resources/Day/t5.png",NIGHT:"/img/Resources/Night/t5.png"}},a.TREE5={ID:9,URL:{DAY:"/img/Resources/Day/t6.png",NIGHT:"/img/Resources/Night/t6.png"}},a.TREE6={ID:10,URL:{DAY:"/img/Resources/Day/t7.png",NIGHT:"/img/Resources/Night/t7.png"}},a.TREE7={ID:11,URL:{DAY:"/img/Resources/Day/t8.png",NIGHT:"/img/Resources/Night/t8.png"}},a.TREE8={ID:12,URL:{DAY:"/img/Resources/Day/t9.png",NIGHT:"/img/Resources/Night/t9.png"}},a.TREE9={ID:13,URL:{DAY:"/img/Resources/Day/t10.png",NIGHT:"/img/Resources/Night/t10.png"}},a.TREE10={ID:14,URL:{DAY:"/img/Resources/Day/t11.png",NIGHT:"/img/Resources/Night/t11.png"}},a.TREE11={ID:15,URL:{DAY:"/img/Resources/Day/t12.png",NIGHT:"/img/Resources/Night/t12.png"}},a.STONE0={ID:16,URL:{DAY:"/img/Resources/Day/s1.png",NIGHT:"/img/Resources/Night/s1.png"}},a.STONE1={ID:17,URL:{DAY:"/img/Resources/Day/s2.png",NIGHT:"/img/Resources/Night/s2.png"}},a.STONE2={ID:18,URL:{DAY:"/img/Resources/Day/s3.png",NIGHT:"/img/Resources/Night/s3.png"}},a.FLOWER1={ID:19,URL:{DAY:"/img/decorations/flower1.png",NIGHT:"/img/decorations/flower1.png"}},a.FLOWER2={ID:20,URL:{DAY:"/img/decorations/flower2.png",NIGHT:"/img/decorations/flower2.png"}},a.FLOWER3={ID:21,URL:{DAY:"/img/decorations/flower3.png",NIGHT:"/img/decorations/flower3.png"}},a.FLOWER4={ID:22,URL:{DAY:"/img/decorations/flower4.png",NIGHT:"/img/decorations/flower4.png"}},a.FLOWER5={ID:23,URL:{DAY:"/img/decorations/flower5.png",NIGHT:"/img/decorations/flower5.png"}},a.FLOWER6={ID:24,URL:{DAY:"/img/decorations/flower6.png",NIGHT:"/img/decorations/flower6.png"}},a.FLOWER7={ID:25,URL:{DAY:"/img/decorations/flower7.png",NIGHT:"/img/decorations/flower7.png"}},a.FLOWER8={ID:26,URL:{DAY:"/img/decorations/flower8.png",NIGHT:"/img/decorations/flower8.png"}},a.GRASS1={ID:27,URL:{DAY:"/img/decorations/grass1.png",NIGHT:"/img/decorations/grass1.png"}},a.GRASS2={ID:27,URL:{DAY:"/img/decorations/grass2.png",NIGHT:"/img/decorations/grass2.png"}},a.GRASS3={ID:28,URL:{DAY:"/img/decorations/grass3.png",NIGHT:"/img/decorations/grass3.png"}},a.GRASS4={ID:29,URL:{DAY:"/img/decorations/grass4.png",NIGHT:"/img/decorations/grass4.png"}},a.GRASS5={ID:30,URL:{DAY:"/img/decorations/grass5.png",NIGHT:"/img/decorations/grass5.png"}},a.GRASS6={ID:31,URL:{DAY:"/img/decorations/grass6.png",NIGHT:"/img/decorations/grass6.png"}},a.SMALL_BUSH1={ID:32,URL:{DAY:"/img/decorations/small_bush.png",NIGHT:"/img/decorations/small_bush.png"}},a.WOLF={ID:222,URL:{DAY:"/img/Mobs/mob.png",NIGHT:"/img/Mobs/mob.png"}},a.WOLF_HURT={ID:223,URL:{DAY:"/img/Mobs/wolf_hurt.png",NIGHT:""}},a.RABBIT={ID:224,URL:{DAY:"/img/Mobs/rabbit.png",NIGHT:""}},a.RABBIT_HURT={ID:225,URL:{DAY:"/img/Mobs/rabbit_hurt.png",NIGHT:""}},a.SPIDER={ID:226,URL:{DAY:"/img/Mobs/spider.png",NIGHT:""}},a.SPIDER_HURT={ID:227,URL:{DAY:"/img/Mobs/spider_hurt.png",NIGHT:""}},a.SPIDER_WEB={ID:228,URL:{DAY:"/img/Mobs/spider_web.png",NIGHT:""}},a.BAR_COLD={ID:1223,URL:{DAY:"/img/ui/cold_bar.png",NIGHT:""}},a.BAR_FEED={ID:1224,URL:{DAY:"/img/ui/food_bar.png",NIGHT:""}},a.BAR_HEALTH={ID:1225,URL:{DAY:"/img/ui/health_bar.png",NIGHT:""}},a.MINIMAP={ID:1226,URL:{DAY:"/img/ui/minimap.png",NIGHT:""}},a.PLANT_BERRY_SEED={ID:1227,URL:{DAY:"/img/buildings/plant_berry_seed.png",NIGHT:""}},a.PLANT_BERRY_BUSH={ID:1228,URL:{DAY:"/img/buildings/plant_berry.png",NIGHT:""}},a.BERRY_SMALL={ID:1229,URL:{DAY:"/img/buildings/berry.png",NIGHT:""}},a.PLANT_WHEAT_SEED={ID:1230,URL:{DAY:"/img/buildings/plant_wheat_seed.png",NIGHT:""}},a.PLANT_WHEAT={ID:1231,URL:{DAY:"/img/buildings/plant_wheat.png",NIGHT:""}},a.DROP_BOX={ID:1232,URL:{DAY:"/img/entity/box.png",NIGHT:""}},a.WOOD_PICKAXE={ID:1233,URL:{DAY:"/img/items/pickaxe_wood.png",NIGHT:""}},a.STONE_PICKAXE={ID:1234,URL:{DAY:"/img/items/pickaxe_stone.png",NIGHT:""}},a.GOLD_PICKAXE={ID:1235,URL:{DAY:"/img/items/pickaxe_gold.png",NIGHT:""}},a.DIAMOND_PICKAXE={ID:1236,URL:{DAY:"/img/items/pickaxe_diamond.png",NIGHT:""}},a.AMETHYST_PICKAXE={ID:1237,URL:{DAY:"/img/items/pickaxe_amethyst.png",NIGHT:""}},a.WOOD_SWORD={ID:1238,URL:{DAY:"/img/items/sword_wood.png",NIGHT:""}},a.STONE_SWORD={ID:1239,URL:{DAY:"/img/items/sword_stone.png",NIGHT:""}},a.GOLD_SWORD={ID:1240,URL:{DAY:"/img/items/sword_gold.png",NIGHT:""}},a.DIAMOND_SWORD={ID:1241,URL:{DAY:"/img/items/sword_diamond.png",NIGHT:""}},a.AMETHYST_SWORD={ID:1242,URL:{DAY:"/img/items/sword_amethyst.png",NIGHT:""}},a.WOOD_SPEAR={ID:1243,URL:{DAY:"/img/items/spear_wood.png",NIGHT:""}},a.STONE_SPEAR={ID:1244,URL:{DAY:"/img/items/spear_stone.png",NIGHT:""}},a.GOLD_SPEAR={ID:1245,URL:{DAY:"/img/items/spear_gold.png",NIGHT:""}},a.DIAMOND_SPEAR={ID:1246,URL:{DAY:"/img/items/spear_diamond.png",NIGHT:""}},a.AMETHYST_SPEAR={ID:1247,URL:{DAY:"/img/items/spear_amethyst.png",NIGHT:""}},a.STONE_HAMMER={ID:1248,URL:{DAY:"/img/items/hammer_stone.png",NIGHT:""}},a.GOLD_HAMMER={ID:1249,URL:{DAY:"/img/items/hammer_gold.png",NIGHT:""}},a.DIAMOND_HAMMER={ID:1250,URL:{DAY:"/img/items/hammer_diamond.png",NIGHT:""}},a.AMETHYST_HAMMER={ID:1251,URL:{DAY:"/img/items/hammer_amethyst.png",NIGHT:""}},a.WOOD_HELMET={ID:1252,URL:{DAY:"/img/items/helmet_wood.png",NIGHT:""}},a.STONE_HELMET={ID:1253,URL:{DAY:"/img/items/helmet_stone.png",NIGHT:""}},a.GOLD_HELMET={ID:1254,URL:{DAY:"/img/items/helmet_gold.png",NIGHT:""}},a.DIAMOND_HELMET={ID:1255,URL:{DAY:"/img/items/helmet_diamond.png",NIGHT:""}},a.AMETHYST_HELMET={ID:1256,URL:{DAY:"/img/items/helmet_amethyst.png",NIGHT:""}},a.FIRECAMP_STICKS={ID:1257,URL:{DAY:"/img/buildings/fire/firepit_wood.png",NIGHT:""}},a.FIRECAMP_TOP={ID:1258,URL:{DAY:"/img/buildings/fire/firepit_top.png",NIGHT:""}},a.FIRECAMP_GLOW1={ID:1259,URL:{DAY:"/img/buildings/fire/firepit_glow1.png",NIGHT:""}},a.FIRECAMP_GLOW2={ID:1260,URL:{DAY:"/img/buildings/fire/firepit_glow2.png",NIGHT:""}},a.FIRECAMP_GLOW3={ID:1261,URL:{DAY:"/img/buildings/fire/firepit_glow3.png",NIGHT:""}},a.WALL_WOOD={ID:1262,URL:{DAY:"/img/buildings/wall_wood.png",NIGHT:""}},a.WALL_STONE={ID:1263,URL:{DAY:"/img/buildings/wall_stone.png",NIGHT:""}},a.WALL_GOLD={ID:1264,URL:{DAY:"/img/buildings/wall_gold.png",NIGHT:""}},a.WALL_DIAMOND={ID:1265,URL:{DAY:"/img/buildings/wall_diamond.png",NIGHT:""}},a.WALL_AMETHYST={ID:1266,URL:{DAY:"/img/buildings/wall_amethyst.png",NIGHT:""}},a.DOOR_WOOD={ID:1267,URL:{DAY:"/img/buildings/door_wood.png",NIGHT:""}},a.DOOR_STONE={ID:1268,URL:{DAY:"/img/buildings/door_stone.png",NIGHT:""}},a.DOOR_GOLD={ID:1269,URL:{DAY:"/img/buildings/door_gold.png",NIGHT:""}},a.DOOR_DIAMOND={ID:1270,URL:{DAY:"/img/buildings/door_diamond.png",NIGHT:""}},a.DOOR_AMETHYST={ID:1271,URL:{DAY:"/img/buildings/door_amethyst.png",NIGHT:""}},a.SPIKE_WOOD={ID:1272,URL:{DAY:"/img/buildings/spike_wood.png",NIGHT:""}},a.SPIKE_STONE={ID:1273,URL:{DAY:"/img/buildings/spike_stone.png",NIGHT:""}},a.SPIKE_GOLD={ID:1274,URL:{DAY:"/img/buildings/spike_gold.png",NIGHT:""}},a.SPIKE_DIAMOND={ID:1275,URL:{DAY:"/img/buildings/spike_diamond.png",NIGHT:""}},a.SPIKE_AMETHYST={ID:1276,URL:{DAY:"/img/buildings/spike_amethyst.png",NIGHT:""}},a.SPIKE_DOOR_WOOD={ID:1277,URL:{DAY:"/img/buildings/door_spike_wood.png",NIGHT:""}},a.SPIKE_DOOR_STONE={ID:1278,URL:{DAY:"/img/buildings/door_spike_stone.png",NIGHT:""}},a.SPIKE_DOOR_GOLD={ID:1279,URL:{DAY:"/img/buildings/door_spike_gold.png",NIGHT:""}},a.SPIKE_DOOR_DIAMOND={ID:1280,URL:{DAY:"/img/buildings/door_spike_diamond.png",NIGHT:""}},a.SPIKE_DOOR_AMETHYST={ID:1281,URL:{DAY:"/img/buildings/door_spike_amethyst.png",NIGHT:""}},a.GOLD0={ID:1282,URL:{DAY:"/img/Resources/Day/g1.png",NIGHT:"/img/Resources/Night/g1.png"}},a.GOLD1={ID:1283,URL:{DAY:"/img/Resources/Day/g2.png",NIGHT:"/img/Resources/Night/g2.png"}},a.GOLD2={ID:1284,URL:{DAY:"/img/Resources/Day/g3.png",NIGHT:"/img/Resources/Night/g3.png"}},a.DIAMOND0={ID:1285,URL:{DAY:"/img/Resources/Day/d1.png",NIGHT:"/img/Resources/Night/d1.png"}},a.DIAMOND1={ID:1286,URL:{DAY:"/img/Resources/Day/d2.png",NIGHT:"/img/Resources/Night/d2.png"}},a.DIAMOND2={ID:1287,URL:{DAY:"/img/Resources/Day/d3.png",NIGHT:"/img/Resources/Night/d3.png"}},a.AMETHYST0={ID:1288,URL:{DAY:"/img/Resources/Day/a1.png",NIGHT:"/img/Resources/Night/a1.png"}},a.AMETHYST1={ID:1289,URL:{DAY:"/img/Resources/Day/a2.png",NIGHT:"/img/Resources/Night/a2.png"}},a.AMETHYST2={ID:1290,URL:{DAY:"/img/Resources/Day/a3.png",NIGHT:"/img/Resources/Night/a3.png"}},a.STONE_PITCHFORK={ID:1291,URL:{DAY:"/img/items/fork_stone.png",NIGHT:""}},a.COMPRESSOR_INACTIVE={ID:1295,URL:{DAY:"/img/buildings/compressor_inactive.png",NIGHT:""}},a.COMPRESSOR_ACTIVE={ID:1296,URL:{DAY:"/img/buildings/compressor_active.png",NIGHT:""}},a.WORKBENCH={ID:1297,URL:{DAY:"/img/buildings/workbench.png",NIGHT:""}},a.SIMPLE_ITEM_UI={ID:1298,URL:{DAY:"/img/items/icons/simple_item_ui.png",NIGHT:""}},a.INV_PLUS={ID:1299,URL:{DAY:"/img/items/icons/add_button.png",NIGHT:""}},a.WHEAT_SEED={ID:1300,URL:{DAY:"/img/buildings/plant_wheat_seed.png",NIGHT:""}},a.BERRY_SEED={ID:1301,URL:{DAY:"/img/buildings/plant_berry_seed.png",NIGHT:""}},a.BREAD_OVEN_INACTIVE={ID:1302,URL:{DAY:"/img/buildings/oven_not_active.png",NIGHT:""}},a.BREAD_OVEN_ACTIVE={ID:1303,URL:{DAY:"/img/buildings/oven_active.png",NIGHT:""}},a.TRIPLE_ITEM_UI={ID:1304,URL:{DAY:"/img/items/icons/triple_item_ui.png",NIGHT:""}},a.MINIMAP_WOOD={ID:1305,URL:{DAY:"/img/ui/minimap_wood.png",NIGHT:""}},a.MINIMAP_STONE={ID:1306,URL:{DAY:"/img/ui/minimap_stone.png",NIGHT:""}},a.MINIMAP_GOLD={ID:1307,URL:{DAY:"/img/ui/minimap_gold.png",NIGHT:""}},a.MINIMAP_DIAMOND={ID:1308,URL:{DAY:"/img/ui/minimap_diamond.png",NIGHT:""}},a.MINIMAP_AMETHYST={ID:1309,URL:{DAY:"/img/ui/minimap_amethyst.png",NIGHT:""}},a.MINIMAP_BERRY={ID:1310,URL:{DAY:"/img/ui/minimap_berry.png",NIGHT:""}},a.BOOK={ID:1311,URL:{DAY:"/img/items/book.png",NIGHT:""}},a.BERRY1={ID:1312,URL:{DAY:"/img/Resources/Day/b1.png",NIGHT:"/img/Resources/Night/b1.png"}},a.PLOT={ID:1313,URL:{DAY:"/img/buildings/plot.png"}},a.WRENCH={ID:1314,URL:{DAY:"/img/items/wrench.png"}},a.FURNACE_INACTIVE={ID:1315,URL:{DAY:"/img/buildings/furnace_inactive.png"}},a.FURNACE_ACTIVE={ID:1316,URL:{DAY:"/img/buildings/furnace_active.png"}},a.ONE_ITEM_UI={ID:1317,URL:{DAY:"/img/items/icons/one_item_ui.png",NIGHT:""}},a.UI_BREAD_SHOP={ID:1318,URL:{DAY:"/img/items/icons/ui_button_shop.png"}},a.CHEST={ID:1319,URL:{DAY:"/img/buildings/chest.png"}},a.BANDAGE_HEALS_UI={ID:1320,URL:{DAY:"/img/items/icons/ui_bands_left.png",NIGHT:""}},a.TOTEM={ID:1321,URL:{DAY:"/img/buildings/totem.png",NIGHT:""}},a.UI_TOTEM_AVAIBLE={ID:1322,URL:{DAY:"/img/ui/totem_avaible.png"}},a.UI_TOTEM_UNAVAIBLE={ID:1323,URL:{DAY:"/img/ui/totem_not_avaible.png"}},a.UI_TOTEM_PLAYER_ICO={ID:1324,URL:{DAY:"/img/ui/isTotem.png"}},a.UI_TOTEM_LEADER_ICO={ID:1325,URL:{DAY:"/img/ui/totem_leader.png"}},a.WARM_HELMET1={ID:1326,URL:{DAY:"/img/items/hat1.png",NIGHT:""}},a.WARM_HELMET2={ID:1327,URL:{DAY:"/img/items/hat2.png",NIGHT:""}};let s,r=a;class n{constructor(e,t,i,a,s,r){this.o=e,this.v=t,this.min=a,this.max=i,this.min_speed=r,this.max_speed=s}update(e){if(this.v<this.min&&(this.v=this.min),this.v>this.max&&(this.v=this.max),this.o){var t=this.v+e*this.max_speed;if(t>this.max)return this.v=this.max,this.o=!1,!0;this.v=t}else(t=this.v-e*this.min_speed)<this.min?(this.v=this.min,this.o=!0):this.v=t}}let o=2*Math.PI;function l(e,t,i){var a;return e+(2*(a=(t-e)%o)%o-a)*i}let h={fromId:e=>Object.values(h).find((t=>t.Id==e)),AIR:{Id:0,name:"AIR",description:"It's just a AIR"},WOOD:{Id:1,name:"Wood",description:"Common resource, can be used to craft your first sword or maybe a pickaxe?",author:"Helpy"},STONE:{Id:2,name:"Stone",description:"Yup, just a rock",author:"Helpy"},GOLD:{Id:3,name:"Gold",description:"Shinyyy!",author:"Helpy"},DIAMOND:{Id:4,name:"Diamond",description:"Found in The deepest cave of famish world",author:"Shiroś"},FIRE:{Id:5,name:"Fire",description:"Keeps you warm!",author:"Phoenix",is_building:!0,objectSpriteId:r.FIRECAMP_STICKS.ID,offset_angle:.307,size_offset:.575},RAW_MEAT:{Id:6,name:"Raw Meat",description:"Try using it on campfire",author:" "},COOKED_MEAT:{Id:7,name:"Cooked Meat",description:"Delicious steak!",author:""},BONE:{Id:8,name:"Bone",description:"Who did you kill for this bone?",author:""},WOLF_FUR:{Id:9,name:"Wolf Fur",description:"Wolfs aren't cute",author:""},RABBIT_FUR:{Id:10,name:"Rabbit Fur",description:"Might be used to craft hat",author:""},CORD:{Id:11,name:"Cord",description:"Uhh its so sticky.",author:""},BERRY:{Id:12,name:"Berry",description:"Sweet!",author:""},WHEAT:{Id:13,name:"Wheat",description:"Can be useful",author:""},WOOD_PICKAXE:{Id:14,name:"Wooden Pickaxe",description:"It will mine something",author:"",objectSpriteId:r.WOOD_PICKAXE.ID},STONE_PICKAXE:{Id:15,name:"Stone Pickaxe",description:"Upgrade!",author:"EvelTeam ~",objectSpriteId:r.STONE_PICKAXE.ID},GOLD_PICKAXE:{Id:16,name:"Gold Pickaxe",description:"You have envious people",author:"",objectSpriteId:r.GOLD_PICKAXE.ID},DIAMOND_PICKAXE:{Id:17,name:"Diamond Pickaxe",description:"This was hard..",author:"",objectSpriteId:r.DIAMOND_PICKAXE.ID},AMETHYST_PICKAXE:{Id:18,name:"Amethyst Pickaxe",description:"Resource King",author:"",objectSpriteId:r.AMETHYST_PICKAXE.ID},WOOD_SWORD:{Id:19,name:"Wooden Sword",description:"Tickles, no more!",author:"",objectSpriteId:r.WOOD_SWORD.ID},STONE_SWORD:{Id:20,name:"Stone Sword",description:"More serious tool",author:"",objectSpriteId:r.STONE_SWORD.ID},GOLD_SWORD:{Id:21,name:"Golden Sword",description:"King of the forest!",author:"",objectSpriteId:r.GOLD_SWORD.ID},DIAMOND_SWORD:{Id:22,name:"Diamond Sword",description:"Killer",author:"",objectSpriteId:r.DIAMOND_SWORD.ID},AMETHYST_SWORD:{Id:23,name:"Amethyst Sword",description:"Legendary warrior!",author:"",objectSpriteId:r.AMETHYST_SWORD.ID},WOOD_SPEAR:{Id:24,name:"Wooden Spear",description:"Funny tool",author:"",objectSpriteId:r.WOOD_SPEAR.ID},STONE_SPEAR:{Id:25,name:"Stone Spear",description:"Сan only pierce paper",author:"",objectSpriteId:r.STONE_SPEAR.ID},GOLD_SPEAR:{Id:26,name:"Golden Spear",description:"Melee warrior",author:"",objectSpriteId:r.GOLD_SPEAR.ID},DIAMOND_SPEAR:{Id:27,name:"Diamond Spear",description:"Serious Warrior",author:"",objectSpriteId:r.DIAMOND_SPEAR.ID},AMETHYST_SPEAR:{Id:28,name:"Amethyst Spear",description:"Ohh.. Didn't expect this one to show up",author:"",objectSpriteId:r.AMETHYST_SPEAR.ID},WOOD_HELMET:{Id:29,name:"Wooden Helmet",description:"Why do you use crate as a helmet?",author:"Helpy",objectSpriteId:r.WOOD_HELMET.ID},STONE_HELMET:{Id:30,name:"Stone Helmet",description:"A real knight!",author:"Helpy",objectSpriteId:r.STONE_HELMET.ID},GOLD_HELMET:{Id:31,name:"Golden Helmet",description:"Used by the king of the forest",author:"Helpy",objectSpriteId:r.GOLD_HELMET.ID},DIAMOND_HELMET:{Id:32,name:"Diamond Helmet",description:"Swaggy!",author:"Helpy",objectSpriteId:r.DIAMOND_HELMET.ID},AMETHYST_HELMET:{Id:33,name:"Amethyst Helmet",description:"You conquered the winter!",author:"Helpy",objectSpriteId:r.AMETHYST_HELMET.ID},AMETHYST:{Id:34,name:"Amethyst",description:"Found in The deepest cave of famish world",author:"Helpy"},STONE_HAMMER:{Id:35,name:"Stone Hammer",description:"It may be usefull not sure tho.",author:"Helpy",objectSpriteId:r.STONE_HAMMER.ID},GOLD_HAMMER:{Id:36,name:"Golden Hammer",description:"A bit better than Stone",author:"Helpy",objectSpriteId:r.GOLD_HAMMER.ID},DIAMOND_HAMMER:{Id:37,name:"Diamond Hammer",description:"You can raid a base now!",author:"Helpy",objectSpriteId:r.DIAMOND_HAMMER.ID},AMETHYST_HAMMER:{Id:38,name:"Amethyst Hammer",description:"All scary of you",author:"",objectSpriteId:r.AMETHYST_HAMMER.ID},WRENCH:{Id:39,name:"Wrench",description:"Fixing buildings should be easy now!",author:"",objectSpriteId:r.WRENCH.ID},WALL_WOOD:{Id:40,name:"Wooden Wall",description:"Yea, Just a wall",author:"",is_building:!0,objectSpriteId:r.WALL_WOOD.ID,offset_angle:.307,size_offset:1.75,max_health:1e3},WALL_STONE:{Id:41,name:"Stone Wall",description:"Way better than Wood. You can now protect something",author:"",is_building:!0,objectSpriteId:r.WALL_STONE.ID,offset_angle:.307,size_offset:1.75,max_health:1500},WALL_GOLD:{Id:42,name:"Gold Wall",description:"Best one that you can make in the forest!",author:"",is_building:!0,objectSpriteId:r.WALL_GOLD.ID,offset_angle:.307,size_offset:1.75,max_health:2e3},WALL_DIAMOND:{Id:43,name:"Diamond Wall",description:"We are getting there!",author:"",is_building:!0,objectSpriteId:r.WALL_DIAMOND.ID,offset_angle:.307,size_offset:1.75,max_health:2500},WALL_AMETHYST:{Id:44,name:"Amethyst Wall",description:"The sturdiest of all...",author:"",is_building:!0,objectSpriteId:r.WALL_AMETHYST.ID,offset_angle:.307,size_offset:1.75,max_health:3500},SPIKE_WOOD:{Id:45,name:"Wooden Spike",description:"A ball with spikes",author:"",is_building:!0,objectSpriteId:r.SPIKE_WOOD.ID,offset_angle:.307,size_offset:1.4,max_health:750},SPIKE_STONE:{Id:46,name:"Stone Spike",description:"Don't touch it. You will hurt yourself!",author:"",is_building:!0,objectSpriteId:r.SPIKE_STONE.ID,offset_angle:.307,size_offset:1.4,max_health:1150},SPIKE_GOLD:{Id:47,name:"Gold Spike",description:"A big long... Spike",author:"",is_building:!0,objectSpriteId:r.SPIKE_GOLD.ID,offset_angle:.307,size_offset:1.4,max_health:1500},SPIKE_DIAMOND:{Id:48,name:"Diamond Spike",description:"You can cause serious trouble with this one!",author:"",is_building:!0,objectSpriteId:r.SPIKE_DIAMOND.ID,offset_angle:.307,size_offset:1.4,max_health:2e3},SPIKE_AMETHYST:{Id:49,name:"Amethyst Spike",description:"Good with bases and running from those savages!",author:"",is_building:!0,objectSpriteId:r.SPIKE_AMETHYST.ID,offset_angle:.307,size_offset:1.4,max_health:2750},DOOR_WOOD:{Id:50,name:"Wooden Door",description:"Huh. I don't think it will last a long",author:"",is_building:!0,objectSpriteId:r.DOOR_WOOD.ID,offset_angle:.307,size_offset:1.75,max_health:1e3},DOOR_STONE:{Id:51,name:"Stone Door",description:"Upgrade from Wood. A bit better",author:"",is_building:!0,objectSpriteId:r.DOOR_STONE.ID,offset_angle:.307,size_offset:1.75,max_health:1500},DOOR_GOLD:{Id:52,name:"Gold Door",description:"Now we are talking!",author:"",is_building:!0,objectSpriteId:r.DOOR_GOLD.ID,offset_angle:.307,size_offset:1.75,max_health:2e3},DOOR_DIAMOND:{Id:53,name:"Diamond Door",description:"Very sturdy. Can make a great base!",author:"",is_building:!0,objectSpriteId:r.DOOR_DIAMOND.ID,offset_angle:.307,size_offset:1.75,max_health:2500},DOOR_AMETHYST:{Id:54,name:"Amethyst Door",description:"The best off all. Raiders will be mad!",author:"",is_building:!0,objectSpriteId:r.DOOR_AMETHYST.ID,offset_angle:.307,size_offset:1.75,max_health:3500},STONE_PITCHFORK:{Id:55,name:"Stone Pitchfork",description:"",author:"",objectSpriteId:r.STONE_PITCHFORK.ID},COMPRESSOR:{Id:59,name:"Compressor",description:"",author:"",objectSpriteId:r.COMPRESSOR_INACTIVE.ID,is_building:!0,offset_angle:0,size_offset:.9},WORKBENCH:{Id:60,name:"Workbench",description:"",author:"",objectSpriteId:r.WORKBENCH.ID,is_building:!0,offset_angle:.5*Math.PI,size_offset:.45},WHEAT_SEED:{Id:61,name:"Wheat Seed",description:"",author:"",objectSpriteId:r.WHEAT_SEED.ID,is_building:!0,offset_angle:.5*Math.PI,size_offset:.725},BERRY_SEED:{Id:62,name:"Berry Seed",description:"",author:"",objectSpriteId:r.BERRY_SEED.ID,is_building:!0,offset_angle:.5*Math.PI,size_offset:.725},FLOUR:{Id:63,name:"Flour",description:"Cook time?",author:"EvelTeam ~"},BREAD:{Id:64,name:"Bread",description:"Impressive!",author:"EvelTeam ~"},BREAD_OVEN:{Id:65,name:"Bread Oven",description:"",author:"EvelTeam ~",objectSpriteId:r.BREAD_OVEN_INACTIVE.ID,is_building:!0,offset_angle:.5*Math.PI,size_offset:.225},BOOK:{Id:66,name:"Book",description:"",author:"",objectSpriteId:r.BOOK.ID},PLOT:{Id:67,name:"Planting Plot",description:"Useful for plantings",author:"",objectSpriteId:r.PLOT.ID,is_building:!0,offset_angle:.5*Math.PI,size_offset:.85},FURNACE:{Id:68,name:"Furnace",description:"Very hot",author:"EvelTeam ~",objectSpriteId:r.FURNACE_INACTIVE.ID,is_building:!0,offset_angle:.5*Math.PI,size_offset:.275},CHEST:{Id:69,name:"Chest",description:"now your resources are safe",author:"EvelTeam ~",objectSpriteId:r.CHEST.ID,is_building:!0,offset_angle:.5*Math.PI,size_offset:.35},BANDAGE:{Id:70,name:"Bandage",description:"Heals you, heal: 40",author:"EvelTeam ~"},TOTEM:{Id:71,name:"Totem",description:"Your teammates will be safe",author:"EvelTeam ~",objectSpriteId:r.TOTEM.ID,is_building:!0,offset_angle:.5*Math.PI,size_offset:1},WARM_HELMET1:{Id:72,name:"hat 1",description:"You are ready for the winter!",author:"Helpy",objectSpriteId:r.WARM_HELMET1.ID},WARM_HELMET2:{Id:73,name:"hat 2",description:"You are ready for the winter!",author:"Helpy",objectSpriteId:r.WARM_HELMET2.ID}},d=[[],[],[],[],[]],g=["#BB0000","#00BB00","#1CE7E0","#DBE71C","#BB0000"];class c{constructor(){}static clear_building_data(){Ee.buildingsManager.current_building=0,Ee.buildingsManager.lastBuild=-1}static is_teammate(e){return Ee.myPlayer.totem_data.players.find((t=>t[0]==e))}static draw_color_behind(){ctx.globalCompositeOperation="source-in",ctx.fillStyle="#09f",ctx.fillRect(0,0,e.width,e.height)}static get_image_effect(e,t,i){var a=d[i][e];if(void 0===a){var s=(a=document.createElement("canvas")).getContext("2d"),r=t.width,n=t.height;a.width=r,a.height=n,s.drawImage(t,0,0),s.globalCompositeOperation="source-in",s.fillStyle=g[i],s.fillRect(0,0,r,n),d[i][e]=a}return a}static calculateAction(e,t,i,a,s,r,n,o,l){let h=0;return e&&(h|=512),t&&(h|=2),i&&(h|=4),a&&(h|=8),s&&(h|=16),r&&(h|=32),n&&(h|=64),o&&(h|=128),l&&(h|=256),h}static getNearest(e,t=[]){let i={dist:9999999,entity:null};for(let a=0;a<t.length;a++){let s=t[a],r=c.getDist(e.x,e.y,s.x,s.y);i.dist>r&&(i.dist=r,i.entity=s)}return i}static getNearestPlayer(e,t=[]){let i={dist:9999999,entity:null};for(let a=0;a<t.length;a++){e.id==t[a].id&&a++;let s=t[a],r=c.getDist(e.x,e.y,s.x,s.y);i.dist>r&&(i.dist=r,i.entity=s)}return i}static isInsidePlayerView(e,t){return e.x>t.x&&e.x<t.x+t.width&&e.y<t.y+t.height&&e.y>t.y}static isInside(e){let t=Ee.mouse.evX,i=Ee.mouse.evY;return t>e.x&&t<e.x+e.width&&i<e.y+e.height&&i>e.y}static hitten(e){let t=e[1],i=e[2],a=e[0];if(a<0){let e=Ee.gameClient.world.objects.find((e=>e.id==t));e.hit.angle=i,e.hit.update=!0}else{let e=c.getEntity(t,a);e.hit.angle=i,e.hit.update=!0}}static random_min_max(e,t){return e+Math.floor(Math.random()*t)}static reverseValue(e){return-.5*e}static getFakeWorld(){let e=10+Math.floor(10*Math.random()),t=[];for(let i=0;i<e;i++){let a=i>.15*e?"TREE":"STONE";"STONE"==a&&(a+=c.random_min_max(0,2)),"TREE"==a&&(a+=c.random_min_max(0,11));let s=.49*c.random_min_max(-Ee.gameClient.render.canvas.width,2*Ee.gameClient.render.canvas.width),r=.49*c.random_min_max(-Ee.gameClient.render.canvas.height,2*Ee.gameClient.render.canvas.height);t.push({type:a,x:s,y:r,size:c.random_min_max(0,1)})}return t}static disposeEntity(e,t){let i=Ee.gameClient.entities[t];if(!i)return;let a=i.filter((t=>t.id!=e.id));Ee.gameClient.entities[t]=a}static getWeaponInfo(e){return h.fromId(e)}static angleDifference(e,t){let i=2*Math.PI,a=(t-e)%i;return Math.abs(2*a%i-a)}static wordSplit(e,{maxLength:t=50,char:i="\n",prepend:a="",append:s=""}={}){if(e.length<=t)return[e];let r=[e];if(Array.isArray(i))for(;i.length>0&&r.some((e=>e.length>t));){let e=i.shift();r=e instanceof RegExp?r.flatMap((t=>t.match(e))):r.flatMap((t=>t.split(e)))}else r=e.split(i);if(r.some((e=>e.length>t)))throw RangeError("SPLIT_MAX_LEN");let n=[],o="";for(let e of r)o&&(o+i+e+s).length>t&&(n.push(o+s),o=a),o+=(o&&o!==a?i:"")+e;return n.concat(o).filter((e=>e))}static setCursor(e){document.querySelector("body").style.cursor=e?document.querySelector("body").style.cursor="url(../img/cursor_pointer.png), none":"url(../img/cursor_default.png), none"}static clear_team(){let e=document.getElementById("team_box");e.innerHTML="",e.style.display="none",Ee.myPlayer.totem_data={players:null,leader:!1,locked:0,entity:null}}static update_totem_ui(){let e=document.getElementById("team_box");if(Ee.myPlayer.totem_data.players.length<=0)return e.style.display="none";let t=c.getPlayerInfo(Ee.myPlayer.totem_data.players[0][0]);e.innerHTML="",null!=t&&(e.innerHTML+='<div id="leader"><img src="./img/ui/totem_leader.png" style="width:25px;margin-right:5px;" ></img>'+t.name+"</div");for(let t=1;t<Ee.myPlayer.totem_data.players.length;t++){let i=Ee.myPlayer.totem_data.players[t],a=c.getPlayerInfo(i[0]);a&&(Ee.myPlayer.id==Ee.myPlayer.totem_data.players[0][0]?e.innerHTML+='<div class="nicknames"> <div style="display:inline-block;padding-top:7px;">'+a.name+'</div><div class="eject_member" id="eject_member'+t+'"><img src="./img/close-team.png" style="width:20px;padding:5px;"></img></div>':e.innerHTML+='<div class="nicknames"> <div style="display:inline-block;padding-top:7px;">'+a.name+'</div><div class="eject_member" id="eject_member'+t)}if(Ee.myPlayer.id==Ee.myPlayer.totem_data.players[0][0]){1==Ee.myPlayer.totem_data.locked?e.innerHTML+='<div id="lock_team" style="display:inline-block;">LOCK</div></div>':e.innerHTML+='<div id="lock_team" style="display:inline-block;">UNLOCK</div></div>',document.getElementById("lock_team").addEventListener("click",c.lock_update,!1);for(let e=1;e<Ee.myPlayer.totem_data.players.length;e++)document.getElementById("eject_member"+e).addEventListener("click",(function(){c.kick_teammate(e)}),!1)}else e.innerHTML+='<div id="leave" style="display:inline-block;">LEAVE</div></div>',document.getElementById("leave").addEventListener("click",c.leave_team,!1);e.style.display="inline-block"}static leave_team(){Ee.networkClient.sendJSON([16,3])}static lock_update(){Ee.networkClient.sendJSON([16,2])}static kick_teammate(e){Ee.networkClient.sendJSON([16,4,e])}static isPlayerExists(e){return!!this.getPlayer(e)}static isEntityAppeared(e,t){return!!this.getEntities(t).find((t=>t.id==e))}static getEntity(e,t){return this.getEntities(t).find((t=>t.id==e))}static getPlayer(e){return this.getEntities(0).find((t=>t.id==e))}static getPlayerInfo(e){return Ee.gameClient.playerList.find((t=>t.id==e))}static getEntities(e){return Ee.gameClient.entities[e].filter((e=>null!=e))}static getNickname(e){let t=Ee.gameClient.playerList.find((t=>t.id==e));return t?t.name:null}static getDist(e,t,i,a){return Math.sqrt((e-i)**2+(t-a)**2)}static reverseStr(){return arguments[0].split("").reverse().join("")}static ease_out_quad(e){return e*(2-e)}static ease_out_cubic(e){return--e*e*e+1}static ease_in_out_quad(e){return e<.5?2*e*e:(4-2*e)*e-1}static ease_in_out_cubic(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}static ease_in_out_quart(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}static ease_out_quart(e){return 1- --e*e*e*e}static ease_out_quint(e){return 1+--e*e*e*e*e}}class m{constructor(e,t,i,a,s,r,n,o,l){this.fun=e,this.ed=t,this.em=i,this.sx=a,this.sy=s,this.x=r,this.y=n,this.ex=o,this.ey=l}ease=function(e,t){if(e.x==this.ex&&e.y==this.ey||(this.ex=e.x,this.ey=e.y,this.sx=this.x,this.sy=this.y,this.ed=0),this.ex!=this.x||this.ey!=this.y)if(this.ed+=t,this.ed>this.em)this.x=this.ex,this.y=this.ey;else{var i=this.fun(this.ed/this.em);this.x=this.sx+(this.ex-this.sx)*i,this.y=this.sy+(this.ey-this.sy)*i}}}function u(e,t){var i=document.createElement("canvas"),a=i.getContext("2d"),s=Math.floor(32),r=Math.floor(22);a.font=r+"px Baloo Paaji";var n,o,l,h,d=a.measureText(t).width+20,g=10;return i.width=d,i.height=s,(l=d)<2*g&&(g=l/2),(h=s)<2*g&&(g=h/2),0>g&&(g=0),(o=a).beginPath(),o.moveTo(0+g,0),o.arcTo(0+l,0,0+l,0+h,g),o.arcTo(0+l,0+h,0,0+h,g),o.arcTo(0,0+h,0,0,g),o.arcTo(0,0,0+l,0,g),o.closePath(),a.globalAlpha=.5,(n=a).fillStyle="#000",n.fill(),a.globalAlpha=1,a.textBaseline="middle",a.font=r+"px Baloo Paaji",a.beginPath(),a.fillStyle="#FFF",a.fillText(t,10,s/2*1.1),i}function p(e,t,i,a,s,r,n,o,l,h){void 0!==t.tryLoad&&1!==t.tryLoad()||(void 0!==h?e.drawImage(t,i,a,Math.max(1,s),Math.max(1,r),n,o,l,h):void 0!==r?e.drawImage(t,i,a,s,r):e.drawImage(t,i,a))}function f(){let e=Ee.gameClient.render.delta,t=Ee.gameClient.render.ctx;if(t.save(),t.translate(Ee.camera.cam.x+this.x,Ee.camera.cam.y+this.y),this.text.length>0){for(var i=0;i<this.text.length&&i<2;i++)this.label[i]||(this.label[i]=u(0,this.text[i]),this.text_effect[i]=0,this.text_move[i]=0),1===i&&(this.text_move[0]=30*c.ease_in_out_quad(this.text_ease));for(this.text_effect[0]+=e,this.text.length>1&&(this.text_ease=Math.min(this.text_ease+e,1),this.text_effect[0]>1&&this.text_ease>.5&&(this.text_effect[1]+=e)),i=0;i<this.text.length&&i<2;i++){var a=this.text_effect[i];a>0&&(t.globalAlpha=a<.25?4*a:a>3.75?Math.max(4*(4-a),0):1,p(t,this.label[i],-this.label[i].width/2,-this.text_move[i]+-this.label[i].height/2-110))}this.text_effect[0]>4&&(this.text_effect.shift(),this.text.shift(),this.text_move.shift(),this.label.shift(),this.text_ease=0)}t.restore()}function y(e,t,i,a){this.angle&&NaN!=this.angle||(this.angle=Math.PI),this._angle&&NaN!=this._angle||(this._angle=this.angle),this._angle=l(this._angle,this.angle,10*i);let s=32&this.action,n=64&this.action,o=0!=this.attack.v||16&this.action;s&&this.walk.update(i),n&&this.idle.update(i),16&this.action&&this.attack.update(i)&&0==this.attack.o&&(this.hand=!this.hand,this.action-=16),0!=this.right&&(this.hand=!0);let d=this.hand?this.attack.v/3:-this.attack.v,g=this.hand?this.attack.v:-this.attack.v/3,m=32&this.action?this.walk.v:this.idle.v;this.id==Ee.myPlayer.id&&(this._angle=Ee.mouse.angle);let u=0==Ee.gameClient.world.cycle.isNight;t.save(),0!=this.right&&function(e,t,i,a,s){window.imgScale||(window.imgScale=.6),window.rot||(window.rot=.1),window.ox||(window.ox=1),window.oy||(window.oy=1),window.imageHeightScale||(window.imageHeightScale=.6),e.save();let r,n,o,l,d,g=h.fromId(a.right),c=Ee.spriteClient.getSprite(g.objectSpriteId,!0);switch(e.translate(a.x+Ee.camera.cam.x,a.y+Ee.camera.cam.y),e.rotate(a._angle-Math.PI/2+2*s.right),a.right){case h.WOOD_PICKAXE.Id:case h.STONE_PICKAXE.Id:case h.GOLD_PICKAXE.Id:case h.DIAMOND_PICKAXE.Id:case h.AMETHYST_PICKAXE.Id:r=-9,n=73,o=2.347,l=.48,d=.48;break;case h.WOOD_SWORD.Id:case h.STONE_SWORD.Id:case h.GOLD_SWORD.Id:case h.DIAMOND_SWORD.Id:case h.AMETHYST_SWORD.Id:r=-1,n=100,o=1.417,l=.32,d=.33;break;case h.WOOD_SPEAR.Id:case h.STONE_SPEAR.Id:case h.GOLD_SPEAR.Id:case h.DIAMOND_SPEAR.Id:case h.AMETHYST_SPEAR.Id:r=3,n=123,o=1.417,l=.57,d=.6;break;case h.STONE_HAMMER.Id:case h.GOLD_HAMMER.Id:case h.DIAMOND_HAMMER.Id:case h.AMETHYST_HAMMER.Id:r=-2,n=85,o=1.397,l=.92,d=.93;break;case h.STONE_PITCHFORK.Id:r=-3,n=116,o=3,l=-.175,d=.175;break;case h.BOOK.Id:r=-10,n=56,l=.55,d=.55,o=15.35;break;case h.WRENCH.Id:r=-3.9,n=60.2,l=-.25,d=-.25,o=8.75}e.translate(r,n),e.translate(-55-(s.drawAttack||32&a.action?0:s.handsOffset),(s.drawAttack?0:32&a.action?-s.handsOffset:0)-38),e.rotate(o),null!=c&&i.drawImage(c,-c.width*(l/2),-c.height*(d/2),c.width*l,c.height*d),e.restore()}(t,0,a,this,{drawAttack:o,right:d,handsOffset:m}),t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this._angle-Math.PI/2);let f=Ee.spriteClient.getSprite(r.PLAYER_BODY.ID,u);if(t.drawImage(f,-f.width/4.25,-f.height/4.25,f.width/2.125,f.height/2.125),t.restore(),t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this._angle+Math.PI/2),(2&this.action||.6!=this.hurt.anim.v)&&(this.hurt.anim.update(i),t.globalAlpha=.7-this.hurt.anim.v,t.drawImage(c.get_image_effect(0,f,0),-f.width/4.25,-f.height/4.25,f.width/2.125,f.height/2.125)),(128&this.action||.6!=this.heal.anim.v)&&(this.heal.anim.update(i),t.globalAlpha=.7-this.heal.anim.v,t.drawImage(c.get_image_effect(0,f,1),-f.width/4.25,-f.height/4.25,f.width/2.125,f.height/2.125)),(8&this.action||.6!=this.hunger.anim.v)&&(this.hunger.anim.update(i),t.globalAlpha=.7-this.hunger.anim.v,t.drawImage(c.get_image_effect(0,f,3),-f.width/4.25,-f.height/4.25,f.width/2.125,f.height/2.125)),(4&this.action||.6!=this.cold.anim.v)&&(this.cold.anim.update(i),t.globalAlpha=.7-this.cold.anim.v,t.drawImage(c.get_image_effect(0,f,2),-f.width/4.25,-f.height/4.25,f.width/2.125,f.height/2.125)),t.restore(),t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),this.stunned||.6!=this.stun.anim.v){let e=Ee.spriteClient.getSprite(r.SPIDER_WEB.ID,u);this.stunned=!1,this.stun.anim.update(i),t.globalAlpha=.7-this.stun.anim.v,t.drawImage(e,-e.width/2.9,-e.height/2.9,e.width/1.45,e.height/1.45)}t.restore(),0!=this.hat&&function(e,t,i,a){e.save();let s,r,n,o,l=h.fromId(a.hat),d=Ee.spriteClient.getSprite(l.objectSpriteId,!0);switch(e.translate(a.x+Ee.camera.cam.x,a.y+Ee.camera.cam.y),e.rotate(a._angle-Math.PI/2),a.hat){case h.WOOD_HELMET.Id:s=1,r=-4,n=.26,o=.26;break;case h.STONE_HELMET.Id:s=0,r=-23,n=.24,o=.24;break;case h.GOLD_HELMET.Id:case h.DIAMOND_HELMET.Id:s=-1,r=-7,n=.22,o=.22;break;case h.AMETHYST_HELMET.Id:s=-.125,r=-1,n=.21,o=.21;break;case h.WARM_HELMET1.Id:s=1.552,r=-21.2799,n=.495,o=-.475;break;case h.WARM_HELMET2.Id:s=.002000000000000668,r=-10,n=-.4811,o=-.475}e.translate(s,r),null!=d&&i.drawImage(d,-d.width*(n/2),-d.height*(o/2),d.width*n,d.height*o),e.restore()}(t,0,a,this),Ee.drawShit&&this.id==Ee.myPlayer.id&&(t.save(),t.beginPath(),t.lineWidth=5,t.arc(Ee.drawShit[0].x+Ee.camera.cam.x,Ee.drawShit[0].y+Ee.camera.cam.y,Ee.drawShit[0].radius,0,2*Math.PI,!1),t.stroke(),t.restore()),t.save();let y=Ee.spriteClient.getSprite(r.PLAYER_LEFT_HAND.ID,u);t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this._angle+Math.PI/2+g),t.save(),t.translate(40+(o||s?0:m),-20+(o?0:s?m:0)),t.rotate(5.45),t.drawImage(y,0,0,y.width/2.125,y.height/2.125),t.restore(),t.restore(),t.save();let _=Ee.spriteClient.getSprite(r.PLAYER_RIGHT_HAND.ID,u);var I,w,b,A,v,D,M="#000",x=2;t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this._angle+Math.PI/2+d),t.save(),t.translate((o||s?0:-m)-55,-38+(o?0:s?m:0)),t.rotate(.95),t.drawImage(_,0,0,_.width/2.125,_.height/2.125),t.restore(),t.restore(),t.restore(),t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),this.name_label||(this.name_label=(I=c.getNickname(this.id),void 0===w&&(w=0),A=(b=document.createElement("canvas")).getContext("2d"),x=x?1*x:0,v=Math.floor(24),A.textAlign="center",A.font=v+"px Baloo Paaji",A.lineJoin="round",D=Math.min(A.measureText(I).width+2+0,300),v=1*(v+x+w)+0,b.width=D,b.height=v,A.textBaseline="middle",A.font="24px Baloo Paaji",A.lineJoin="round",M&&(A.beginPath(),A.fillStyle=M,A.fillText(I,0,v/2+x-0,D)),A.beginPath(),A.fillStyle="#FFF",A.fillText(I,w,(v-0)/2,D),b));let S=Math.floor(-this.name_label.height/2-70),E=Math.floor(-this.name_label.width/2);if(null!=Ee.myPlayer.totem_data.players){let e=c.is_teammate(this.id);if(null!=e){let t=Ee.spriteClient.getSprite(1==e[1]?r.UI_TOTEM_LEADER_ICO.ID:r.UI_TOTEM_PLAYER_ICO.ID);a.drawImage(t,E+-16-22.5,S+-14+5,32,28)}}p(t,this.name_label,E,S),t.restore(),t.restore(),this.draw_text()}function _(e,t,i,a){this._angle=l(this._angle,this.angle,10*i),this.move_anim.update(i);let s=0!=this.hurt.animation.v||2&this.action;s&&this.hurt.animation.update(i),t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this._angle-Math.PI/2);let n=Ee.spriteClient.getSprite(r.WOLF.ID,!0),o=n.width/1.125,h=n.height/1.125;if(a.drawImage(n,20+-o/2+-5*this.move_anim.v/2,20+-h/2+-5*this.move_anim.v/2,-40+o+5*this.move_anim.v,-40+h+5*this.move_anim.v),s){t.globalAlpha=this.hurt.animation.v/1.75;let e=Ee.spriteClient.getSprite(r.WOLF_HURT.ID,!0);o=e.width/1.125,h=e.height/1.125,a.drawImage(e,20+-o/2,20+-h/2,-40+o,-40+h)}t.restore()}function I(e,t,i,a){this._angle=l(this._angle,this.angle,10*i),this.move_anim.update(i);let s=0!=this.hurt.animation.v||2&this.action;s&&this.hurt.animation.update(i),t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this._angle-Math.PI/2);let n=Ee.spriteClient.getSprite(r.RABBIT.ID,!0);if(a.drawImage(n,10+-n.width/2+-5*this.move_anim.v/2,15+-n.height/2+-5*this.move_anim.v/2,-20+n.width+5*this.move_anim.v,-30+n.height+5*this.move_anim.v),s){t.globalAlpha=this.hurt.animation.v/1.75;let e=Ee.spriteClient.getSprite(r.RABBIT_HURT.ID,!0);a.drawImage(e,10+-e.width/2,15+-e.height/2,-20+e.width,-30+e.height)}t.restore()}function w(e,t,i,a){if(this.hit.update&&this.itemsIn>0&&Math.random()>.85&&this.particleAPI.createNewParticle({x:this.x,y:this.y,isAnimatedSpawn:!0,isAnimatedDispose:!0,radius:{min:12,max:20},speed:2.5,disposeSpeed:4.5,aliveTime:10+Math.floor(40*Math.random()),colors:this.particleColors}),this.ground.update(i),t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),6==this.type&&this.age>=1&&(this.wind.update(i),t.rotate(this.wind.v)),this.hit.update){this.hit.anim.update(Ee.gameClient.render.delta)&&0==this.hit.anim.o&&(this.hit.update=!1);let e=(1-this.hit.anim.v)*i*600;var s=Math.cos(this.hit.angle)*e,n=Math.sin(this.hit.angle)*e}else s=0,n=0;let o;switch(this.type){case 6:if(0==this.itemsIn&&(o=Ee.spriteClient.getSprite(r.PLANT_WHEAT_SEED.ID,!0)),1==this.itemsIn&&(o=Ee.spriteClient.getSprite(r.PLANT_WHEAT.ID,!0)),0==this.itemsIn){let e=h.WHEAT_SEED.size_offset;e*=this.ground.v,a.drawImage(o,s+-o.width*(.5*e),n+-o.height*(.5*e),o.width*e,o.height*e)}else a.drawImage(o,9+s+-o.width/5.2,-17.5+(n+-o.height/5.2),o.width/2.6,o.height/2.6);break;case 5:if(0==this.age){o=Ee.spriteClient.getSprite(r.PLANT_BERRY_SEED.ID,!0);let e=h.BERRY_SEED.size_offset;e*=this.ground.v,a.drawImage(o,s+-o.width*(.5*e),n+-o.height*(.5*e),o.width*e,o.height*e)}let e,t;1==this.age&&(o=Ee.spriteClient.getSprite(r.PLANT_BERRY_BUSH.ID,!0),a.drawImage(o,s+-o.width/2,n+-o.height/2,o.width,o.height));var l=(o=Ee.spriteClient.getSprite(r.BERRY_SMALL.ID,!0)).width*this.ground.v,d=o.height*this.ground.v;for(let i=0;i<this.itemsIn;i++)switch(i+1){case 1:e=5,t=-15,a.drawImage(o,s+-l/2+e,n+-d/2+t,l,d);break;case 2:e=-14,t=1,a.drawImage(o,s+-l/2+e,n+-d/2+t,l,d);break;case 3:e=8,t=12,a.drawImage(o,s+-l/2+e,n+-d/2+t,l,d)}}t.restore(),this.particleAPI.updateParticles(t,e,i,a)}function b(e,t,i,a){this._angle=l(this._angle,this.angle,10*i),this.move_anim.update(i);let s=0!=this.hurt.animation.v||2&this.action;s&&this.hurt.animation.update(i),t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this._angle-Math.PI/2);let n=Ee.spriteClient.getSprite(r.SPIDER.ID,!0),o=n.width/1.45,h=n.height/1.4;if(a.drawImage(n,20+-o/2+-5*this.move_anim.v/2,20+-h/2+-5*this.move_anim.v/2,-40+o+5*this.move_anim.v,-40+h+5*this.move_anim.v),s){t.globalAlpha=this.hurt.animation.v/1.75;let e=Ee.spriteClient.getSprite(r.SPIDER_HURT.ID,!0);o=e.width/1.45,h=e.height/1.4,a.drawImage(e,20+-o/2,20+-h/2,-40+o,-40+h)}t.restore()}function A(e,t,i,a){t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this.angle-Math.PI/2);let s=Ee.spriteClient.getSprite(r.DROP_BOX.ID,!0);a.drawImage(s,-.3*s.width,-.3*s.height,.6*s.width,.6*s.height),(2&this.action||.6!=this.hurt.anim.v)&&(this.hurt.anim.update(i),t.globalAlpha=.7-this.hurt.anim.v,t.drawImage(c.get_image_effect(0,s,0),-.3*s.width,-.3*s.height,.6*s.width,.6*s.height)),t.restore()}function v(e,t,i,a){t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this.angle-Math.PI/2);let s=null,n=null;if(this.hit.update){this.hit.anim.update(Ee.gameClient.render.delta)&&0==this.hit.anim.o&&(this.hit.update=!1);let e=(1-this.hit.anim.v)*i*600;var o=Math.cos(this.hit.angle)*e,l=Math.sin(this.hit.angle)*e}else o=0,l=0;let d=-2;switch(this.type){case 10:s=Ee.spriteClient.getSprite(r.WALL_WOOD.ID,!0),n=h.WALL_WOOD;break;case 11:s=Ee.spriteClient.getSprite(r.WALL_STONE.ID,!0),n=h.WALL_STONE,d=-4;break;case 12:s=Ee.spriteClient.getSprite(r.WALL_GOLD.ID,!0),n=h.WALL_GOLD,d=-5;break;case 13:s=Ee.spriteClient.getSprite(r.WALL_DIAMOND.ID,!0),n=h.WALL_DIAMOND,d=-6;break;case 14:s=Ee.spriteClient.getSprite(r.WALL_AMETHYST.ID,!0),n=h.WALL_AMETHYST,d=-6}let g=n.size_offset;if(a.drawImage(s,o+-s.width*(.5*g),l+-s.height*(.5*g),s.width*g,s.height*g),Ee.options.get_value("render","building_health")){let e=this.info,i=n.max_health;i-e>5&&(t.beginPath(),t.globalAlpha=.25,t.strokeStyle="wheat",t.lineWidth=10,t.lineCap="round",t.arc(o,l+d,s.width*g/4,0,2*Math.PI/(i/(e-i)),!1),t.stroke())}t.restore()}let D=new Map;function M(e,t,i,a){let s=!1;if(t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this.angle-Math.PI/2),this.hit.update){this.hit.anim.update(Ee.gameClient.render.delta)&&0==this.hit.anim.o&&(this.hit.update=!1);let e=(1-this.hit.anim.v)*i*600;var n=Math.cos(this.hit.angle)*e,o=Math.sin(this.hit.angle)*e}else n=0,o=0;let l=Ee.spriteClient.getSprite(r.COMPRESSOR_INACTIVE.ID,!0),d=h.COMPRESSOR,g=d.size_offset,c=this.action;if(0!=this.info||0!=c)if(!D.get(c[0][0])||c[1][1]>=512)s=!0;else{l=Ee.spriteClient.getSprite(r.COMPRESSOR_ACTIVE.ID,!0),d=h.COMPRESSOR;let e=Math.floor(Math.random()*(2*Math.PI));a.drawImage(l,1*Math.cos(e)+n+-l.width*(.5*g),1*Math.sin(e)+o+-l.height*(.5*g),l.width*g,l.height*g)}s&&a.drawImage(l,n+-l.width*(.5*g),o+-l.height*(.5*g),l.width*g,l.height*g),t.restore(),0==this.info&&0==this.action||(+new Date-this.particleAPI.lastParticle>this.nextParticle&&(this.nextParticle=s?600+Math.floor(3900*Math.random()):200+Math.floor(1300*Math.random()),this.particleAPI.lastParticle=+new Date,this.particleAPI.createNewParticle({x:this.x,y:this.y,isAnimatedSpawn:!0,isAnimatedDispose:!0,radius:{min:15,max:25},colors:s?["#686e6b","#858f89","#98a39d","#59665f","#616362"]:["#342c57","#2f284e","#484168","#1f1a34","#5d5679"]})),this.particleAPI.updateParticles(t,e,i,a))}function x(e,t,i,a){let s=!1;if(t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this.angle-Math.PI/2),this.hit.update){this.hit.anim.update(Ee.gameClient.render.delta)&&0==this.hit.anim.o&&(this.hit.update=!1);let e=(1-this.hit.anim.v)*i*600;var n=Math.cos(this.hit.angle)*e,o=Math.sin(this.hit.angle)*e}else n=0,o=0;let l=Ee.spriteClient.getSprite(r.BREAD_OVEN_INACTIVE.ID,!0),d=h.BREAD_OVEN,g=d.size_offset,c=this.action;if(0!=this.info||0!=c){let e=c[0],t=c[1],i=c[2];if(0!=e[0]&&e[1]>=1&&0!=t[0]&&t[1]>=1&&i[1]<40){l=Ee.spriteClient.getSprite(r.BREAD_OVEN_ACTIVE.ID,!0),d=h.BREAD_OVEN;var m=Math.cos(this.angle-.5*Math.PI),u=Math.sin(this.angle-.5*Math.PI);a.drawImage(l,m+n+-l.width*(.5*g),u+o+-l.height*(.5*g),l.width*g,l.height*g)}else s=!0}else s=!0;s&&a.drawImage(l,n+-l.width*(.5*g),o+-l.height*(.5*g),l.width*g,l.height*g),t.restore(),0==this.info&&0==this.action||(+new Date-this.particleAPI.lastParticle>this.nextParticle&&(this.nextParticle=s?400+Math.floor(4200*Math.random()):600+Math.floor(2600*Math.random()),this.particleAPI.lastParticle=+new Date,this.particleAPI.createNewParticle({x:this.x,y:this.y,isAnimatedSpawn:!0,isAnimatedDispose:!0,speed:.4,radius:{min:15,max:25},colors:s?["#686e6b","#858f89","#98a39d","#59665f","#616362"]:["#c29b1d","#cca423","#bf960f","#c2a442","#a38626"]})),this.particleAPI.updateParticles(t,e,i,a))}function S(e,t,i,a){if(t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this.angle-Math.PI/2),this.hit.update){this.hit.anim.update(Ee.gameClient.render.delta)&&0==this.hit.anim.o&&(this.hit.update=!1);let e=(1-this.hit.anim.v)*i*600;var s=Math.cos(this.hit.angle)*e,n=Math.sin(this.hit.angle)*e}else s=0,n=0;let o=Ee.spriteClient.getSprite(r.CHEST.ID,!0),l=h.CHEST.size_offset;a.drawImage(o,s+-o.width*(.5*l),n+-o.height*(.5*l),o.width*l,o.height*l),t.restore()}function E(e,t,i,a){if(t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this.angle-Math.PI/2),this.hit.update){this.hit.anim.update(Ee.gameClient.render.delta)&&0==this.hit.anim.o&&(this.hit.update=!1);let e=(1-this.hit.anim.v)*i*600;var s=Math.cos(this.hit.angle)*e,n=Math.sin(this.hit.angle)*e}else s=0,n=0;let o=Ee.spriteClient.getSprite(r.WORKBENCH.ID,!0),l=h.WORKBENCH.size_offset;a.drawImage(o,s+-o.width*(.5*l),n+-o.height*(.5*l),o.width*l,o.height*l),t.restore()}function k(e,t,i,a){if(t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this.angle-Math.PI/2),this.hit.update){this.hit.anim.update(Ee.gameClient.render.delta)&&0==this.hit.anim.o&&(this.hit.update=!1);let e=(1-this.hit.anim.v)*i*600;var s=Math.cos(this.hit.angle)*e,n=Math.sin(this.hit.angle)*e}else s=0,n=0;let o=Ee.spriteClient.getSprite(r.PLOT.ID,!0),l=h.PLOT.size_offset;a.drawImage(o,s+-o.width*(.5*l),n+-o.height*(.5*l),o.width*l,o.height*l),t.restore()}function T(e,t,i,a){if(t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this.angle-Math.PI/2),this.hit.update){this.hit.anim.update(Ee.gameClient.render.delta)&&0==this.hit.anim.o&&(this.hit.update=!1);let e=(1-this.hit.anim.v)*i*600;var s=Math.cos(this.hit.angle)*e,n=Math.sin(this.hit.angle)*e}else s=0,n=0;let o=Ee.spriteClient.getSprite(r.TOTEM.ID,!0),l=h.TOTEM.size_offset;a.drawImage(o,s+-o.width*(.5*l),n+-o.height*(.5*l),o.width*l,o.height*l),t.restore()}function O(e,t,i,a){t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this.angle-Math.PI/2);let s=null,n=null;if(this.hit.update){this.hit.anim.update(Ee.gameClient.render.delta)&&0==this.hit.anim.o&&(this.hit.update=!1);let e=(1-this.hit.anim.v)*i*600;var o=Math.cos(this.hit.angle)*e,l=Math.sin(this.hit.angle)*e}else o=0,l=0;switch(this.type){case 15:s=Ee.spriteClient.getSprite(r.SPIKE_WOOD.ID,!0),n=h.SPIKE_WOOD;break;case 16:s=Ee.spriteClient.getSprite(r.SPIKE_STONE.ID,!0),n=h.SPIKE_STONE;break;case 17:s=Ee.spriteClient.getSprite(r.SPIKE_GOLD.ID,!0),n=h.SPIKE_GOLD;break;case 18:s=Ee.spriteClient.getSprite(r.SPIKE_DIAMOND.ID,!0),n=h.SPIKE_DIAMOND;break;case 19:s=Ee.spriteClient.getSprite(r.SPIKE_AMETHYST.ID,!0),n=h.SPIKE_AMETHYST}let d=n.size_offset;if(a.drawImage(s,o+-s.width*(.5*d),l+-s.height*(.5*d),s.width*d,s.height*d),Ee.options.get_value("render","building_health")){let e=this.info,i=n.max_health;i-e>5&&(t.beginPath(),t.globalAlpha=.25,t.strokeStyle="wheat",t.lineWidth=10,t.lineCap="round",t.arc(o,l+-2,s.width*d/4,0,2*Math.PI/(i/(e-i)),!1),t.stroke())}t.restore()}function R(e,t,i,a){t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this.angle-Math.PI/2);let s=null,r=null;if(this.hit.update){this.hit.anim.update(Ee.gameClient.render.delta)&&0==this.hit.anim.o&&(this.hit.update=!1);let e=(1-this.hit.anim.v)*i*600;var n=Math.cos(this.hit.angle)*e,o=Math.sin(this.hit.angle)*e}else n=0,o=0;switch(this.type){case 20:r=h.DOOR_WOOD;break;case 21:r=h.DOOR_STONE;break;case 22:r=h.DOOR_GOLD;break;case 23:r=h.DOOR_DIAMOND;break;case 24:r=h.DOOR_AMETHYST}s=Ee.spriteClient.getSprite(r.objectSpriteId,!0);let l=r.size_offset;if(0==this.action&&(t.globalAlpha=.5),a.drawImage(s,n+-s.width*(.5*l),o+-s.height*(.5*l),s.width*l,s.height*l),Ee.options.get_value("render","building_health")){let e=this.info,i=r.max_health;i-e>5&&(t.beginPath(),t.globalAlpha=.25,t.strokeStyle="wheat",t.lineWidth=10,t.lineCap="round",t.arc(n,o+-2,s.width*l/4,0,2*Math.PI/(i/(e-i)),!1),t.stroke())}t.restore()}function C(e,t,i,a){if(this.hit.update){let e=(1-this.hit.anim.v)*i*600;var s=Math.cos(this.hit.angle)*e,n=Math.sin(this.hit.angle)*e}else s=0,n=0;let o,l;t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this._angle-Math.PI/2);let h=null;o=(h=Ee.spriteClient.getSprite(r.FIRECAMP_GLOW1.ID,!0)).width*this.halo.v,l=h.width*this.halo.v,t.save(),t.globalAlpha=.6,o=(h=Ee.spriteClient.getSprite(r.FIRECAMP_GLOW3.ID,!0)).width*this.halo.v,l=h.height*this.halo.v,a.drawImage(h,s+-.25*o,n+-.25*l,.5*o,.5*l),t.restore(),t.save(),t.globalAlpha=.95,o=(h=Ee.spriteClient.getSprite(r.FIRECAMP_TOP.ID,!0)).width*this.top_anim.v,l=h.width*this.top_anim.v,a.drawImage(h,s+-.225*o,n+-.225*l,.45*o,.45*l),t.restore(),t.restore(),t.save(),Ee.options.get_value("render","fire_particles")&&+new Date-this.particleAPI.lastParticle>this.nextParticle&&(this.nextParticle=200+Math.floor(1300*Math.random()),this.particleAPI.lastParticle=+new Date,this.particleAPI.createNewParticle({x:this.x,y:this.y,isAnimatedSpawn:!0,isAnimatedDispose:!0,radius:{min:15,max:25},colors:["#e7a518","#ea8233","#ea5834","#eac234","#e77218"]})),this.particleAPI.updateParticles(t,e,i,a),t.restore()}function N(e,t,i,a){if(this.hit.update){this.hit.anim.update(Ee.gameClient.render.delta)&&0==this.hit.anim.o&&(this.hit.update=!1);let e=(1-this.hit.anim.v)*i*600;var s,n,o=Math.cos(this.hit.angle)*e,l=Math.sin(this.hit.angle)*e;Ee.options.get_value("render","fire_particles")&&Math.random()>.6&&this.particleAPI.createNewParticle({x:this.x,y:this.y,isAnimatedSpawn:!0,isAnimatedDispose:!0,radius:{min:15,max:25},speed:4,disposeSpeed:2.6,aliveTime:20+Math.floor(100*Math.random()),colors:["#e7a518","#ea8233","#ea5834","#eac234","#e77218"]})}else o=0,l=0;this.halo.update(i),this.top_anim.update(i),t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this._angle-Math.PI/2);let h=null;t.save(),t.globalAlpha=.6,s=(h=Ee.spriteClient.getSprite(r.FIRECAMP_GLOW2.ID,!0)).width*this.halo.v,n=h.width*this.halo.v,a.drawImage(h,o+-.25*s,l+-.25*n,.5*s,.5*n),t.restore(),h=Ee.spriteClient.getSprite(r.FIRECAMP_STICKS.ID,!0),a.drawImage(h,o+-.2875*h.width,l+-.2875*h.height,.575*h.width,.575*h.height),t.restore()}function P(e,t,i,a){if(this.action instanceof Array&&this.action[0][1]>=1){if(this.hit.update){let e=(1-this.hit.anim.v)*i*600;var s=Math.cos(this.hit.angle)*e,n=Math.sin(this.hit.angle)*e}else s=0,n=0;let o,l;t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this._angle-Math.PI/2);let h=null;t.globalAlpha=.6,o=.5*(h=Ee.spriteClient.getSprite(r.FIRECAMP_GLOW3.ID,!0)).width,l=.5*h.height,a.drawImage(h,s+-o/2,n+-l/2,o,l),t.restore(),t.save(),Ee.options.get_value("render","fire_particles")&&+new Date-this.particleAPI.lastParticle>this.nextParticle&&(this.nextParticle=200+Math.floor(1300*Math.random()),this.particleAPI.lastParticle=+new Date,this.particleAPI.createNewParticle({x:this.x,y:this.y,isAnimatedSpawn:!0,isAnimatedDispose:!0,radius:{min:15,max:25},colors:["#e7a518","#ea8233","#ea5834","#eac234","#e77218"]})),this.particleAPI.updateParticles(t,e,i,a),t.restore()}}function L(e,t,i,a){if(t.save(),t.translate(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y),t.rotate(this.angle-Math.PI/2),this.hit.update){this.hit.anim.update(Ee.gameClient.render.delta)&&0==this.hit.anim.o&&(this.hit.update=!1);let e=(1-this.hit.anim.v)*i*600;var s=Math.cos(this.hit.angle)*e,n=Math.sin(this.hit.angle)*e}else s=0,n=0;let o=Ee.spriteClient.getSprite(r.FURNACE_INACTIVE.ID,!0),l=h.FURNACE.size_offset,d=!1;this.action instanceof Array&&this.action[0][1]>=1&&(o=Ee.spriteClient.getSprite(r.FURNACE_ACTIVE.ID,!0),d=!0),a.drawImage(o,s+-o.width*(.5*l),n+-o.height*(.5*l),o.width*l,o.height*l),t.restore(),+new Date-this.particleAPI.lastParticle>this.nextParticle&&(this.nextParticle=d?600+Math.floor(3900*Math.random()):200+Math.floor(1300*Math.random()),this.particleAPI.lastParticle=+new Date,this.particleAPI.createNewParticle({x:this.x,y:this.y,isAnimatedSpawn:!0,isAnimatedDispose:!0,radius:{min:15,max:25},disposeSpeed:.9,speed:.65,colors:d?["#e7a518","#ea8233","#ea5834","#eac234","#e77218"]:["#727272","#868686","#aeaeae"]})),this.particleAPI.updateParticles(t,e,i,a)}D.set(h.BERRY.Id,{take_number:6,extract_item:h.WHEAT_SEED.Id,extract_number:1}),D.set(h.WHEAT.Id,{take_number:1,extract_item:h.FLOUR.Id,extract_number:1});class U{constructor(){}static getDistance(e){return{xDist:Math.sqrt(Math.pow(e.x-Ee.myPlayer.obj.x,2)),yDist:Math.sqrt(Math.pow(e.y-Ee.myPlayer.obj.y,2))}}static distanceSqrt(e,t,i,a){return Math.sqrt((e-i)**2+(t-a)**2)}static difference(e,t){return e-t}static simplifyScore(e){if(null==e||!e||isNaN(e))return 0;if(1e4<=e){let t=Math.max(0,3-(Math.floor(Math.log10(e))-2)),i=Math.floor(e/1e3).toString();if(t){for(i+="."+(e%1e3/1e3).toString().substring(2).substring(0,t),e=i.length-1,t=0;0<e&&"0"==i[e];e--)t++;"."==(i=i.substring(0,i.length-t))[i.length-1]&&(i=i.substring(0,i.length-1))}return i+"k"}if(null==e)return 0;try{return e.toString()}catch(e){console.log("return score Error")}}static uuidv4(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}static seed(e){let t=1779033703,i=3144134277,a=1013904242,s=2773480762;for(let r,n=0;n<e.length;n++)t=i^Math.imul(t^(r=e.charCodeAt(n)),597399067),i=a^Math.imul(i^r,2869860233),a=s^Math.imul(a^r,951274213),s=t^Math.imul(s^r,2716044179);return t=Math.imul(a^t>>>18,597399067),i=Math.imul(s^i>>>22,2869860233),a=Math.imul(t^a>>>17,951274213),s=Math.imul(i^s>>>19,2716044179),[(t^i^a^s)>>>0,(i^t)>>>0,(a^t)>>>0,(s^t)>>>0]}}let W={copy_vector:function(e,t){t.x=e.x,t.y=e.y},get_vector:function(e,t){let i={};return i.x=e.x-t.x,i.y=e.y-t.y,i},mul_vector:function(e,t){e.x*=t,e.y*=t},scalar_product:function(e,t){return e.x*t.x+e.y*t.y},norm:function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},sign:function(e){return e<0?-1:1},cross_product:function(e,t){return e.x*t.y-e.y*t.x},get_std_angle:function(e,t){return this.get_angle({x:1,y:0},this.get_vector(e,t))},dist:function(e,t){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},build_vector:function(e,t){return{x:Math.cos(t)*e,y:Math.sin(t)*e}},add_vector:function(e,t){e.x+=t.x,e.y+=t.y},sub_vector:function(e,t){e.x-=t.x,e.y-=t.y},translate_vector:function(e,t,i){e.x+=t,e.y+=i},translate_new_vector:function(e,t,i){let a={};return a.x=e.x+t,a.y=e.y+i,a},move:function(e,t,i){e.x+=Math.cos(i)*t,e.y+=Math.sin(i)*t},middle:function(e,t){return Math.floor((e-t)/2)},middle_point:function(e,t){let i={};return i.x=(e.x+t.x)/2,i.y=(e.y+t.y)/2,i},rand_sign:function(){return Math.random()>.5?1:-1},get_angle:function(e,t){return Math.acos(this.scalar_product(e,t)/(this.norm(e)*this.norm(t)))*this.sign(this.cross_product(e,t))}};class H{constructor(){this.particles=[],this.lastParticleId=0,this.lastParticle=-1,this.maxId=16384}refreshParticleIds(){this.lastParticleId=0}createNewParticle(e){this.lastParticleId>=this.maxId&&this.refreshParticleIds(),this.lastParticle=+new Date;let t=new B(this,e,++this.lastParticleId);this.particles.push(t)}disposeParticle(e){let t=this.particles.filter((t=>t.Id!=e));this.particles=t}updateParticles(e,t,i,a){let s=+new Date;for(let e=0;e<this.particles.length;e++)this.particles[e].disposeUnit(s);for(let a=0;a<this.particles.length;a++)this.particles[a].renderUpdate(e,t,i,s)}}class B{constructor(e,t,i){this.Id=i,this.Instance=e,this.Settings=t,this.image=this.Settings.image??null,this.x=this.Settings.x??0,this.y=this.Settings.y??0,this.dispose_speed=this.Settings.disposeSpeed??.6,this.dispose_opacity=this.Settings.isAnimatedDispose?new n(!1,1,1,.1,this.dispose_speed,this.dispose_speed):1,this.spawn_opacity=this.Settings.isAnimatedSpawn?new n(!1,1,1,.1,.6,.6):1,this.state=0,this.velocity=this.Settings.velocity??this.getVelocity(),this.spawnTimestamp=+new Date,this.aliveTime=this.Settings.aliveTime??100+Math.floor(1400*Math.random()),this.sizeAnimation=new n(!1,-5,5,-5,2.5,2.5),this.speed=this.Settings.speed??1,this.colors=this.Settings.colors??"#ea8233",this.currentColor=this.colorsOf(),this.radiuses=this.Settings.radius??{min:20,max:60},this.currentRadius=this.radiuses.min+Math.floor(Math.random()*(this.radiuses.max-this.radiuses.min))}colorsOf(){return this.colors instanceof Array?this.colors[Math.floor(Math.random()*this.colors.length)]:this.colors}renderUpdate(e,t,i,a){this.updateUnit(i,a);let s=function(e,t){let i=0,a=0;switch(e){case 1:i-=t;break;case 2:i+=t;break;case 4:a+=t;break;case 5:i-=.71*t,a+=.71*t;break;case 6:i+=.71*t,a+=.71*t;break;case 8:a-=t;break;case 10:i+=.71*t,a-=.71*t;break;case 9:i-=.71*t,a-=.71*t}return[i,a]}(this.velocity,this.speed);this.x+=s[0],this.y+=s[1],e.save(),e.globalAlpha=1==this.state?this.dispose_opacity.v:this.spawn_opacity.v,e.beginPath(),e.fillStyle=this.currentColor,e.arc(this.x+Ee.camera.cam.x,this.y+Ee.camera.cam.y,this.currentRadius+this.sizeAnimation.v,0,2*Math.PI),e.fill(),e.restore()}disposeUnit(e){this.dispose_opacity.v<=.12&&(this.state=2,this.Instance.disposeParticle(this.Id))}updateUnit(e,t){t-this.spawnTimestamp>this.aliveTime&&(this.state=1,this.Settings.isAnimatedDispose&&this.dispose_opacity.update(e)),this.sizeAnimation.update(e)}getVelocity(){let e=1+Math.floor(10*Math.random());return 7!=e&&3!=e||(e=Math.random()>.5?6:8),e}}class G{constructor(e={}){switch(this.type=e.type,this.id=e.id,this.owner=e.owner||null,this.angle=e.angle,this._angle=this.angle,this.x=e.x,this.y=e.y,this.info=e.info,this.right=0,this.stunned=!1,this.lastUpdate=-1,this.r={x:this.x,y:this.y},this.type){case 0:this.action=0,this.text_ease=0,this.text_effect=[],this.text_move=[],this.text=[],this.label=[],this.draw_text=f,this.name_label=null,this.idle=new n(!0,0,2.25,-1.5,3.75,7.5),this.walk=new n(!0,0,7.5,-3,22.5,33.75),this.attack=new n(!1,0,0,-Math.PI/3,6,9),this.render=y,this.right=e.right,this.hat=e.hat,this.hurt={anim:new n(!1,.6,.6,0,5,3)},this.heal={anim:new n(!1,.6,.6,0,5,3)},this.cold={anim:new n(!1,.6,.6,0,5,3)},this.hunger={anim:new n(!1,.6,.6,0,5,3)},this.stun={anim:new n(!1,.6,.6,0,1,.75)},this.update=e=>{W.dist(this.r,e)>Ee.LAG_DISTANCE&&(this.x=e.x,this.y=e.y),this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,16&this.action&&!(16&e.action)&&(e.action=c.calculateAction(512&e.action,2&e.action,4&e.action,8&e.action,!0,32&e.action,64&e.action,128&e.action,256&e.action)),this.action=e.action,this.info=e.info,this.lastUpdate=+new Date};break;case 6:this.particleColors=["#b0a774","#9e9668","#7b7551","#8d865d"],this.wind=new n(!1,0,Math.PI/30,-Math.PI/30,.06,.06);case 5:this.particleAPI=new H,5==this.type&&(this.particleColors=["#077b49","#066f42","#06623a"]),this.hit={anim:new n(!1,1,1,0,10,10),update:!0,angle:0},this.ground=new n(!1,.9,1.05,.9,.2,.2),this.itemsIn=e.itemsIn??0,this.age=e.age??0,this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.age=e.age,this.itemsIn=e.itemsIn,this.lastUpdate=+new Date},this.render=this.getRenderFrom();break;case 3:case 2:case 1:this.action=0,this.move_anim=new n(!0,0,1,-1,1.5,1.5),this.hurt={animation:new n(!0,0,.7,0,5,5),timestamp:-1,isUpdate:!1},this.render=this.getRenderFrom(),this.update=e=>{W.dist(this.r,e)>Ee.LAG_DISTANCE&&(this.x=e.x,this.y=e.y),this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.action=e.action,this.info=e.info,this.lastUpdate=+new Date};break;case 7:this.action=0,this.hurt={anim:new n(!1,.6,.6,0,5,3)},this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,16&this.action&&!(16&e.action)&&(e.action=c.calculateAction(512&e.action,2&e.action,4&e.action,8&e.action,!0,32&e.action,64&e.action,128&e.action,256&e.action)),this.action=e.action,512&this.action&&c.disposeEntity(this,this.type),this.lastUpdate=+new Date},this.render=A;break;case 8:this.hit={anim:new n(!1,1,1,0,10,10),update:!0,angle:0},this.nextParticle=200+Math.floor(1300*Math.random()),this.particleAPI=new H,this.halo=new n(!1,1,1.23,1.18,.02,.02),this.top_anim=new n(!1,1,1.03,.98,.18,.18),this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.info=e.info,this.lastUpdate=+new Date},this.renderDown=N,this.renderUp=C;break;case 10:case 11:case 12:case 13:case 14:this.hit={anim:new n(!1,1,1,0,10,10),update:!0,angle:0},this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.action=e.action,this.info=e.info,this.lastUpdate=+new Date},this.render=v;break;case 15:case 16:case 17:case 18:case 19:this.hit={anim:new n(!1,1,1,0,10,10),update:!0,angle:0},this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.action=e.action,this.info=e.info,this.lastUpdate=+new Date},this.render=O;break;case 20:case 21:case 22:case 23:case 24:this.hit={anim:new n(!1,1,1,0,10,10),update:!0,angle:0},this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.action=e.action,this.info=e.info,this.lastUpdate=+new Date},this.render=R;break;case 30:this.hit={anim:new n(!1,1,1,0,10,10),update:!0,angle:0},this.info=0,this.action=0,this.nextParticle=200+Math.floor(1300*Math.random()),this.particleAPI=new H,this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.action=e.action,this.info=e.info,this.lastUpdate=+new Date},this.render=M;break;case 31:this.hit={anim:new n(!1,1,1,0,10,10),update:!0,angle:0},this.info=0,this.action=0,this.nextParticle=200+Math.floor(1300*Math.random()),this.particleAPI=new H,this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.action=e.action,this.info=e.info,this.lastUpdate=+new Date},this.render=x;break;case 34:this.hit={anim:new n(!1,1,1,0,10,10),update:!0,angle:0},this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.lastUpdate=+new Date},this.render=E;break;case 32:this.hit={anim:new n(!1,1,1,0,10,10),update:!0,angle:0},this.particleAPI=new H,this.nextParticle=200+Math.floor(1300*Math.random()),this.halo=new n(!1,1,1.23,1.18,.02,.02),this.top_anim=new n(!1,1,1.03,.98,.18,.18),this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.action=e.action,this.lastUpdate=+new Date},this.renderDown=L,this.renderUp=P;break;case 33:this.hit={anim:new n(!1,1,1,0,10,10),update:!0,angle:0},this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.action=e.action,this.lastUpdate=+new Date},this.render=S;break;case 4:this.hit={anim:new n(!1,1,1,0,10,10),update:!0,angle:0},this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.lastUpdate=+new Date},this.render=k;break;case 35:this.hit={anim:new n(!1,1,1,0,10,10),update:!0,angle:0},this.update=e=>{this.r.x=e.x,this.r.y=e.y,this.angle=e.angle,this.totem_data=e.action,this.lastUpdate=+new Date},this.render=T}}getRenderFrom(){switch(this.type){case 3:return b;case 2:return I;case 1:return _;case 5:case 6:return w}}}class Y{constructor(e=h.AIR.Id,t=0){this.item=e,this.count=t}clear(){this.item=h.AIR.Id,this.count=0}setItem(e){this.item=e<h.AIR.Id?h.AIR.Id:e}setCount(e){this.count=e<0?0:e}}class j{constructor(e=14){this.slots=[];for(let t=0;t<e;t++)this.slots.push(new Y)}_getSlot(e){return this.slots.find((t=>t.item==e))}getCount(e){let t=this._getSlot(e);return t?t.count:0}newSlot(){this.slots.push(new Y)}hasItem(e){return 0!=this.getCount(e)}addItem(e,t=1){if(e==h.AIR.Id)return;let i=this._getSlot(e),a=this.slots.map((e=>e.item==h.AIR.Id?null:e.item));if(i){let i=a.indexOf(e);this.slots[i].count+=t}else{let i=a.indexOf(null);this.slots[i].item=e,this.slots[i].count=t}}removeItem(e,t=1){if(e==h.AIR.Id)return;let i=this._getSlot(e);i&&(i.count-=t,i.count<1&&i.clear())}setItem(e,t){if(e==h.AIR.Id)return;let i=this._getSlot(e),a=this.slots.map((e=>e.item==h.AIR.Id?null:e.item));if(i){let i=a.indexOf(e);this.slots[i].count=t}else{let i=a.indexOf(null);this.slots[i].item=e,this.slots[i].count=t}}fromJson(e){e.forEach(((e,t)=>{let i=Ee.inventory.slots.find((t=>t.item==e.item));if(!i)return this.slots[t].item=e.item,this.slots[t].count=e.count;i.count=e.count}))}size(){return this.slots.filter((e=>e.item!=h.AIR.Id)).length}forEach(e){for(let t=0;t<this.slots.length;t++)e(this.slots[t],t)}}function F(){this.set_azerty=function(){this.LEFT=81,this.RIGHT=68,this.TOP=90,this.DOWN=83},this.set_qwerty=function(){this.LEFT=65,this.RIGHT=68,this.TOP=87,this.BOTTOM=83},this.UP=0,this.DOWN=1,this._1=49,this._2=50,this._3=51,this._4=52,this._5=53,this._6=54,this._7=55,this._8=56,this._9=57,this._0=48,this.CTRL=17,this.ARROW_LEFT=37,this.ARROW_RIGHT=39,this.ARROW_TOP=38,this.ARROW_BOTTOM=40,this.SPACE=32,this.R=82,this.G=71,this.V=86,this.M=77,this.E=69,this.B=66,this.O=79,this.SHIFT=16,this.ESC=27,this.ENTER=13,this.set_qwerty(),this.keys=Array(255);for(var e=0;e<255;e++)this.keys[e]=this.UP;this.up=function(e){var t=Math.min(e.charCode||e.keyCode,255);this.keys[t]=this.UP},this.down=function(e){var t=Math.min(e.charCode||e.keyCode,255);return t==this.LEFT||t==this.ARROW_LEFT?this.press_left():t==this.TOP||t==this.ARROW_TOP?this.press_top():t==this.DOWN||t==this.ARROW_DOWN?this.press_bottom():t!=this.RIGHT&&t!=this.ARROW_RIGHT||this.press_right(),this.keys[t]=this.DOWN,t},this.press_left=function(){this.keys[this.RIGHT]=this.UP,this.keys[this.ARROW_RIGHT]=this.UP},this.press_right=function(){this.keys[this.LEFT]=this.UP,this.keys[this.ARROW_LEFT]=this.UP},this.press_bottom=function(){this.keys[this.TOP]=this.UP,this.keys[this.ARROW_TOP]=this.UP},this.press_top=function(){this.keys[this.BOTTOM]=this.UP,this.keys[this.ARROW_BOTTOM]=this.UP},this.clear_directionnal=function(){this.keys[this.RIGHT]=this.UP,this.keys[this.ARROW_RIGHT]=this.UP,this.keys[this.LEFT]=this.UP,this.keys[this.ARROW_LEFT]=this.UP,this.keys[this.TOP]=this.UP,this.keys[this.ARROW_TOP]=this.UP,this.keys[this.BOTTOM]=this.UP,this.keys[this.ARROW_BOTTOM]=this.UP},this.is_left=function(){return this.keys[this.LEFT]||this.keys[this.ARROW_LEFT]},this.is_right=function(){return this.keys[this.RIGHT]||this.keys[this.ARROW_RIGHT]},this.is_top=function(){return this.keys[this.TOP]||this.keys[this.ARROW_TOP]},this.is_bottom=function(){return this.keys[this.BOTTOM]||this.keys[this.ARROW_BOTTOM]},this.is_ctrl=function(){return this.keys[this.CTRL]},this.is_1=function(){return this.keys[this._1]},this.is_2=function(){return this.keys[this._2]},this.is_3=function(){return this.keys[this._3]},this.is_4=function(){return this.keys[this._4]},this.is_5=function(){return this.keys[this._5]},this.is_6=function(){return this.keys[this._6]},this.is_7=function(){return this.keys[this._7]},this.is_8=function(){return this.keys[this._8]},this.is_9=function(){return this.keys[this._9]},this.is_0=function(){return this.keys[this._0]},this.is_space=function(){return this.keys[this.SPACE]},this.is_r=function(){return this.keys[this.R]},this.is_m=function(){return this.keys[this.M]},this.is_e=function(){return this.keys[this.E]},this.is_esc=function(){return this.keys[this.ESC]},this.is_g=function(){return this.keys[this.G]},this.is_v=function(){return this.keys[this.V]},this.is_b=function(){return this.keys[this.B]},this.is_o=function(){return this.keys[this.O]},this.is_shift=function(){return this.keys[this.SHIFT]},this.is_enter=function(){return this.keys[this.ENTER]}}class K{static onServerWait(){+new Date-Ee.menu.server.timestamp>6500&&(Ee.menu.server.waiting=!1,Ee.menu.server.timestamp=-1,Ee.ServerMessageManager.onMessage("Cannot join the server, try reload page!"))}static on_failed(e){Ee.menu.server.waiting=!1,Ee.menu.server.timestamp=-1,Ee.ServerMessageManager.onMessage(e)}}class J{constructor(e,t,i,a,s,r){this.type=e,this.x=t,this.y=i,this.size=a,this.sizeMultipler=r,this.render={x:this.x,y:this.y},this.hit={anim:new n(!0,0,1,-1,20,20),update:!0,angle:0},this.id=s,this.info=0,this.type.includes("berry")&&(this.ground=new n(!1,.9,1.05,.9,.2,.2))}draw_berries(e,t,i,a,s,n){this.ground.update(i),t.save();let o=[];switch(this.info){case 9:o.push([-40,50.1]);case 8:o.push([-17.5,55.7]);case 7:o.push([-25.3,32.1]);case 6:o.push([30.9,16.3]);case 5:o.push([34.3,-7.3]);case 4:o.push([54.6,7.3]);case 3:o.push([-18.6,-37.7]);case 2:o.push([2.8,-49]);case 1:o.push([-13,-65.9])}let l=Ee.spriteClient.getSprite(r.BERRY_SMALL.ID,!0);var h=1*l.width*this.ground.v,d=1*l.height*this.ground.v;for(let e=0;e<o.length;e++){let t=o[e][0],i=o[e][1];a.drawImage(l,s+-h/2+t,n+-d/2+i,h,d)}t.restore()}}class V{constructor(){this.objects=[],this.width=1e4,this.height=1e4,this.cycle={isNight:!1,time:0},this.particleAPI=new H,this.decorations=[["flower4",2370,639],["flower2",1615,580],["flower6",7410,2813],["flower7",2215,1729],["flower4",306,5663],["flower6",4769,8382],["flower6",6935,4110],["flower7",7309,7580],["flower5",9467,8872],["flower2",337,3263],["flower1",2613,479],["flower1",2451,6067],["flower5",2704,1419],["flower5",3577,2145],["flower7",6021,1091],["flower2",2073,9096],["flower6",5104,6800],["flower7",9334,9469],["flower2",9398,3732],["flower2",1102,3222],["flower4",259,6334],["flower2",6984,8452],["flower2",3159,9450],["flower7",5477,4193],["flower3",2861,5394],["flower2",6291,5419],["flower6",6908,4905],["flower3",4617,9153],["flower1",1814,3521],["flower2",9804,4004],["flower2",1031,9137],["flower6",8416,2688],["flower6",2914,1751],["flower1",2386,6740],["flower4",9627,7127],["flower7",3807,8774],["flower1",9145,9924],["flower6",2819,3622],["flower2",9847,724],["flower6",4654,5994],["flower2",117,2373],["flower1",133,9711],["flower6",447,434],["flower1",630,4758],["flower1",4630,1563],["flower4",8540,8697],["flower3",6974,3113],["flower3",2210,122],["flower1",8798,6273],["flower3",9453,752],["flower1",7693,954],["flower7",3452,1933],["flower6",1601,1855],["flower3",6677,604],["flower3",6141,7854],["flower1",1051,9822],["flower4",1999,8634],["flower5",4976,5050],["flower7",359,6023],["flower3",2044,9560],["flower2",4775,4e3],["flower3",6982,1232],["flower3",8726,1115],["flower5",6902,8880],["flower3",7149,1930],["flower7",1898,3665],["flower7",2042,7228],["flower5",7639,9988],["flower3",2789,5178],["flower6",1777,7099],["flower7",1326,9543],["flower2",7585,7934],["flower3",5564,825],["flower6",5651,4672],["flower4",4963,5002],["flower2",2816,2318],["flower3",5939,5733],["flower3",7631,6931],["flower3",9723,3774],["flower6",4522,8473],["flower3",2514,1998],["flower4",5945,3191],["flower6",121,1442],["flower1",2738,8037],["flower1",3582,2671],["flower6",3388,3485],["flower5",1051,9382],["flower3",7178,7105],["flower4",9926,3338],["flower3",2016,5059],["flower3",1983,5292],["flower3",3019,8103],["flower4",9489,3743],["flower3",3957,8656],["flower6",8065,4836],["flower1",5896,2735],["flower6",6831,9476],["flower1",6788,3680],["flower3",8365,8923],["flower6",7533,7162],["flower6",2622,3809],["flower1",3752,90],["flower7",9052,8116],["flower2",3212,2594],["flower2",8503,7129],["flower4",6232,4271],["flower6",2266,4378],["flower5",7768,9016],["flower5",5266,2889],["flower6",3769,1865],["flower3",7685,3481],["flower4",6143,7900],["flower3",7659,6025],["flower4",6330,3121],["flower6",4135,1132],["flower7",5956,6547],["flower3",9445,1999],["flower2",5035,8745],["flower1",335,939],["flower5",1363,5360],["flower2",5538,9064],["flower4",7298,6038],["flower4",9966,1923],["flower6",3379,1290],["flower3",8742,4446],["flower5",9936,9269],["flower7",5553,916],["flower6",1906,9510],["flower6",1032,4966],["flower1",9157,6388],["flower4",3083,3648],["flower1",1567,5800],["flower1",7470,612],["flower1",7783,4991],["flower3",3895,3244],["flower7",3099,9736],["flower1",6938,213],["flower6",3353,951],["flower4",7342,6653],["flower3",6650,2318],["flower4",354,1359],["flower3",161,8268],["flower4",397,7104],["flower5",8018,2635],["flower3",4297,5157],["flower7",1494,4078],["flower6",5296,2150],["flower2",8707,7570],["flower5",3339,6633],["flower1",2108,3621],["flower2",3993,430],["flower2",703,3103],["flower5",6807,7735],["flower6",5421,8206],["flower6",1185,1301],["flower2",1535,9308],["flower3",4303,4568],["flower3",8258,3694],["flower4",7578,6161],["flower5",7748,4383],["flower6",5451,2491],["flower2",8329,6429],["flower5",3539,4079],["flower2",5628,5157],["flower1",4587,8838],["flower2",3108,7317],["flower5",6800,8659],["flower2",4875,9873],["flower2",4547,5142],["flower6",8209,6706],["flower4",2619,6213],["flower5",3925,5550],["flower1",8342,5815],["flower6",7747,7256],["flower4",1012,6382],["flower5",9210,7909],["flower4",4636,9844],["flower5",374,2560],["flower3",2486,4108],["flower7",1327,9754],["flower7",2768,5789],["flower5",7954,5601],["flower5",7976,3838],["flower2",7681,6129],["flower5",5369,4084],["flower5",2050,3791],["flower1",1846,9433],["flower3",1019,6508],["flower7",1186,1535],["flower7",6396,7608],["flower2",8166,2342],["flower7",3416,280],["flower6",167,35],["flower1",1136,9507],["flower3",3248,3089],["flower4",5319,4402],["flower1",5631,3031],["flower4",8289,4187],["flower7",2664,2631],["flower2",5676,4140],["flower4",1429,8826],["flower7",9346,1392],["flower4",3298,6305],["flower6",1433,1301],["flower6",2184,4387],["flower3",9762,1710],["flower2",7844,4440],["flower5",2418,2201],["flower4",1875,4242],["flower6",7828,29],["flower5",6662,458],["flower2",6346,1486],["flower3",1038,5154],["flower4",2370,6312],["flower5",7817,5402],["flower1",7829,7415],["flower1",8425,7753],["flower3",4508,4831],["flower5",5266,8995],["flower3",387,1521],["flower2",5194,5434],["flower2",9181,7651],["flower7",4647,5048],["flower7",6831,9667],["flower3",9851,1484],["flower1",3992,7552],["flower5",6620,2595],["flower6",9544,1582],["flower4",2616,4355],["flower6",2713,5403],["flower4",1263,555],["flower7",1026,7541],["flower5",2020,4421],["flower3",2976,9709],["flower3",6989,1245],["flower3",1651,7405],["flower2",8640,364],["flower1",8912,1967],["flower6",8011,1396],["flower5",6746,4663],["flower5",5468,386],["flower6",1955,7644],["flower2",8318,6971],["flower1",2325,3841],["flower1",450,4268],["flower5",5652,1575],["flower3",8609,3755],["flower6",288,7234],["flower3",1185,8046],["flower1",8056,1598],["flower6",1326,2923],["flower5",372,5361],["flower5",5985,9452],["flower3",5796,7049],["flower2",8075,7937],["flower5",8325,2441],["flower1",9799,5534],["flower3",3431,156],["flower1",7700,9479],["flower4",9600,293],["flower3",5818,6482],["flower2",7467,7543],["flower1",9643,320],["flower4",7637,2097],["flower1",5492,5012],["flower6",3153,4564],["flower1",9664,9475],["flower7",2438,7602],["flower2",8333,7429],["flower5",8045,7341],["flower6",6724,6626],["flower6",2441,6966],["flower2",433,5659],["flower2",5737,7258],["flower5",1224,7450],["flower6",5626,3138],["flower6",9098,9990],["flower3",1569,7837],["flower2",4528,8606],["flower7",6406,4559],["flower5",2556,3997],["flower5",2856,8324],["flower5",2955,5725],["flower6",387,3445],["flower6",4203,3770],["flower5",1226,9762],["flower6",7186,4492],["flower1",5967,1400],["flower4",7226,6142],["flower5",1367,5595],["flower3",9490,4399],["flower2",3277,6765],["flower6",4141,2452],["flower6",7040,5646],["flower3",7919,8455],["flower3",3015,4008],["flower6",1897,5976],["flower2",6355,5560],["flower7",104,3073],["flower5",4035,3257],["flower1",8082,220],["grass3",3299,7622],["grass5",2300,2893],["grass4",9036,550],["grass5",3779,1919],["grass2",5484,1667],["grass3",6045,2655],["grass1",4471,7692],["grass2",441,8094],["grass1",725,4110],["grass3",3152,8819],["grass1",6931,4286],["grass5",3094,3904],["grass6",4750,6138],["grass2",1522,5648],["grass6",7594,7079],["grass3",5382,8902],["grass2",4287,2792],["grass3",9119,5257],["grass3",3177,9270],["grass1",4587,6382],["grass6",41,6927],["grass2",1767,3418],["grass3",9512,3843],["grass3",3728,819],["grass4",7318,5136],["grass6",3556,144],["grass3",7349,1437],["grass4",4722,3141],["grass2",3158,1739],["grass6",6463,8189],["grass3",2682,5723],["grass4",6345,7078],["grass6",2265,421],["grass4",2415,6508],["grass4",4152,1446],["grass1",6213,4810],["grass1",9815,2116],["grass2",8312,8826],["grass6",3060,1868],["grass2",6611,2046],["grass2",886,6744],["grass2",9070,1376],["grass2",1150,3794],["grass6",6821,2458],["grass5",3465,6496],["grass5",330,8609],["grass2",5236,4860],["grass2",8733,4816],["grass6",528,1138],["grass2",9139,1952],["grass5",5951,4165],["grass1",3057,1522],["grass5",297,5416],["grass6",5494,1487],["grass3",9901,7030],["grass3",274,5653],["grass5",1074,9157],["grass2",6632,8993],["grass4",8655,4483],["grass3",8750,8712],["grass4",5482,9564],["grass1",2065,2891],["grass2",8055,3661],["grass5",2708,416],["grass4",2114,1371],["grass1",9188,5908],["grass5",7260,1146],["grass4",6630,631],["grass5",7110,6732],["grass3",6364,5237],["grass5",6160,9631],["grass3",7106,4963],["grass6",3277,639],["grass4",4393,2838],["grass4",8555,1120],["grass2",4135,6334],["grass5",5297,9026],["grass3",4173,7417],["grass5",6290,4448],["grass6",5933,4060],["grass6",2347,5965],["grass1",3050,6679],["grass4",9244,8190],["grass1",1494,1823],["grass3",2256,9589],["grass2",6116,8834],["grass3",6749,4749],["grass4",2596,4440],["grass3",4378,736],["grass1",3838,7581],["grass1",6810,3017],["grass2",474,4122],["grass6",1356,4546],["grass3",9878,7877],["grass5",4891,3486],["grass6",9135,6269],["grass2",2791,7893],["grass5",4070,5620],["grass5",8344,338],["grass2",7198,9698],["grass5",6986,9747],["grass2",1124,9015],["grass4",643,2631],["grass5",9497,5673],["grass4",4421,932],["grass5",3511,7648],["grass2",1566,8676],["grass1",2706,2040],["grass2",4533,1143],["grass2",1959,4867],["grass4",9270,1464],["grass2",4060,3368],["grass6",9838,1659],["grass1",4789,9198],["grass6",2626,460],["grass2",3962,807],["grass3",9186,4132],["grass2",498,6557],["grass6",8020,6234],["grass6",6640,4296],["grass3",9180,1070],["grass2",3410,8761],["grass3",5906,5403],["grass5",491,1093],["grass1",4530,8942],["grass6",4508,3983],["grass6",3807,1197],["grass1",3635,9429],["grass1",4764,6029],["grass1",6636,9666],["grass1",9565,8104],["grass5",2650,2080],["grass3",2109,6365],["grass1",6141,3373],["grass1",3635,6476],["grass3",6782,4543],["grass6",8729,6463],["grass4",4396,5238],["grass1",19,4850],["grass3",5639,4629],["grass3",1511,8610],["grass5",7296,664],["grass1",8354,2636],["grass1",5863,7444],["grass6",352,4285],["grass4",2784,9109],["grass4",6260,2519],["grass2",5842,9689],["grass5",8722,2451],["grass1",3266,2606],["grass6",2420,1829],["grass3",1134,681],["grass5",9141,4128],["grass5",5134,8903],["grass2",5188,6850],["grass2",1866,5119],["grass1",1638,9507],["grass4",5795,6534],["grass6",6565,5609],["grass6",6712,6262],["grass5",4549,3681],["grass3",4065,3115],["grass1",8205,6659],["grass3",6194,6365],["grass4",329,9963],["grass3",8800,5869],["grass5",6681,7614],["grass1",955,6714],["grass3",3588,6729],["grass4",7972,8515],["grass1",1437,9364],["grass3",4046,9353],["grass2",932,6690],["grass6",6110,2467],["grass2",7104,9070],["grass5",3799,7322],["grass6",7305,3300],["grass5",5038,6189],["grass4",3934,7633],["grass3",3420,863],["grass1",4830,8203],["grass6",65,2121],["grass5",5527,9237],["grass6",5362,7428],["grass6",8886,9213],["grass3",4494,6762],["grass5",3286,4020],["grass6",4904,8893],["grass4",3664,1297],["grass2",6357,4220],["grass6",3606,8495],["grass1",1797,4719],["grass1",9229,6901],["grass5",9547,3599],["grass1",332,9892],["grass2",6572,103],["grass2",5569,5421],["grass1",2288,1899],["grass3",2466,794],["grass3",8770,9471],["grass6",6583,9973],["grass1",4540,449],["grass4",1387,6747],["grass1",7741,7335],["grass2",78,3402],["grass3",423,1801],["grass6",7559,6092],["grass6",1835,3145],["grass6",1335,6693],["grass6",1007,4287],["grass1",2498,4700],["grass6",2580,1389],["grass5",5861,1112],["grass3",1603,8428],["grass3",255,4729],["grass5",6130,2581],["grass6",8358,2527],["grass6",6759,2490],["grass4",2717,2938],["grass5",4314,2346],["grass1",816,2030],["grass4",9232,3383],["grass6",4326,3485],["grass5",6500,9642],["grass1",1913,87],["grass5",5504,7741],["grass6",25,5647],["grass3",6404,9514],["grass4",1122,3803],["grass2",7806,2154],["grass4",7457,478],["grass5",2732,9800],["grass3",7556,3636],["grass5",2041,7439],["grass3",7739,2133],["grass3",7482,7946],["grass1",9531,6301],["grass4",2119,2040],["grass3",975,7916],["grass4",5019,5324],["grass3",4029,8242],["grass6",1734,4021],["grass1",6086,8098],["grass3",7533,5609],["grass1",8758,2754],["grass5",259,1251],["grass3",2767,8096],["grass4",3156,8633],["grass6",970,6400],["grass6",3642,7395],["grass1",3628,2404],["grass1",7934,4155],["grass2",3498,5462],["grass6",8614,5906],["grass3",1040,7624],["grass2",3760,8728],["grass5",9685,5589],["grass2",3976,6077],["grass1",2429,9720],["grass4",9923,2513],["grass2",3826,8938],["grass2",4247,8087],["grass6",347,3528],["grass4",4332,1770],["grass5",6166,6431],["grass1",9231,425],["grass4",3833,5627],["grass2",2875,548],["grass1",8110,6991],["grass4",9150,6772],["grass3",8837,9490],["grass6",8428,4505],["grass2",981,8620],["grass1",6225,8905],["grass1",5404,9506],["grass1",7999,948],["grass5",5209,4303],["grass3",8654,7734],["grass3",1138,9398],["grass4",5908,1905],["grass5",1682,3832],["grass6",7690,3359],["grass6",6180,836],["grass4",8385,3399],["grass5",5951,7459],["grass6",6003,9101],["grass4",5452,6357],["grass4",435,2344],["grass2",6256,553],["grass5",2126,7366],["grass4",1290,1651],["grass2",3179,935],["grass5",3481,3250],["grass1",9416,7708],["grass6",6618,5201],["grass6",6408,5291],["grass4",445,6638],["grass3",9838,8177],["grass1",3811,4635],["grass2",8181,4026],["grass1",2714,2464],["grass1",1174,8025],["grass4",4368,3242],["grass3",2042,121],["grass6",938,9862],["grass6",769,512],["grass2",9784,6267],["grass4",7278,9182],["grass6",6449,7969],["grass4",3896,9527],["grass5",996,4105],["grass2",1972,3044],["grass4",2838,2442],["grass6",6290,1777],["grass5",2292,3281],["grass6",4729,6668],["grass2",8417,768],["grass1",1098,5391],["grass5",8646,9125],["grass2",9988,4507],["grass6",4285,7015],["grass1",7780,7838],["grass2",8732,7878],["grass3",7316,2213],["grass4",9974,3242],["grass1",915,7652],["grass2",6190,6208],["grass2",6396,9886],["grass4",2529,74],["grass1",9521,3003],["grass5",6945,2471],["grass4",747,110],["grass5",12,788],["grass3",2673,8178],["grass5",9932,7438],["grass3",9406,8256],["grass5",2361,1315],["grass5",7408,562],["grass3",9909,3132],["grass6",9823,3125],["grass6",8795,9105],["grass6",6073,5391],["grass5",9032,8512],["grass4",7426,777],["grass2",6312,6294],["grass3",6435,7812],["grass2",2883,732],["grass5",8258,6649],["grass4",9463,3335],["grass2",8549,7799],["grass5",8324,5625],["grass5",84,6689],["grass6",5920,6629],["grass1",3038,5493],["grass3",9476,2007],["grass2",9955,9070],["grass1",8831,7758],["grass5",1384,8746],["grass5",2961,9143],["grass3",8482,2710],["grass2",2757,6678],["grass6",6513,1561],["grass1",48,4244],["grass1",4764,1741],["grass6",4703,1865],["grass3",7231,3393],["grass6",1919,7176],["grass2",7901,7355],["grass3",8234,191],["grass3",4529,8522],["grass2",5068,3890],["grass1",3130,9842],["grass3",3528,278],["grass1",4396,7957],["grass1",471,4152],["grass6",1140,7422],["grass5",8707,9286],["grass6",9759,8373],["grass2",2642,3075],["grass6",4875,3415],["grass4",943,392],["grass2",7244,1756],["grass3",8559,8093],["grass2",3618,5821],["grass1",3833,784],["grass5",5100,6845],["grass6",2503,5941],["grass6",9875,4985],["grass4",2594,7502],["grass6",7946,3029],["grass2",3817,3509],["grass2",1303,6020],["grass6",3493,677],["grass2",3314,7550],["grass6",8323,5332],["grass4",9487,1584],["grass5",1475,9075],["grass6",7550,6929],["grass3",2081,4937],["grass3",213,7564],["grass3",1609,2996],["grass6",5348,7933],["grass2",742,5123],["grass4",9266,4995],["grass1",2469,4844],["grass1",4162,6800],["grass5",1520,7653],["grass3",7739,514],["grass3",2671,7731],["grass3",249,3473],["grass5",4464,3055],["grass3",730,2510],["grass4",2688,7162],["grass6",7402,6431],["grass2",1298,9559],["grass4",7798,8710],["grass1",6320,5224],["grass4",5752,5822],["grass1",6367,4612],["grass6",2063,7220],["grass3",8610,9180],["grass2",439,9877],["grass4",3364,6868],["grass2",8894,5604],["grass3",2061,2682],["grass1",1677,7076],["grass4",1359,1045],["grass1",1281,4769],["grass5",3516,547],["grass5",7075,3413],["grass2",2623,4597],["grass4",8347,906],["grass4",149,8501],["grass5",5443,6701],["grass1",9498,8043],["grass5",2851,6580],["grass3",2329,2562],["grass1",531,4838],["grass2",2086,6466],["grass4",7652,5316],["grass1",1775,4153],["grass1",4585,44],["grass3",1998,1808],["grass2",5503,6895],["grass6",848,7692],["grass2",7191,1448],["grass1",169,4691],["grass3",9376,2665],["grass3",6296,8834],["grass5",4767,2974],["grass2",6259,2064],["grass1",3517,1282],["grass3",3373,8616],["grass6",3805,759],["grass1",8559,6735],["grass1",9158,1120],["grass4",1337,2197],["grass1",2004,1979],["grass4",2888,1440],["grass4",7090,2181],["grass3",7473,9989],["grass6",7716,6057],["grass1",5833,2882],["grass6",9209,6578],["grass3",3512,61],["grass1",6742,5348],["grass2",4971,5586],["grass4",6199,5768],["grass6",6561,1769],["grass3",3195,8224],["grass3",7980,8385],["grass6",7101,4207],["grass6",9509,7105],["grass3",4051,5770],["grass2",7661,5076],["grass1",3440,8955],["grass3",3244,1031],["grass2",180,464],["grass4",4899,3190],["grass6",9425,54],["grass1",5838,700],["grass3",6705,9733],["grass6",8683,7031],["grass1",2439,4983],["grass1",2251,2542],["grass4",8439,3447],["grass1",2836,9629],["grass4",5294,9412],["grass3",5012,6642],["grass4",9992,950],["grass3",1351,5763],["grass3",9576,3776],["grass1",7693,4173],["grass1",8225,4248],["grass2",4164,2284],["grass4",7203,1849],["grass1",7172,5321],["grass2",7955,2201],["grass3",6837,7777]],this.addableOffset=5,this.biomes=[]}setWorldBorder(e,t){this.width=e,this.height=t}setWorld(e){this.setWorldBorder(e.width,e.height),this.biomes=e.biomes;for(let t=0;t<e.objects.length;t++){let i=e.objects[t],a=new J(i[0],i[1],i[2],i[3],i[4]);this.objects.push(a)}}renderWeather(e,t,i,a){}renderWorldObjects(e,t,i,a){let s=[];for(let e=0;e<this.objects.length;e++){let t=this.objects[e],i=U.getDistance({x:t.x,y:t.y});i.xDist<=Math.min(2560,window.innerWidth)&&i.yDist<=Math.min(1440,window.innerHeight)&&s.push(t)}for(let l=0;l<s.length;l++){let h=s[l],d=0,g=0,c=80;if(t.save(),h.hit.update){h.hit.anim.update(Ee.gameClient.render.delta)&&0==h.hit.anim.o&&(h.hit.update=!1);let e=(1-h.hit.anim.v)*i*600;var n=Math.cos(h.hit.angle)*e,o=Math.sin(h.hit.angle)*e}else n=0,o=0;t.translate(h.x+Ee.camera.cam.x,h.y+Ee.camera.cam.y);let m=Ee.spriteClient.getSprite(r[h.type.toUpperCase()].ID,0==this.cycle.isNight),{sizeAW:u,sizeAH:p}=.42;if(null!=m){switch(h.type.replace(/[0-9]/g,"")){case"tree":d=window.treex??1,g=window.treey??6,c=h.sizeAmplifier=1,u=.42,p=.42;break;case"stone":u=.4,p=.4,d=window.stonex??4,g=window.stoney??4,c=80-h.size;break;case"gold":u=.36,p=.36,d=window.stonex??1,g=window.stoney??5;break;case"diamond":u=.36,p=.36;break;case"amethyst":u=.345,p=.345;break;case"berry":u=1,p=1}a.drawImage(m,.5*n+(-m.width*(u/2)+d),.5*o+(-m.height*(p/2)+g),m.width*u,m.height*p),0!=this.info&&h.type.includes("berry")&&h.draw_berries(e,t,i,a,n,o),t.restore()}}}clearWorld(){for(let e=0;e<this.objects.length;e++)this.objects=[]}update(){this.move_units(Ee.gameClient.entities[0]),this.move_units(Ee.gameClient.entities[1]),this.move_units(Ee.gameClient.entities[2]),this.move_units(Ee.gameClient.entities[3])}move_units(e,t){for(let t=0;t<e.length;t++){let i=e[t];if(i.x!=i.r.x||i.y!=i.r.y){64&i.action&&(i.action-=64);let e=W.get_std_angle(i,i.r)+Math.PI,t=Ee.gameClient.render.delta*(i.info-.5),a=W.build_vector(t,e);W.norm(a)<W.norm(W.get_vector(i,i.r))?W.add_vector(i,a):(32&i.action&&(i.action-=32),W.copy_vector(i.r,i)),W.dist(i,i.r)>Ee.LAG_DISTANCE&&(i.x=i.r.x,i.y=i.r.y)}}}}let z=0,X={};X.SOCIAL_DISCORD_BUTTON_IN=z++,X.SOCIAL_DISCORD_BUTTON_OUT=z++,X.SOCIAL_YOUTUBE_BUTTON_IN=z++,X.SOCIAL_YOUTUBE_BUTTON_OUT=z++,X.PLAY_BUTTON_IN=z++,X.PLAY_BUTTON_OUT=z++,X.SERVERS_SELECT_BUTTON_IN=z++,X.SERVERS_SELECT_BUTTON_OUT=z++,X.MENU_CATEGORY_PLAY=z++,X.MENU_CATEGORY_PROFILE=z++,X.MENU_CATEGORY_LEADERBOARD=z++,X.MENU_CATEGORY_LEADERBOARD_IN=z++,X.MENU_CATEGORY_SHOP=z++,X.TV_FEAUTED_VIDEOS_UNDER=z++,X.TV_BODY=z++,X.CHANGELOG=z++,X.PLAY_BACKGROUND=z++,X.COMING_SOON_V1=z++,X.COMING_SOON_V2=z++,X.SOCIALS_BACKGROUND=z++,X.LOGO=z++,X.MINIMAP=z++,X.LOADING_BAR_LINE=z++,X.LOADING_BAR_UP=z++,X.LOADING_BG_BAR=z++,X.LOADING_TITLE=z++,X.LOADING_BACKGROUND=z++,X.LOADING_WHEEL=z++;let q=X;function Q(e,t,i,a){let s=Ee.ServerMessageManager;if(s.messages.length<1)return;let r=s.animation,n=s.messages;r.v>=1&&0==s.loop&&(s.loop=1,s.isUpdate=!1,s.timestamp=Date.now()),1==s.loop&&Date.now()-s.timestamp>3550&&(s.loop=2,s.isUpdate=!0),r.v<=0&&2==s.loop&&(s.isUpdate=!1,s.rawShift()),s.isUpdate&&s.animation.update(i),n.length<=0||(t.globalAlpha=r.v,a.drawTextWithShadow(n[0].message,.5*e.width,100,"48px"),t.globalAlpha=1)}function Z(e){let t=Ee.mouse.evX,i=Ee.mouse.evY;return t>e.x&&t<e.x+e.width&&i<e.y+e.height&&i>e.y}class ee{constructor(e,t,i){this.index=e,this.x=0,this.y=0,this.oldX,this.oldY,this.isDrag=!1,this.id=t,this.image=i,this.width=200,this.height=220,this.item=0,this.count=0,this.source_width=null==i?0:i.width,this.source_height=null==i?0:i.width}creation(e,t,i){this.x=e,this.y=t,this.image=i,this.source_width=this.image.width,this.source_height=this.image.height}update(e,t,i,a){this.image=e,this.item=t,this.count=i,this.index=a,this.source_width=this.image.width,this.source_height=this.image.height}render(e,t,i,a){t.save(),0!=Ee.InvEvents.drag&&Ee.InvEvents.drag-1!=this.index&&(t.globalAlpha=.6),this.isDrag?(t.save(),this.image.width=178,this.image.height=178,e.drawImage(this.image,this.oldX,this.oldY),t.restore(),this.image.width=198,this.image.height=188,this.x=Ee.mouse.evX-this.width/4,this.y=Ee.mouse.evY-this.height/4):(this.image.width=178,this.image.height=178,this.x=i.width/2-925+91*a+355,0!=Ee.mouse.hovers.item_inventory&&Ee.mouse.hovers.item_inventory==this.item?this.y=i.height-80-2:this.y=i.height-80-10),e.drawImage(this.image,this.x,this.y),t.restore(),this.image.width=this.source_width,this.image.height=this.source_height}renderPlus(e,t,i,a,s){t.save();let n=Ee.spriteClient.getSprite(r.INV_PLUS.ID,!0);s&&(t.globalAlpha=.85),t.translate(this.x,this.y),e.drawImage(n,14.5,-65,60,60,!1),t.restore()}drag(){this.oldX=this.x,this.oldY=this.y,this.isDrag=!0,Ee.InvEvents.drag=this.index+1}drop(){this.isDrag=!1,this.x=this.oldX,this.y=this.oldY,Ee.InvEvents.drag=0}renderInfo(e,t,i,a){this.isDrag||(t.save(),this.count>0&&e.drawText(this.index+1,this.x+17,this.y+20,"20px"),t.textAlign="right",this.count>0&&e.drawText("x"+this.count,this.x+this.width/2-15,this.y+this.height/2-30,"21px","white",!1),t.restore())}displayInfo(e,t,i,a){if(this.isDrag||0==this.item||0!=Ee.InvEvents.drag)return;t.globalAlpha=.7,t.textAlign="left",t.fillStyle="black";let s=c.getWeaponInfo(this.item),r=e.measureText(s.name,"20px"),n=c.wordSplit(s.description,{maxLength:30,char:" "}),o=32+20*(n=n.map((t=>({str:t,measure:e.measureText(t,"18px")})))).length,l=Math.max(r.width,...n.map((e=>e.measure.width)))+20;e.drawRoundRect(this.x,this.y-o-12,l,o,5,!0),t.globalAlpha=1,e.drawText(s.name,this.x+10,this.y-o+10,"20px","white",!1),n.forEach(((t,i)=>{e.drawText(t.str,this.x+10,this.y-o+20*i+30,"18px","gray",!1)}))}}class te{constructor(e,t,i){this.index=e,this.img=t,this.x=0,this.y=0,this.width=0,this.height=0,this.isCreated=!1,this.val=null,this.color=null,this.animation=null,this.add=1==this.index?4:0,this.upy=0}creation(e,t,i,a,s,r,n){this.isCreated=!0,this.x=e,this.y=t,this.img=i,this.width=this.img.width/2.5,this.height=this.img.height/2.5,this.val=a,this.animation=r,this.color=s,this.globs=n,this.upy=-20}update(e){this.val=e}render(e,t,i,a,s){this.img&&(this.x=i.width/2-520+300*a+240,this.y=i.height-140,t.save(),this.val.value<=60&&(this.animation.update(s),t.globalAlpha=1-this.animation.v),this.val.update(s),t.fillStyle=this.color,t.fillRect(this.x-130,this.y-20-this.upy,this.val.renderValue.map(0,200,0,215+this.add),30),t.restore(),t.save(),e.drawImage(this.img,this.x,this.y-this.upy,this.width,this.height,!0),t.restore())}}let ie=[new te(1,null),new te(2,null),new te(3,null)];function ae(e){return e.includes("tree")?r.MINIMAP_WOOD.ID:e.includes("stone")?r.MINIMAP_STONE.ID:e.includes("gold")?r.MINIMAP_GOLD.ID:e.includes("diamond")?r.MINIMAP_DIAMOND.ID:e.includes("amethyst")?r.MINIMAP_AMETHYST.ID:e.includes("berry")?r.MINIMAP_BERRY.ID:"green"}function se(e){let t=Ee.mouse.evX,i=Ee.mouse.evY;return t>e.x&&t<e.x+e.width&&i<e.y+e.height&&i>e.y}let re={render(e,t,i,a){var s,n,o,l,d,g,m;Ee.options.get_value("render","leaderboard")&&function(e,t,i,a){t.save(),t.fillStyle="black",t.globalAlpha=.2,a.drawRoundRect(e.width-250,20,230,280,15,"white"),t.globalAlpha=.8,a.drawText("Leaderboard",e.width-135,45,"30px");for(let t=1;t<=10;t++)a.drawText(t,e.width-235,60+22*t,"20px","white",!1);let s=Ee.gameClient.playerList.sort(((e,t)=>t.score-e.score));for(let i=0;i<(s.length<10?s.length:10);i++){let r=s[i],n=r.id==Ee.myPlayer.id?"wheat":"white";a.drawText(r.name.length>12?r.name.slice(0,12)+"...":r.name,e.width-210,80+22*i,"16px",n,!1),t.textAlign="right",a.drawText(U.simplifyScore(r.score),e.width-35,80+22*i,"16px",n,!1),t.textAlign="left"}t.restore()}(e,t,0,a),s=i,n=e,o=t,l=a,Ee.gameClient.inGame&&ie.forEach(((e,t)=>{if(e.isCreated){e.render(l,o,n,t,s);let i=null;0==t&&(i=Ee.gauges.values.health),1==t&&(i=Ee.gauges.values.food),2==t&&(i=Ee.gauges.values.cold),i&&e.update(i,Ee)}else{let i=0,a=0,s=0,o=0;0==t&&(i=Ee.spriteClient.getSprite(r.BAR_HEALTH.ID,!0),a=Ee.gauges.values.health,s="#62a859",o=Ee.gauges.animation.health),1==t&&(i=Ee.spriteClient.getSprite(r.BAR_FEED.ID,!0),a=Ee.gauges.values.food,s="#b53217",o=Ee.gauges.animation.food),2==t&&(i=Ee.spriteClient.getSprite(r.BAR_COLD.ID,!0),a=Ee.gauges.values.cold,s="#47a1b4",o=Ee.gauges.animation.cold),e.creation(n.width/2-520+(200*t+1),n.height-140,i,a,s,o)}})),0!=Ee.buildingsManager.current_building&&function(e,t,i,a){t.save();let s=Ee.myPlayer.obj,r=h.fromId(Ee.buildingsManager.current_building),n=Ee.spriteClient.getSprite(r.objectSpriteId,!0);if(null!=n){if(Ee.buildingsManager.G_MODE){var o=Math.floor(s.x+145*Math.cos(s._angle)),l=Math.floor(s.y+145*Math.sin(s._angle));o=Ee.camera.cam.x+(o-o%100+50),l=Ee.camera.cam.y+(l-l%100+50)}else o=145*Math.cos(s._angle)+s.x+Ee.camera.cam.x,l=145*Math.sin(s._angle)+s.y+Ee.camera.cam.y;t.save(),a.drawText(Ee.buildingsManager.G_MODE?"Building method: Grid. Press G to change":"Building method: Free. Press G to change",.5*e.width,e.height-180,"24px","#e2c340",!0),t.restore(),t.translate(o,l),Ee.buildingsManager.G_MODE||t.rotate(s._angle-Math.PI/2+r.offset_angle),t.globalAlpha=.4;let i=r.size_offset;a.drawImage(n,-n.width*(.5*i),-n.height*(.5*i),n.width*i,n.height*i)}t.restore()}(e,t,0,a),Ee.options.get_value("render","minimap")&&function(e,t,i){let a=e.width,s=e.height,n=Ee.spriteClient.getSprite(r.MINIMAP.ID,!0);if(Ee.bigmap){i.drawImage(n,.5*a-.275*n.width,.5*s-.275*n.height,n.width,n.height,!0);let r=n;e.width,e.height,t.save();let l=null;t.save();for(var o=0;o<Ee.gameClient.world.objects.length;o++){l=Ee.gameClient.world.objects[o];let e=Ee.spriteClient.getSprite(ae(l.type),!0);i.drawImage(e,-.5*r.width+(.5*a-.3*e.width)+.0415*l.x+36,-.5*r.height+(.5*s-.3*e.height)+.0415*l.y+36,.35*e.width,.35*e.height)}t.restore(),l=Ee.myPlayer.obj,t.beginPath(),t.fillStyle="white",t.strokeStyle="black",t.arc(-.25*r.width+(.5*a-.3*n.width)+.0415*l.x+51,-.25*r.height+(.5*s-.3*n.height)+.0415*l.y+51,8,0,2*Math.PI),t.fill(),t.stroke(),t.closePath(),l=Ee.marker,t.beginPath(),t.fillStyle="red",t.arc(-.25*r.width+(.5*a-.3*n.width)+.0415*l.x+51,-.25*r.height+(.5*s-.3*n.height)+.0415*l.y+51,10,0,2*Math.PI),t.fill(),t.closePath(),t.restore()}else{let r={};r.x=a+-.5*n.width,r.y=s+-.5*n.width,r.width=.5*n.width,r.height=.5*n.height,c.isInside(r)?Ee.mouse.hovers.minimap=1:Ee.mouse.hovers.minimap=0,i.drawImage(n,a+-.25*n.width,s+-.25*n.width,.5*n.width,.5*n.height,!0);let l=e.width/a-51,h=e.height/s-51;t.save(),t.translate(a+-.495*n.width+20,s+-.495*n.height+20);let d=null;for(t.save(),o=0;o<Ee.gameClient.world.objects.length;o++){d=Ee.gameClient.world.objects[o];let e=Ee.spriteClient.getSprite(ae(d.type),!0);i.drawImage(e,-.1*e.width+-d.x/l,-.1*e.height+-d.y/h,.2*e.width,.2*e.height)}t.restore(),d=Ee.myPlayer.obj,t.beginPath(),t.fillStyle="white",t.arc(-d.x/l,-d.y/h,3,0,2*Math.PI),t.fill(),t.closePath(),d=Ee.marker,t.beginPath(),t.fillStyle="red",t.arc(-d.x/l,-d.y/h,5,0,2*Math.PI),t.fill(),t.closePath(),t.restore()}}(e,t,a),Ee.options.get_value("render","delays")&&function(e,t,i,a){let s=+new Date;for(let i=0;i<Ee.delayManager.delays.length;i++){let a=Ee.delayManager.delays[i],r=2*Math.PI/(a[2]/(s-(a[1]+a[2])));t.save(),t.translate(45,e.height-50-112*i),t.beginPath(),t.lineCap="round",t.strokeStyle="wheat",t.lineWidth=9,t.arc(0,0,40,0,r,!1),t.stroke(),t.restore(),s-a[1]>a[2]&&Ee.delayManager.disposeDelay(a)}}(e,t),function(e,t,i){let a=Ee.craftManager.craftables,s=0,r=0;for(let e=0;e<a.length;e++){s+=90,e%5==0&&(s=0,r+=90);let n=Ee.spriteClient.getItemSprite(a[e].id),o=n.width,l=n.height,d=-85+r,g=5+s;if(n&&n.width>0&&n.height>0){t.save(),t.translate(d,g),n.width=178,n.height=178,Ee.craftManager.in_craft.itemId==h.AIR.Id?t.globalAlpha=.85:Ee.craftManager.in_craft.itemId==a[e].id?t.globalAlpha=1:t.globalAlpha=.35;let s=0;if(Ee.mouse.hovers.craft_inventory==a[e].id&&(s=7.5),i.drawImage(n,0,s),t.restore(),Ee.craftManager.in_craft.itemId!=h.AIR.Id&&Ee.craftManager.in_craft.itemId==a[e].id){t.save(),t.translate(d,g),t.fillStyle="#047d0c ",t.globalAlpha=.65;let e=+new Date-Ee.craftManager.in_craft.timestamp,a=e.map(0,Ee.craftManager.in_craft.time,0,.5*n.width),s=e.map(0,Ee.craftManager.in_craft.time,0,.5*n.height);i.drawRoundRect(-.5*a+.25*n.width,-.5*s+.25*n.height,a,s,15,!0),t.restore()}n.width=o,n.height=l}}(function(e,t,i,a){let s=0,r=0,n=0;for(let e=0;e<a.length;e++){s+=90,e%5==0&&(s=0,r+=90);let o=-85+r,l=5+s,h={};if(h.x=o,h.y=l,h.width=85,h.height=85,se(h)){if(0!=Ee.craftManager.in_craft.itemId&&a[e].id!=Ee.craftManager.in_craft.itemId)return;t.save(),t.globalAlpha=.7,t.textAlign="left",t.fillStyle="black";let s=c.getWeaponInfo(a[e].id);n=a[e].id;let r={maxLength:30,char:" "},h=i.measureText(s.name,"20px"),d=c.wordSplit(s.description,r),g=32+20*(d=d.map((e=>({str:e,measure:i.measureText(e,"18px")})))).length,m=Math.max(h.width,...d.map((e=>e.measure.width)))+20;i.drawRoundRect(o+95,l,m,g,5,!0),t.globalAlpha=1,i.drawText(s.name,o+105,l+20,"20px","white",!1),d.forEach(((e,t)=>{i.drawText(e.str,o+105,l+20*t+40,"18px","gray",!1)})),t.restore();break}}Ee.mouse.onHover(n,"attach","craft_inventory")})(0,t,i,a),Ee.craftManager.in_craft.itemId!=h.AIR.Id&&+new Date-Ee.craftManager.in_craft.timestamp>Ee.craftManager.in_craft.time&&Ee.craftManager.on_craft_finished()}(0,t,a),Ee.mouse.states.isDown&&Ee.gameClient.inGame&&0==Ee.InvEvents.drag&&Ee.inventory.forEach(((e,t)=>{e&&e.item==h.AIR.Id||0==Ee.InvEvents.drag&&Z({x:e.SlotManager.x,y:e.SlotManager.y,width:e.SlotManager.width/2,height:e.SlotManager.height/2})&&e.SlotManager.drag()})),d=e,g=t,m=a,Ee.inventory.forEach(((e,t)=>{if(e.SlotManager||(e.SlotManager=new ee(t,Ee.inventory.slots[t].item),e.SlotManager.creation(d.width/2+90*t+5,d.height-90-10,Ee.spriteClient.getItemSprite(e.item))),e){e.SlotManager.update(Ee.spriteClient.getItemSprite(e.item),e.item,e.count,t),e.SlotManager.render(m,g,d,t);let i={};i.x=e.SlotManager.x,i.y=e.SlotManager.y,i.width=e.SlotManager.width/2,i.height=e.SlotManager.height/2;let a=i;Ee.mouse.onHover(e.item,Z(a)?"attach":"remove","item_inventory"),Z(a)&&e.SlotManager.displayInfo(m,g,d,t)}})),Ee.inventory.forEach(((e,t)=>{e.SlotManager&&e.SlotManager.renderInfo(m,g,d,t)})),Ee.ServerMessageManager.messages.length>0&&(Ee.ServerMessageManager.updateMessages(),Q(e,t,i,a)),Ee.craftManager.on_state_update(),Ee.market.opened&&Ee.market.tail.render();let u=Ee.gameClient.entities[8],p=Ee.gameClient.entities[34],f=Ee.gameClient.entities[30],y=Ee.gameClient.entities[31],_=Ee.gameClient.entities[32],I=Ee.gameClient.entities[33],w=Ee.gameClient.entities[35],b=Ee.myPlayer.obj,A=[],v=!1;if(u.length>=1&&c.getNearest(b,u).dist<=230&&(v=!0),p.length>=1&&c.getNearest(b,p).dist<=160?Ee.myPlayer.states.isInWorkbench=!0:Ee.myPlayer.states.isInWorkbench=!1,f.length>=1){let e=c.getNearest(b,f);e.dist<=140&&A.push(e.entity)}if(y.length>=1){let e=c.getNearest(b,y);e.dist<=140&&A.push(e.entity)}if(I.length>=1){let e=c.getNearest(b,I);e.dist<=120&&A.push(e.entity)}if(_.length>=1){let e=c.getNearest(b,_);e.dist<=220&&e.entity.action instanceof Array&&e.entity.action[0][1]>=1&&(v=!0),e.dist<=140&&A.push(e.entity)}if(w.length>=1){let e=c.getNearest(b,w);e.dist<=120?Ee.myPlayer.totem_data.entity=e.entity:Ee.myPlayer.totem_data.entity=null}else Ee.myPlayer.totem_data.entity=null;if(Ee.myPlayer.states.isInFire=!!v,A.length>=1){Ee.interfacedBuildings.clear();let i=1==A.length?A[0]:c.getNearest(b,A).entity,s=[],r=0;switch(i.type){case 30:r=0,s.push(h.WHEAT.Id),s.push(h.BERRY.Id);break;case 32:r=1,s.push(h.WOOD.Id);break;case 31:r=3,s.push(h.WOOD.Id),s.push(h.FLOUR.Id);break;case 33:for(let e in r=0,h)"AIR"!=e&&s.push(h[e].Id)}let n={};n.type=r,n.renderEntity=i,n.drawingItems=s,n.shouldRenderItemPlus=s.length>0,Ee.interfacedBuildings.renderData=n,Ee.interfacedBuildings.render(e,t,a)}else Ee.interfacedBuildings.clear();if(Ee.autofeed.state&&(t.save(),t.fillStyle="black",t.globalAlpha=.7,a.drawRoundRect(e.width-400,25,150,45,15,"white"),t.restore(),t.save(),a.drawText("Auto Feed",e.width-325,47.5,"28px","white",!0),t.restore()),Ee.myPlayer.bandage_heals>0){t.save(),t.globalAlpha=.75;let i=Ee.spriteClient.getSprite(r.BANDAGE_HEALS_UI.ID,!0),s=.4*i.width,n=.4*i.height;a.drawImage(i,e.width-297.5+-s/2,190+-n/2,s,n),t.globalAlpha=1,a.drawTextWithShadow2(Ee.myPlayer.bandage_heals,e.width-362.5,195,"36px","#eeeef6",!0,"#fee8f7","24px"),t.restore()}t.save();let D=Ee.spriteClient.getSprite(r.UI_BREAD_SHOP.ID,!0),M=.25*D.width,x=.25*D.height,S=e.width-305+-x/2,E=112.5+-M/2,k={};k.x=S,k.y=E,k.width=M,k.height=x,c.isInside(k)?(t.globalAlpha=.85,Ee.mouse.hovers.shop_button=1):Ee.mouse.hovers.shop_button=0,a.drawImage(D,S,E,M,x),t.restore(),null==Ee.myPlayer.totem_data.entity&&null==Ee.myPlayer.totem_data.players||function(e,t,i,a){i.save(),i.translate(.5*t.width,20);let s=!1,n=Ee.spriteClient.getSprite(r.UI_TOTEM_AVAIBLE.ID,!0);if(null!=Ee.myPlayer.totem_data.entity||null!=Ee.myPlayer.totem_data.players){let e=.77*n.width,o=.7*n.height;if(null!=Ee.myPlayer.totem_data.entity&&null==Ee.myPlayer.totem_data.players&&(Ee.myPlayer.totem_data.entity.totem_data[0]>=10||1!=Ee.myPlayer.totem_data.entity.totem_data[1]))return n=Ee.spriteClient.getSprite(r.UI_TOTEM_UNAVAIBLE.ID,!0),i.translate(0,15),a.drawImage(n,-.5*e,-.5*o,e,o),void i.restore();let l={};l.x=.5*t.width+-e/2,l.y=20+-o/2,l.width=e,l.height=o,c.isInside(l)&&(Ee.mouse.hovers.totem_button=1,s=!0),a.drawImage(n,-.5*e,-.5*o,e,o)}i.restore(),s||(Ee.mouse.hovers.totem_button=0)}(0,e,t,a)}};class ne{constructor(){this.cam=null,this.isAble=!1,this.isUpdatable=!1}update(e,t,i){var a=Math.max(Math.min(window.innerWidth/2-e,-2),2-Ee.gameClient.world.width+window.innerWidth),s=Math.max(Math.min(window.innerHeight/2-t,-2),2-Ee.gameClient.world.height+window.innerHeight);let r={};r.x=a,r.y=s,null!=this.cam&&this.cam.ease(r,Ee.gameClient.render.delta)}setOwner(e){this.id=e}setup(){this.cam=new m(c.ease_out_quad,0,.4,0,0,window.innerWidth/2,window.innerHeight/2,window.innerWidth/2,window.innerHeight/2),this.cam.w=window.innerWidth,this.cam.h=window.innerHeight,this.cam.rw=this.cam.w,this.cam.rh=this.cam.h,this.cam.rx=0,this.cam.ry=0,this.cam.rdw=0,this.cam.rdh=0,this.isUpdatable=!0,this.isAble=!0}}class oe{constructor(){this.scene=0,this.stop=!1,this.canvas=document.getElementById("gcvs"),this.ctx=this.canvas.getContext("2d"),this.old_now=Date.now(),this.delta=.016,window.addEventListener("resize",(()=>this.resize())),this.resize(),this.lastRefresh=Date.now(),this.framesTick=0}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,Ee.gameClient.setMiddleCanvas(.5*this.canvas.width,.5*this.canvas.height)}onSceneChanged(){switch(this.scene){case 2:case 3:case 0:case-1:document.getElementById("game_menu").style.display="none";break;case 1:document.getElementById("game_menu").style.display="flex",Ee.camera=new ne,Ee.camera.setup()}}draw_menu(e){this.delta=e,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),function(e,t,i,a){var s,n,o,l,h;t.save(),t.fillStyle="#133a2b",t.fillRect(0,0,e.width,e.height),t.restore(),t.save(),Ee.loader.load_menu_alpha<1&&Ee.loader.update(Ee),t.globalAlpha=Ee.loader.load_menu_alpha;let d,g,m,u,p,f,y,_=[];for(let t=0;t<Ee.fakeWorld.length;t++){let i=Ee.fakeWorld[t];if(String(i.type).includes("TREE")||String(i.type).includes("STONE")){_.push(i);continue}let s=Ee.spriteClient.getSprite(r[i.type].ID,!0),n=.5*e.width+i.x,o=.5*e.height+i.y,l=i.width,h=i.height;null!=s&&a.drawImage(s,n+c.reverseValue(l),o+c.reverseValue(h),l,h)}t.save(),t.translate(.5*e.width,.5*e.height);for(let s=0;s<Ee.fakeEntities.length;s++){let r=Ee.fakeEntities[s];8==r.type&&(r.renderDown(e,t,i,a),r.renderUp(e,t,i,a))}t.restore();for(let t=0;t<_.length;t++){let i=_[t],s=Ee.spriteClient.getSprite(r[i.type].ID,!0),n=.5*e.width+i.x,o=.5*e.height+i.y,l=i.width,h=i.height;null!=s&&a.drawImage(s,n+c.reverseValue(l),o+c.reverseValue(h),l,h)}t.save(),t.restore(),t.restore(),s=e,n=t,o=i,l=a,d=null,g=.99,m=1.01,u=0,p=-41,Ee.menu.server.waiting&&(+new Date-Ee.menu.server.timestamp>2e4&&(Ee.menu.server.waiting=!1,Ee.menu.server.timestamp=-1,Ee.ServerMessageManager.onMessage("Cannot join this server")),Ee.menu.server.angle+=.025,Ee.menu.server.angle>2*Math.PI&&(Ee.menu.server.angle=0),n.save(),n.translate(.5*s.width,80),n.rotate(Ee.menu.server.angle),d=Ee.spriteClient.getUISprite(q.LOADING_WHEEL),l.drawImage(d,-.35*d.width,-.35*d.height,.7*d.width,.7*d.height),n.restore()),Ee.menu.play_button.update&&Ee.menu.play_button.animation.update(o)&&0==Ee.menu.play_button.animation.o&&(Ee.menu.play_button.update=!1),f=!1,Ee.menu.title_animation.update(o),n.save(),n.translate(.5*s.width,.5*s.height),d=Ee.spriteClient.getUISprite(q.PLAY_BACKGROUND),g=.99,m=1.01,u=0,p=-41,n.save(),n.translate(u,p),l.drawImage(d,-d.width*(.5*g),-d.height*(.5*m),d.width*g,d.height*m),n.restore(),y=Ee.mouse.hovers.menu_button,d=Ee.spriteClient.getUISprite(y==q.PLAY_BUTTON_OUT?q.PLAY_BUTTON_IN:q.PLAY_BUTTON_OUT),n.save(),g=.97,m=1.02,u=151,p=-4+Ee.menu.play_button.animation.v,c.isInside({x:.5*s.width+u+-d.width*(.5*g),y:.5*s.height+p+-d.height*(.5*m),width:d.width*g,height:d.height*m})&&(Ee.mouse.onHover(q.PLAY_BUTTON_OUT,"attach","menu_button"),f=!0),n.translate(u,p),l.drawImage(d,-d.width*(.5*g),-d.height*(.5*m),d.width*g,d.height*m),n.restore(),d=Ee.spriteClient.getUISprite(y==q.MENU_CATEGORY_LEADERBOARD?q.MENU_CATEGORY_LEADERBOARD_IN:q.MENU_CATEGORY_LEADERBOARD),n.save(),g=.97,m=1.02,u=.5*s.width-155,p=195,c.isInside({x:.5*s.width+u+-d.width*(.5*g),y:.5*s.height+p+-d.height*(.5*m),width:d.width*g,height:d.height*m})&&(Ee.mouse.onHover(q.MENU_CATEGORY_LEADERBOARD,"attach","menu_button"),f=!0),n.translate(u,p),l.drawImage(d,-d.width*(.5*g),-d.height*(.5*m),d.width*g,d.height*m),n.restore(),d=Ee.spriteClient.getUISprite(y==q.SERVERS_SELECT_BUTTON_OUT?q.SERVERS_SELECT_BUTTON_IN:q.SERVERS_SELECT_BUTTON_OUT),n.save(),g=.99,m=1.06,u=-99,p=-4,c.isInside({x:.5*s.width+u+-d.width*(.5*g),y:.5*s.height+p+-d.height*(.5*m),width:d.width*g,height:d.height*m})&&(Ee.mouse.onHover(q.SERVERS_SELECT_BUTTON_OUT,"attach","menu_button"),f=!0),n.translate(u,p),l.drawImage(d,-d.width*(.5*g),-d.height*(.5*m),d.width*g,d.height*m),n.restore(),d=Ee.spriteClient.getUISprite(q.CHANGELOG),n.save(),g=.95,m=.92,u=.5*s.width-120,p=-110,n.translate(u,p),l.drawImage(d,-d.width*(.5*g),-d.height*(.5*m),d.width*g,d.height*m),n.restore(),d=Ee.spriteClient.getUISprite(q.TV_FEAUTED_VIDEOS_UNDER),n.save(),g=.85,m=.85,u=.5*s.width-110,p=.5*s.height-205,n.translate(u,p),l.drawImage(d,-d.width*(.5*g),-d.height*(.5*m),d.width*g,d.height*m),n.restore(),d=Ee.spriteClient.getUISprite(q.TV_BODY),n.save(),g=.95,m=.95,u=.5*s.width-125,p=.5*s.height-175.5,n.translate(u,p),l.drawImage(d,-d.width*(.5*g),-d.height*(.5*m),d.width*g,d.height*m),n.restore(),d=Ee.spriteClient.getUISprite(q.SOCIALS_BACKGROUND),n.save(),g=1,m=1,u=.5*s.width-100,p=.5*s.height-10,n.translate(u,p),l.drawImage(d,-d.width*(.5*g),-d.height*(.5*m),d.width*g,d.height*m),n.restore(),d=Ee.spriteClient.getUISprite(y==q.SOCIAL_DISCORD_BUTTON_OUT?q.SOCIAL_DISCORD_BUTTON_IN:q.SOCIAL_DISCORD_BUTTON_OUT),c.isInside({x:.5*s.width+u+(-d.width*(.5*g)-92),y:.5*s.height+p+(-d.height*(.5*m)-40),width:d.width*g,height:d.height*m})&&(Ee.mouse.onHover(q.SOCIAL_DISCORD_BUTTON_OUT,"attach","menu_button"),f=!0),n.save(),g=1,m=1,u=.5*s.width-100,p=.5*s.height-10,n.translate(u,p),l.drawImage(d,-d.width*(.5*g)-92,-d.height*(.5*m)-40,d.width*g,d.height*m),n.restore(),d=Ee.spriteClient.getUISprite(y==q.SOCIAL_YOUTUBE_BUTTON_OUT?q.SOCIAL_YOUTUBE_BUTTON_IN:q.SOCIAL_YOUTUBE_BUTTON_OUT),c.isInside({x:.5*s.width+u+(-d.width*(.5*g)-1),y:.5*s.height+p+(-d.height*(.5*m)-40),width:d.width*g,height:d.height*m})&&(Ee.mouse.onHover(q.SOCIAL_YOUTUBE_BUTTON_OUT,"attach","menu_button"),f=!0),n.save(),g=1,m=1,u=.5*s.width-100,p=.5*s.height-10,n.translate(u,p),l.drawImage(d,-d.width*(.5*g)-1,-d.height*(.5*m)-40,d.width*g,d.height*m),n.restore(),d=Ee.spriteClient.getUISprite(q.LOADING_TITLE),n.save(),g=.67*Ee.menu.title_animation.v,m=.67*Ee.menu.title_animation.v,u=0,p=-220,n.translate(u,p),l.drawImage(d,-d.width*(.5*g),-d.height*(.5*m),d.width*g,d.height*m),n.restore(),n.restore(),f||(Ee.mouse.hovers.menu_button=0),Ee.mouse.updateMouse(),(h=t).save(),h.restore(),Ee.ServerMessageManager.messages.length>0&&(Ee.ServerMessageManager.updateMessages(),Q(e,t,i,a))}(this.canvas,this.ctx,this.delta,this)}draw_game(e){this.delta=e,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),function(e,t,i,a){if(Ee.gameClient.world.update(),null==Ee.camera||!Ee.camera.isUpdatable)return;Ee.camera.update(Ee.myPlayer.obj.x,Ee.myPlayer.obj.y,Ee.gameClient.render.delta),Ee.mouse.updateMouse(),t.save();for(let e=0;e<Ee.gameClient.world.biomes.length;e++){let i=Ee.gameClient.world.biomes[e],a=i[0],s=i[1],r=i[2],n=i[3],o=i[4],l="black";switch(a){case"FOREST":l=Ee.gameClient.world.cycle.isNight?"#042b30":"#133a2b";break;case"WINTER":l="white"}t.save(),t.fillStyle=l,t.fillRect(s+Ee.camera.cam.x,r+Ee.camera.cam.y,n,o),t.restore()}t.save();let s=[];for(let e=0;e<Ee.gameClient.world.decorations.length;e++){let t=Ee.gameClient.world.decorations[e],i={};i.x=t[1],i.y=t[2];let a=U.getDistance(i);a.xDist<=Math.min(2560,window.innerWidth)&&a.yDist<=Math.min(1440,window.innerHeight)&&s.push(t)}for(let e=0;e<s.length;e++){let i=s[e],n=Ee.spriteClient.getSprite(r[i[0].toUpperCase()].ID);null!=n&&(t.save(),t.translate(i[1]+Ee.camera.cam.x,i[2]+Ee.camera.cam.y),a.drawImage(n,0,0,null,null,!0),t.restore())}!function(e,t,i,a){if(!Ee.buildingsManager.G_MODE||0==Ee.buildingsManager.current_building)return;let s=Ee.myPlayer.obj;var r=Math.floor(s.x+120*Math.cos(s._angle)),n=Math.floor(s.y+120*Math.sin(s._angle));r=Ee.camera.cam.x+(r-r%100),n=Ee.camera.cam.y+(n-n%100),t.save(),t.beginPath(),t.lineCap="round",t.strokeStyle="wheat",t.lineWidth=5,t.globalAlpha=.6,t.translate(r,n);for(let e=0;e<=800;e+=100){t.moveTo(e,0),t.lineTo(e,100);for(let e=0;e<=800;e+=100)t.moveTo(0,e),t.lineTo(100,e)}for(let e=-800;e<=0;e+=100){t.moveTo(e,0),t.lineTo(e,100);for(let e=-800;e<=0;e+=100)t.moveTo(0,e),t.lineTo(100,e)}t.stroke(),t.restore()}(0,t);let n=[4,7,6,5,8,9,2,0,1,3,34,33,32,20,21,22,23,24,10,11,12,13,14,15,16,17,18,19,35,30,31];for(let s=0;s<n.length;s++){let r=Ee.gameClient.entities[n[s]];for(let s=0;s<r.length;s++){let n=r[s];Ee.myPlayer.obj&&n.id!=Ee.myPlayer.obj.id&&(U.distanceSqrt(n.r.x,n.r.y,Ee.myPlayer.obj.r.x,Ee.myPlayer.obj.r.y)>=(0==n.type?1298:1350)||512&n.action)?c.disposeEntity(n,n.type):8==n.type||32==n.type?n.renderDown(e,t,i,a):n.render(e,t,i,a)}}for(let s=0;s<Ee.gameClient.entities[8].length;s++)Ee.gameClient.entities[8][s].renderUp(e,t,i,a);for(let s=0;s<Ee.gameClient.entities[32].length;s++)Ee.gameClient.entities[32][s].renderUp(e,t,i,a);Ee.gameClient.world.renderWorldObjects(e,t,i,a),t.restore(),Ee.dayNight.isUpdate&&(Ee.dayNight.opacity.update(i)&&0==Ee.dayNight.opacity.o||0==Ee.dayNight.opacity.v)&&(Ee.dayNight.isUpdate=!1),t.save(),t.fillStyle="#020b24",t.globalAlpha=Ee.dayNight.opacity.v,t.fillRect(0,0,window.innerWidth,window.innerHeight),t.restore(),t.restore();for(let e=0;e<Ee.gameClient.entities[0].length;e++)Ee.gameClient.entities[0][e].draw_text();re.render(e,t,i,a),Ee.debugMode&&Ee.debugger.update(e,t,i,a)}(this.canvas,this.ctx,this.delta,this)}draw_loading(e){this.delta=e,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),function(e,t,i,a){Ee.loader.update(Ee),t.fillRect(0,0,e.width,e.height),t.fillStyle="#133a2b",t.save(),t.globalAlpha=Ee.loader.load_menu_alpha;for(let t=0;t<Ee.fakeWorld.length;t++){let i=Ee.fakeWorld[t],s=Ee.spriteClient.getSprite(r[i.type].ID,!0),n=.5*e.width+i.x,o=.5*e.height+i.y,l=i.width,h=i.height;null!=s&&a.drawImage(s,n+c.reverseValue(l),o+c.reverseValue(h),l,h)}let s=Ee.loader.progress.map(0,100,0,732),n=Ee.spriteClient.getUISprite(q.LOADING_BAR_LINE),o=s,l=1.1*n.height;t.translate(.5*e.width,.5*e.height+50),t.save(),t.translate(-115,.103*e.height),a.drawImage(n,-n.width/4+.25*o/o,-.5*l,1*o,1*l),t.restore(),t.save(),n=Ee.spriteClient.getUISprite(q.LOADING_BAR_UP),t.translate(0,.1*e.height),a.drawImage(n,-.375*n.width,-.375*n.height,.75*n.width,.75*n.height),t.save(),t.translate(0,-65),t.rotate(Ee.loader.wheel.angle),n=Ee.spriteClient.getUISprite(q.LOADING_WHEEL),a.drawImage(n,-.35*n.width,-.35*n.height,.7*n.width,.7*n.height),t.restore(),t.translate(0,-250),n=Ee.spriteClient.getUISprite(q.LOADING_TITLE),a.drawImage(n,-.4*n.width,-.4*n.height,.8*n.width,.8*n.height),t.restore(),t.restore(),t.save(),t.translate(75,10),a.drawText("Made by EvelTeam",0,0,"18px","wheat",!0),t.restore()}(this.canvas,this.ctx,this.delta,this)}drawImageColorTransition(e,t,i,a,s,r=!1,n="#020b24"){var o=document.createElement("canvas"),l=o.getContext("2d");return o.width=a,o.height=s,l.drawImage(e,0,0,a,s),l.globalCompositeOperation="source-in",l.fillStyle=n,l.fillRect(0,0,o.width,o.height),o}drawImage(e,t,i,a,s,r=!1){try{if(!e)return;let n=r?-e.width/4+t:t,o=r?-e.height/4+i:i;a||(a=e.width/2),s||(s=e.height/2),this.ctx.drawImage(e,n,o,a,s)}catch(e){console.log("[Famish/Errors] Error with drawing image!",e)}}drawTextWithShadow2(e,t,i,a="20px",s="white",r=!0,n="black",o=7){this.ctx.save(),r&&(this.ctx.textAlign="center",this.ctx.textBaseline="middle"),this.ctx.font=a+' "Baloo Paaji", Verdana, sans-serif',this.ctx.strokeStyle="#fee8f7",this.ctx.lineWidth=1,this.ctx.strokeText(e,t,i),this.ctx.restore(),this.drawText(e,t,i,a,s,r)}drawTextWithShadow(e,t,i,a="20px",s="white",r=!0,n="black",o=7){this.ctx.save(),r&&(this.ctx.textAlign="center",this.ctx.textBaseline="middle"),this.ctx.font=a+' "Baloo Paaji", Verdana, sans-serif',this.ctx.shadowColor="black",this.ctx.shadowBlur=7,this.ctx.lineWidth=5,this.ctx.strokeText(e,t,i),this.ctx.restore(),this.drawText(e,t,i,a,s,r)}drawCursedText(e,t,i,a="20px",s="white",r=!0,n,o){this.ctx.save(),r&&(this.ctx.textAlign="center",this.ctx.textBaseline="middle"),this.ctx.font=a+' "Baloo Paaji", Verdana, sans-serif',this.ctx.lineWidth=n,this.ctx.strokeStyle=o,this.ctx.strokeText(e,t,i),this.ctx.restore(),this.drawText(e,t,i,a,s,r)}drawText(e,t,i,a="20px",s="white",r=!0){this.ctx.save(),r&&(this.ctx.textAlign="center",this.ctx.textBaseline="middle"),this.ctx.font=a+' "Baloo Paaji", Verdana, sans-serif',this.ctx.fillStyle=s,this.ctx.fillText(e,t,i),this.ctx.restore()}drawRoundRect(e,t,i,a,s=5,r=!0,n=!1){if(this.ctx.save(),"number"==typeof s)s={tl:s,tr:s,br:s,bl:s};else{let e={tl:0,tr:0,br:0,bl:0};for(let t in e)s[t]=s[t]||e[t]}this.ctx.beginPath(),this.ctx.moveTo(e+s.tl,t),this.ctx.lineTo(e+i-s.tr,t),this.ctx.quadraticCurveTo(e+i,t,e+i,t+s.tr),this.ctx.lineTo(e+i,t+a-s.br),this.ctx.quadraticCurveTo(e+i,t+a,e+i-s.br,t+a),this.ctx.lineTo(e+s.bl,t+a),this.ctx.quadraticCurveTo(e,t+a,e,t+a-s.bl),this.ctx.lineTo(e,t+s.tl),this.ctx.quadraticCurveTo(e,t,e+s.tl,t),this.ctx.closePath(),r&&this.ctx.fill(),n&&this.ctx.stroke(),this.ctx.restore()}drawSmoothCube(e,t,i,a,s){var r=Math.PI/180;i-e-2*s<0&&(s=(i-e)/2),a-t-2*s<0&&(s=(a-t)/2),this.ctx.beginPath(),this.ctx.moveTo(e+s,t),this.ctx.lineTo(i-s,t),this.ctx.arc(i-s,t+s,s,270*r,360*r,!1),this.ctx.lineTo(i,a-s),this.ctx.arc(i-s,a-s,s,0*r,90*r,!1),this.ctx.lineTo(e+s,a),this.ctx.arc(e+s,a-s,s,90*r,180*r,!1),this.ctx.lineTo(e,t+s),this.ctx.arc(e+s,t+s,s,180*r,270*r,!1),this.ctx.closePath()}drawRotatedImage(e,t,i,a){this.ctx.translate(t,i),this.ctx.rotate(a),this.ctx.drawImage(e,-.5*e.width,-.5*e.height)}measureText(e,t="20px"){this.ctx.save(),this.ctx.font=t+' "Baloo Paaji", Verdana, sans-serif';let i=this.ctx.measureText(e);return this.ctx.restore(),i}}class le{constructor(e,t,i){this.value=e,this.min=t,this.max=i,this.renderValue=e}update(e){this.value<this.min&&(this.value=this.min),this.value>this.max&&(this.value=this.max),(this.renderValue<0||this.renderValue>200)&&(this.renderValue=this.value);let t=2*e;t>=1&&(t=.016),this.renderValue=(1-t)*this.renderValue+t*this.value}}class he{constructor(){}static getKicked(e="unknown",t=!1){t||Ee.networkClient.sendJSON([3,e]),Ee.networkClient.websocket.close(),Ee.gameClient.onServerDisconnect(),Ee.ServerMessageManager.onMessage("Kicked: "+e)}}class de{constructor(){}static saveUUID(e){localStorage.setItem("uuid_data",JSON.stringify({timestamp:+new Date,uuid:e}))}static loadUUID(){let e=localStorage.getItem("uuid_data");return null==e?null:JSON.parse(e)}static onHandshakeAllowed(e){function t(e,t,i=126){for(var a=(e=String(e)).toString().split(""),s=0;s<a.length;s++)a[s].charCodeAt(0)<=i&&(a[s]=String.fromCharCode((a[s].charCodeAt(0)+t)%i));return a.join("")}let i=de.loadUUID();i&&null!=i.uuid||de.saveUUID(U.uuidv4());let a=2e3*e[1]/5e3;Ee.networkClient.sendJSON([0,document.getElementById("nickname").value,t(255*Ee.CLIENT_VERSION,121),de.loadUUID().uuid,[window.innerWidth,window.innerHeight],c.reverseStr(t(a,58))])}static onBoundReponse(e){console.log("[Famishs/Pong] Your ping is: "+(+new Date-e[1])+" ms")}static onServerJoin(e){}static onStunUpdate(e){let t=e[0];Ee.gameClient.entities[0].find((e=>e.id==t)).stunned=!0}static onHandshakeResponse(e){Ee.myPlayer.id=e[0][0],Ee.gameClient.playerList=e[0][1];let t={};t.id=Ee.myPlayer.id,t.score=e[0][3],t.name=e[0][2];let i=t;Ee.gameClient.playerList=Ee.gameClient.playerList.filter((e=>e.id!=i.id));let a={type:0};a.id=Ee.myPlayer.id,a.x=e[0][7],a.y=e[0][8];let s=new G(a);Ee.gameClient.entities[0].push(s),Ee.myPlayer.obj=s,Ee.camera=new ne,Ee.camera.setOwner(Ee.myPlayer.id),Ee.camera.setup(),Ee.gameClient.playerList.push(i),Ee.viewPort.width=e[0][5],Ee.viewPort.height=e[0][6],this.onTimeUpdate([e[0][4]]),Ee.gameClient.world.setWorld(e[0][9]),Ee.gauges.values.health.value=e[0][10][0],Ee.gauges.values.food.value=e[0][10][1],Ee.gauges.values.cold.value=e[0][10][2],Ee.gameClient.render.scene=2,Ee.gameClient.render.onSceneChanged(),Ee.gameClient.onServerJoined(),Ee.gameClient.inGame=!0,Ee.craftManager.crafts=e[0][11],Ee.autofeed.state=e[0][12],Ee.craftManager.on_crafts_updated(),Ee.menu.server.timestamp=-1,Ee.menu.server.waiting=!1,Ee.mouse.hovers.menu_button=0,Ee.keyboard.reset(),Ee.mouse.reset(),Ee.market.tail.on_enable(),Ee.myPlayer.bandage_heals=0,e[0][13]&&(Ee.myPlayer.totem_data={players:e[0][13][0],leader:e[0][13][0][0][0],locked:e[0][13][1],entity:null},c.update_totem_ui())}static onEntityHitten(e=[]){c.hitten(e)}static onEntityRemove(e=[]){let t=e[0][0],i=e[0][1];if(!Ee.gameClient.entities[t].find((e=>e.id==i)))return console.log("[Famishs/EntityDispose] Entity cannot be disposed , id: "+i);let a=Ee.gameClient.entities[t].filter((e=>e.id!=i)),s={};s.id=i,Ee.gameClient.entities[t]=a,c.disposeEntity(s,t)}static onEntityUpdate(e=[]){for(let t of e){let e={};e.type=t[0],e.id=t[1]|t[2]<<8,e.angle=Math.PI*t[3]/255,e.x=t[4]|t[5]<<8,e.y=t[6]|t[7]<<8,e.action=t[8],e.info=t[9];let i=e;if(512&i.action)return void c.disposeEntity(i,i.type);switch(i.type){case 0:if(c.isPlayerExists(i.id)){let e=c.getPlayer(i.id);e.update(i),e.right=t[10][0],e.hat=t[10][1],i.id!=Ee.myPlayer.id||Ee.myPlayer.obj||(Ee.myPlayer.obj=e)}else{let e={};e.type=i.type,e.id=i.id,e.x=i.x,e.y=i.y,e.angle=i.angle,e.owner=null,e.info=i.info;let a=new G(e);a.right=t[10][0],a.hat=t[10][1],Ee.gameClient.entities[0].push(a)}break;case 5:case 6:if(c.isEntityAppeared(i.id,i.type)){let e=c.getEntity(i.id,i.type);if(!e)return;let a={};a.x=i.x,a.y=i.y,a.angle=i.angle,a.itemsIn=t[8],a.age=t[9],e.update(a)}else{let e={};e.type=i.type,e.id=i.id,e.x=i.x,e.y=i.y,e.angle=i.angle,e.itemsIn=t[8],e.age=t[9];let a=new G(e);Ee.gameClient.entities[i.type].push(a)}break;case-6:{let e=Ee.gameClient.world.objects.find((e=>e.id==i.id));if(!e)return console.log("tf?");e.info=i.action;break}default:if(c.isEntityAppeared(i.id,i.type)){let e=c.getEntity(i.id,i.type);if(!e)return;e.update(i)}else{let e={};e.type=i.type,e.id=i.id,e.x=i.x,e.y=i.y,e.angle=i.angle,e.owner=null,e.info=i.info;let t=new G(e);Ee.gameClient.entities[i.type].push(t)}}}}static onPlayerJoin(e){Ee.gameClient.playerList.find((t=>t.id==e[0][0]))||Ee.gameClient.playerList.push({id:e[0][0],name:e[0][1],score:e[0][2]})}static onPlayerDied(e){let t=e[0],i=Ee.gameClient.playerList.filter((e=>e.id!=t));Ee.gameClient.playerList=i;let a=Ee.gameClient.entities[0].filter((e=>e.id!=t));Ee.gameClient.entities[0]=a}static onLeaderboardUpdate(e=[]){for(let t=0;t<e[0].length;t++){let i=c.getPlayerInfo(e[0][t][0]);if(!i)return console.log("[Famishs/Errors] Leaderboard player not found PLEASE REPORT IT TO ADMINISTRATION!");i.score=e[0][t][1]}}static onChat(e=[]){let t=e[0],i=e[1],a=c.getEntity(t,0);if(!a)return console.log("[AsyncChat] Errored , couldnt find player.");a.text.push(i)}static onKicked(e="unknown"){Ee.camera.isUpdatable=!1,console.log("[Famishs.io/KICKED] "+e),he.getKicked(e,!0)}static onInventoryUpdate(e=[]){Ee.inventory.fromJson(e[0]),Ee.craftManager.in_craft.itemId==h.AIR.Id&&Ee.craftManager.get_craftables()}static onInventoryItemRemove(e=[]){let t=e[0],i=Ee.inventory.slots.filter((e=>e.item!=t));Ee.inventory.slots=i,Ee.inventory.newSlot()}static onCraftResponse(e=[]){let t=e[0],i=1e3*e[1];s.AutoCraft.id=t,Ee.craftManager.set_in_craft(t,i),Ee.buildingsManager.current_building=0,Ee.mouse.hovers.plus_hover=0,Ee.mouse.hovers.craft_inventory=0,Ee.mouse.hovers.item_drop=0,Ee.mouse.hovers.storage_hover=0}static onServerMessage(e=[]){Ee.ServerMessageManager.onMessage(e[0])}static onGaugesUpdate(e=[]){Ee.gauges.values.food.value=e[0][0],Ee.gauges.values.cold.value=e[0][1]}static onHealthUpdate(e){Ee.gauges.values.health.value=e[0]}static onStateUpdated(e=[]){let t=c.getEntity(e[1],e[0]);t&&(t.hurt.update=!0,t.hurt.type=e[2])}static onTimeUpdate(e){let t=e[0];t&&0==Ee.dayNight.opacity.v&&(Ee.dayNight.isUpdate=!0),!t&&Ee.dayNight.opacity.v>=.5&&(Ee.dayNight.isUpdate=!0),Ee.dayNight.isNight=t}static onPrediction(e){Ee.drawShit=e}static onTotemDataCallback(e=[]){switch(e[0]){case 0:{let t=e[1],i={};i.players=t,i.leader=!0,i.locked=1,Ee.myPlayer.totem_data=i,c.update_totem_ui();break}case 3:{let t=e[1],i={};i.players=t,i.leader=!1,i.locked=1,Ee.myPlayer.totem_data=i,c.update_totem_ui(),Ee.ServerMessageManager.onMessage("You joined a team");break}case 5:{let t=e[1];switch(Ee.myPlayer.totem_data={players:[],leader:!1,locked:1},t){case 0:Ee.ServerMessageManager.onMessage("You left the team");break;case 1:Ee.ServerMessageManager.onMessage("Totem destroyed")}c.clear_team();break}case 4:{let t=e[1];Ee.myPlayer.totem_data.locked=t,c.update_totem_ui();break}case 6:Ee.ServerMessageManager.onMessage("You left the team"),c.clear_team();break;case 1:{let t=e[1],i=e[2],a=e[3],s=c.getPlayerInfo(i);if(null!=s&&(a=s.name),Ee.ServerMessageManager.onMessage(a+" "+(1==t?"left":"joined")+" the team"),1==t){let e=Ee.myPlayer.totem_data.players.filter((e=>e[0]!=i));Ee.myPlayer.totem_data.players=e}else Ee.myPlayer.totem_data.players.push([i,0]);c.update_totem_ui()}}}}class ge{constructor(){}static onPacketReceive(e){let t=e.slice(1);switch(e[0]){case 0:de.onHandshakeAllowed(t);break;case 2:de.onKicked(e[1]);break;case 3:de.onHandshakeResponse(t);break;case 4:de.onEntityUpdate(t[0]);break;case 5:de.onInventoryUpdate(t);break;case 6:de.onInventoryItemRemove(t);break;case 7:de.onLeaderboardUpdate(t);break;case 8:de.onPlayerJoin(t);break;case 9:de.onPlayerDied(t);break;case 10:de.onServerMessage(t);break;case 12:de.onHealthUpdate(t);break;case 11:de.onGaugesUpdate(t);break;case 13:de.onTimeUpdate(t);break;case 14:de.onEntityRemove(t);break;case 15:de.onEntityHitten(t);break;case 16:de.onStateUpdated(t);break;case 17:de.onBoundReponse(t);break;case 18:de.onCraftResponse(t);break;case 19:de.onPrediction(t);break;case 20:Ee.buildingsManager.on_build_response(t[0]);break;case 21:Ee.delayManager.on_delay(t);break;case 23:Ee.market.tail.update_item_prices(t[0]);break;case 24:de.onChat(t);break;case 25:Ee.myPlayer.bandage_heals=t[0];break;case 26:de.onTotemDataCallback(t);break;case 27:de.onStunUpdate(t);break;case 22:let i=t[0],a=t[1],s=t[2];Ee.console.send_message(s,i,a)}}}class ce{static on_execute(e,t){switch(e){case"export":Ee.console.send_message("white","Client configuration",JSON.stringify(Ee.options.options));break;case"import":try{let e="";for(let i=0;i<t.length;i++)e+=t[i]+" ";let i=JSON.parse(e);Ee.options.options=i,Ee.console.send_message("limegreen",i[0].configuration_name,i[0].configuration_message)}catch(e){return void Ee.console.send_message("orangered","Settings Loader Failed","JSON Parse failed , please validated your config with any JSON Validator")}break;case"reset":break;case"help":Ee.console.send_message("limegreen","Here list of all commands:",""),Ee.console.send_message("gray","Server:","* - requires to be authorizated as administrator"),Ee.console.send_message("gold",null,"auth [password] - login to server as administrator*"),Ee.console.send_message("gold",null,"broadcast [message] - send title message to all players in server*"),Ee.console.send_message("gold",null,"list - show list of all players");break;case"list":Ee.console.send_message("limegreen","Player List","players in server: "+Ee.gameClient.playerList.length);for(let e=0;e<Ee.gameClient.playerList.length;e++){let t=Ee.gameClient.playerList[e];Ee.console.send_message("gold",null,t.name+" | "+t.id)}break;case"clear":document.getElementsByClassName("consoleOutput")[0].innerHTML="",Ee.console.send_message("gold","Console clearned.","");break;case"set_uuid":let i=t[0];de.saveUUID(i),Ee.console.send_message("gold","UUID Saved","Now you can reload page and join to your session");break;case"get_uuid":Ee.console.send_message("gold","Your UUID","UUID is: "+de.loadUUID().uuid);break;case"pos":Ee.console.send_message("gold",`Your position is ${Math.floor(Ee.myPlayer.obj.x)}:${Math.floor(Ee.myPlayer.obj.y)}`," ");break;default:Ee.networkClient.sendJSON([11,[e,t]])}document.getElementById("consoleInput").value=""}}i(41);let me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ue=(e,t)=>{if(t<0)return ue(e,t+26);let i="";for(let a=0;a<e.length;a++){let s=e[a];if(s.match(/[a-z]/i)){let i=e.charCodeAt(a);i>=65&&i<=90?s=String.fromCharCode((i-65+t)%26+65):i>=97&&i<=122&&(s=String.fromCharCode((i-97+t)%26+97))}i+=s}return i},pe=(e,t)=>{let i=(e=>{if("string"!=typeof e)throw null;let t="";for(let i,a,s=0,r=me;e.charAt(0|s)||(r="=",s%1);t+=r.charAt(63&i>>8-s%1*8)){if((a=e.charCodeAt(s+=3/4))>255)throw null;i=i<<8|a}return t})(e);return ue(i,t)},fe=(e,t)=>(e=>{if("string"!=typeof e)throw null;let t=e.replace(/[=]+$/,"");if(t.length%4==1)throw null;let i="";for(let e,a,s=0,r=0;a=t.charAt(r++);~a&&(e=s%4?64*e+a:a,s++%4)&&(i+=String.fromCharCode(255&e>>(-2*s&6))))a=me.indexOf(a);return i})(ue(e,-t)),ye="famishs_userdata",_e={gameAccountToken:null},Ie=(e,t)=>{t=t||{};let i=Promise.create(),a=new XMLHttpRequest;for(let i in a.open(t.method||"get",e),t.headers)a.setRequestHeader(i,t.headers[i]);a.onload=()=>{i.resolve(s())},a.onerror=i.reject,a.send(t.body);let s=()=>{let e,t=[],i=[],r={};return a.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,((a,s,n)=>{t.push(s=s.toLowerCase()),i.push([s,n]),e=r[s],r[s]=e?e+","+n:n})),{ok:1==(a.status/200|0),status:a.status,statusText:a.statusText,url:a.responseURL,clone:s,text:()=>Promise.resolve(a.responseText),json:()=>Promise.resolve(a.responseText).then(JSON.parse),xml:()=>Promise.resolve(a.responseXML),blob:()=>Promise.resolve(new Blob([a.response])),arrayBuffer:()=>Promise.resolve(a.response),headers:{keys:()=>t,entries:()=>i,get:e=>r[e.toLowerCase()],has:e=>e.toLowerCase()in r}}};return i},we=(e,t={})=>{let i=Promise.create();return t.method="GET",Ie(e,t).then((function(e){if(!e.ok)return i.reject(e);e.text().then((e=>{if(e.charAt(0).includes(["[","{"]))try{i.resolve(JSON.parse(e))}catch(t){i.resolve(e)}else i.resolve(e)}))})).catch(i.reject),i},be=(e,t={},i={})=>{let a=Promise.create();return i.method="POST",t&&(i.body="object"==typeof t||Array.isArray(t)?JSON.stringify(t):t),i.headers||(i.headers={"content-type":"application/json"}),Ie(e,i).then((function(e){if(!e.ok)return a.reject(e);e.text().then((e=>{if(e.charAt(0).includes("[")||e.charAt(0).includes("{"))try{a.resolve(JSON.parse(e))}catch(t){a.resolve(e)}else a.resolve(e)}))})).catch(a.reject),a},Ae="https:"===globalThis.location.protocol,ve="/auth/check",De="gameAccountToken",Me=e=>{"string"!=typeof e&&(e=JSON.stringify(e));let t=[],i=Math.floor(Math.random()*(16^(Date.now()/1e9|0))*Math.PI),a=pe(e,i);return 0===t.length&&t.push(i,a),t};class xe extends Error{constructor(e){super(e),this.name="AccountServiceError"}}let Se,Ee={options:new class{constructor(){this.options=[{configuration_name:"Famishs.io Client Config",configuration_message:"Succesfully loaded Client Configuration!"},{name:"console",cmd_title:"Console Line limit",option_box:{max_lines:{value:600,type:"number"}}},{name:"render",cmd_title:"Rendering inGame elements",option_box:{minimap:{value:!0,type:"boolean"},leaderboard:{value:!0,type:"boolean"},delays:{value:!0,type:"boolean"},building_health:{value:!0,type:"boolean"},fire_particles:{value:!0,type:"boolean"}}}]}restoreDefault(){}get_value(e,t){return this.get_option(e).option_box[t].value}get_option(e){return this.options.find((t=>t.name==e))}set_option(e,t){if(t.length<3)return Ee.console.send_message("orangered","Error while setting Option","wrong option arguments, ex: .fireParticles enabled yes");let i=this.get_option(e);if(null==i)return Ee.console.send_message("orangered","Error while setting Option","wrong option name, ex: .fireParticles [optionName] [optionValue]");i.option_box[t[1]].value=this.parse_argument(i.option_box[t[1]],t[2]),Ee.console.send_message("limegreen",i.cmd_title,"value of that option was changed successfully!"),document.getElementById("consoleInput").value=""}parse_argument(e,t){switch(e.type){case"boolean":return"true"==t||"yes"==t;case"string":default:return String(t);case"number":return Number(t)}}},market:{opened:!1,tail:new class{constructor(){this.data=[]}get_take_bread(e,t){let i=e[0]/e[1]*100,a=Math.floor(e[2]*(i/20+1)/5);return Math.ceil(t/a)}update_item_prices(e){this.data=e;let t=this.data[0],i=this.data[1],a=this.data[2],s=this.data[3],r=document.getElementById("market_item_wood_count"),n=document.getElementById("market_item_stone_count"),o=document.getElementById("market_item_gold_count"),l=document.getElementById("market_item_diamond_count"),h=document.getElementById("market_item_amethyst_count");document.getElementById("bread_wood_number").innerHTML=Math.ceil(r.value/3),document.getElementById("bread_amethyst_number").innerHTML=this.get_take_bread(s,h.value),document.getElementById("bread_diamond_number").innerHTML=this.get_take_bread(a,l.value),document.getElementById("bread_gold_number").innerHTML=this.get_take_bread(i,o.value),document.getElementById("bread_stone_number").innerHTML=this.get_take_bread(t,n.value)}buy_item(e,t){Ee.networkClient.sendJSON([13,0,e,t])}on_enable(){this.cvs=document.getElementById("alo_shop_crnc"),this.ctx=this.cvs.getContext("2d")}render(){}}},marker:{x:void 0,y:void 0},chat:{body:null,elemt:null,send_message(e){e.length<=0||Ee.networkClient.sendJSON([14,e])}},autofeed:{state:!1,send_state(){Ee.autofeed.state=!Ee.autofeed.state,Ee.networkClient.sendJSON([15])}},bigmap:!1,interfacedBuildings:new class{constructor(){this.renderData=null}clear(){Ee.mouse.hovers.storage_hover=0,Ee.mouse.hovers.plus_hover=0,null!=this.renderData&&(this.renderData=null)}renderItemPlus(e,t,i){if(null!=this.renderData&&this.renderData.shouldRenderItemPlus){let a=!0;Ee.inventory.forEach(((s,r)=>{this.renderData.drawingItems.includes(s.item)&&(c.isInside({x:s.SlotManager.x+-30+44.5,y:s.SlotManager.y+-30-35,width:60,height:60})&&(Ee.mouse.onHover([1,s.item,this.renderData.renderEntity.id,Ee.keyboard.keyboard.is_shift()?1:0],"attach","plus_hover"),a=!1),s.SlotManager.renderPlus(i,t,e,r,0==a))})),a&&(Ee.mouse.hovers.plus_hover=h.AIR.Id)}}render(e,t,i){t.save();let a=!1,s=null,n=0,o=0,l=0;if(null!=this.renderData)switch(this.renderData.type){case 0:{let e=this.renderData.renderEntity.action;if(!e)return;if(s=Ee.spriteClient.getSprite(r.SIMPLE_ITEM_UI.ID,!0),n=.35,o=0==Ee.craftManager.craftables.length?115:30+90*(Math.floor(Ee.craftManager.craftables.length/5)+2),l=60,t.translate(o,l),i.drawImage(s,-s.width*(.5*n),-s.height*(.5*n),s.width*n,s.height*n),e[0][0]!=h.AIR.Id){let s=Ee.spriteClient.getItemSprite(e[0][0]);i.drawImage(s,-99.5,-49.5,95,95,!1),e[0][1]>0&&(t.save(),t.textAlign="right",i.drawText("x"+e[0][1],-10,30,"21px","white",!1),t.restore()),c.isInside({x:o+-99.5,y:l+-49.5,width:95,height:95})&&(a=!0,Ee.mouse.onHover([0,1,this.renderData.renderEntity.id],"attach","storage_hover"))}if(e[1][0]!=h.AIR.Id){let s=Ee.spriteClient.getItemSprite(e[1][0]);i.drawImage(s,5.5,-49.5,95,95,!1),e[1][1]>0&&(t.save(),t.textAlign="right",i.drawText("x"+e[1][1],90,30,"21px","white",!1),t.restore()),c.isInside({x:o+5.5,y:l+-49.5,width:95,height:95})&&(a=!0,Ee.mouse.onHover([0,2,this.renderData.renderEntity.id],"attach","storage_hover"))}a||(Ee.mouse.hovers.storage_hover=0),t.restore();break}case 1:{let e=this.renderData.renderEntity.action;if(!e)return;if(s=Ee.spriteClient.getSprite(r.ONE_ITEM_UI.ID,!0),n=.35,o=0==Ee.craftManager.craftables.length?115:30+90*(Math.floor(Ee.craftManager.craftables.length/5)+2),l=60,t.translate(o,l),i.drawImage(s,-s.width*(.5*n),-s.height*(.5*n),s.width*n,s.height*n),e[0][0]!=h.AIR.Id){let s=Ee.spriteClient.getItemSprite(e[0][0]);i.drawImage(s,-47.5,-49.5,95,95,!1),e[0][1]>0&&(t.save(),t.textAlign="right",i.drawText("x"+e[0][1],30,30,"21px","white",!1),t.restore()),c.isInside({x:o+-47.5,y:l+-49.5,width:95,height:95})&&(a=!0,Ee.mouse.onHover([0,1,this.renderData.renderEntity.id],"attach","storage_hover"))}a||(Ee.mouse.hovers.storage_hover=0),t.restore();break}case 3:{let e=this.renderData.renderEntity.action;if(!e)return;if(s=Ee.spriteClient.getSprite(r.TRIPLE_ITEM_UI.ID,!0),n=.35,o=0==Ee.craftManager.craftables.length?178.5:87.5+90*(Math.floor(Ee.craftManager.craftables.length/5)+2),l=60,t.translate(o,l),i.drawImage(s,-s.width*(.5*n),-s.height*(.5*n),s.width*n,s.height*n),e[0][0]!=h.AIR.Id){let s=Ee.spriteClient.getItemSprite(e[0][0]);i.drawImage(s,-159.5,-49.5,95,95,!1),e[0][1]>0&&(t.save(),t.textAlign="right",i.drawText("x"+e[0][1],-80,30,"21px","white",!1),t.restore()),c.isInside({x:o+-159.5,y:l+-49.5,width:95,height:95})&&(a=!0,Ee.mouse.onHover([0,1,this.renderData.renderEntity.id],"attach","storage_hover"))}if(e[1][0]!=h.AIR.Id){let s=Ee.spriteClient.getItemSprite(e[1][0]);i.drawImage(s,-57.5,-49.5,95,95,!1),e[1][1]>0&&(t.save(),t.textAlign="right",i.drawText("x"+e[1][1],22,30,"21px","white",!1),t.restore()),c.isInside({x:o+-57.5,y:l+-49.5,width:95,height:95})&&(a=!0,Ee.mouse.onHover([0,2,this.renderData.renderEntity.id],"attach","storage_hover"))}if(e[2][0]!=h.AIR.Id){let s=Ee.spriteClient.getItemSprite(e[2][0]);i.drawImage(s,68.5,-49.5,95,95,!1),e[2][1]>0&&(t.save(),t.textAlign="right",i.drawText("x"+e[2][1],148,30,"21px","white",!1),t.restore()),c.isInside({x:o+68.5,y:l+-49.5,width:95,height:95})&&(a=!0,Ee.mouse.onHover([0,3,this.renderData.renderEntity.id],"attach","storage_hover"))}a||(Ee.mouse.hovers.storage_hover=0),t.restore()}}t.restore(),this.renderItemPlus(e,t,i)}},loader:{progress:0,step:.01,step_count:1,load_menu_alpha:0,state:-1,wheel:{angle:0},update(e){switch(e.loader.wheel.angle+=.025,e.loader.wheel.angle>2*Math.PI&&(e.loader.wheel.angle=0),e.loader.state){case-1:e.loader.load_menu_alpha+=.02,e.loader.load_menu_alpha>=1&&(e.loader.load_menu_alpha=1,e.loader.state=0);break;case 0:e.loader.step+=.01*e.loader.step_count,e.loader.step_count+=Math.random()/10*5,e.loader.progress+=e.loader.step,e.loader.progress>=100&&(e.loader.progress=100,e.loader.state=1);break;case 1:e.loader.load_menu_alpha-=.02,e.loader.load_menu_alpha<=0&&(e.loader.load_menu_alpha=0,e.gameClient.render.scene=1,e.gameClient.render.onSceneChanged(),e.loader.state=2);break;case 2:e.loader.load_menu_alpha+=.02}}},nearest:{},menu:{title_animation:new n(!1,1,1.1,1,.025,.025),play_button:{update:!1,animation:new n(!0,-2,-2,0,10,10),count:0},server:{waiting:!1,angle:0,socket_link:"",timestamp:-1}},CLIENT_VERSION:22,MODE:0,LANGUAGE:"RU",LAG_DISTANCE:150,gameClient:new class{constructor(){this.playerList=[],this.entities=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this.intervals=[],this.serverWaiter=new K,this.socket=null,this.world=new V,this.inGame=!1,this.isMovable=!1,this.render=null,this.middleCanvas={x:0,y:0}}onPreInit(){let e={type:8,x:-400,y:200};e.angle=Math.PI/2,e.info=null,e.id=-1,Ee.camera.setup(),Ee.spriteClient.Initializate(),this.render=new oe,this.listen(),Ee.camera.cam.x=0,Ee.camera.cam.y=0,Ee.fakeEntities.push(new G(e))}onServerDisconnect(){this.playerList=[];for(let e=0;e<this.entities.length;e++)this.entities[e]=[];this.socket=null,this.world.clearWorld(),this.inGame=!1,this.isMovable=!1,this.isAttackable=!1,Ee.myPlayer.id=null,Ee.myPlayer.obj=null,Ee.inventory=new j(12)}onServerJoined(){this.isMovable=!0,this.isAttackable=!0,this.inGame=!0}renderInit(){this.render}setMiddleCanvas(e,t){this.middleCanvas.x=e,this.middleCanvas.y=t}restore_item_numbers(){let e=document.getElementById("market_item_wood_count"),t=document.getElementById("market_item_stone_count"),i=document.getElementById("market_item_gold_count"),a=document.getElementById("market_item_diamond_count"),s=document.getElementById("market_item_amethyst_count");e.value>=512&&(e.value=512),t.value>=512&&(t.value=512),i.value>=512&&(i.value=512),a.value>=512&&(a.value=512),s.value>=512&&(s.value=512),e.value<=2&&(e.value=3),t.value<=19&&(t.value=20),i.value<=15&&(i.value=16),a.value<=10&&(a.value=11),s.value<=4&&(s.value=5)}listen(){this.listen_elem(["delete_button_one","delete_button_all","delete_button_no","delete_button_recycle"],Ee.mouse.dropItem),document.getElementById("buy_wood_btn").addEventListener("click",(()=>{this.restore_item_numbers();let e=document.getElementById("market_item_wood_count").value;Ee.market.tail.buy_item(h.WOOD.Id,e)})),document.getElementById("buy_stone_btn").addEventListener("click",(()=>{this.restore_item_numbers();let e=document.getElementById("market_item_stone_count").value;Ee.market.tail.buy_item(h.STONE.Id,e)})),document.getElementById("buy_gold_btn").addEventListener("click",(()=>{this.restore_item_numbers();let e=document.getElementById("market_item_gold_count").value;Ee.market.tail.buy_item(h.GOLD.Id,e)})),document.getElementById("buy_diamond_btn").addEventListener("click",(()=>{this.restore_item_numbers();let e=document.getElementById("market_item_diamond_count").value;Ee.market.tail.buy_item(h.DIAMOND.Id,e)})),document.getElementById("buy_amethyst_btn").addEventListener("click",(()=>{this.restore_item_numbers();let e=document.getElementById("market_item_amethyst_count").value;Ee.market.tail.buy_item(h.AMETHYST.Id,e)})),document.getElementById("quit_market").addEventListener("click",(()=>{document.getElementById("shop_market").style.display="none",Ee.market.opened=!1})),Ee.keyboard.Listen(),Ee.mouse.Listen(),Ee.chat.elemt=document.getElementById("chat_input"),Ee.chat.body=document.getElementById("chat_block")}listen_elem(e,t=(()=>{})){if(!(t instanceof Function))throw Error("Unexpected click callback");if(e instanceof Array)for(let i=0;i<e.length;i++)document.getElementById(e[i]).onclick=()=>{t(e[i],Ee.mouse)};else document.getElementById(e).onclick=()=>{t(e,Ee.mouse)}}setElementVisible(e,t=!1){document.getElementById(e).style.visibility=t?"visible":"hidden"}},networkClient:new class{constructor(){this.websocket=null}connect(){console.log("[Famishs/Connector] Socket state changed");let e="ws://localhost:80/srv",t=document.getElementById("servers");Ee.MODE==ke.PRODUCTION?e=window.proxyAPI.servers[Number(t.value)].socket_link:console.log("[Famishs/CLIENT] Loading game as Development Mode"),this.websocket=new WebSocket(e),this.websocket.binaryType="arraybuffer",this.websocket.onclose=this._close.bind(this),this.websocket.onerror=this._error.bind(this),this.websocket.onmessage=this._data.bind(this),this.websocket.onopen=this._open.bind(this)}sendJSON(e){this.websocket.send(JSON.stringify(e))}_open(){console.log("[Famishs/Connector] Socket connected")}_close(){s.AutoRespawn&&Ee.networkClient.connect(),Ee.delayManager.delays=[],c.clear_building_data(),Ee.menu.server.waiting?K.on_failed("Unable to join server!"):Ee.ServerMessageManager.onMessage("You died"),console.log("[Famishs/Connector] Socket disconnected"),Ee.gameClient.render.scene=1,Ee.gameClient.onServerDisconnect(),Ee.gameClient.render.onSceneChanged(),Ee.console.state=!1,Ee.chat.body.style.display="none",Ee.gameClient.inGame=!1,Ee.autofeed.state=!1,document.getElementsByClassName("consoleWrapper")[0].style.display="none",c.clear_team()}_error(){}_data(e){try{let t=msgpack.decode(new Uint8Array(e.data));ge.onPacketReceive(t,this)}catch(e){console.log(e)}}},spriteClient:new class{constructor(){this.sprites={},this.itemSprites={},this.ui_sprites={}}createImage(e){let t=new Image;return t.src=e,t}Initializate(){Object.keys(r).forEach(((e,t)=>{this.constructSprite(e,!0)})),this.setItemSprite(h.AIR.Id,"inv_slot"),this.setItemSprite(h.WOOD.Id,"inv_wood"),this.setItemSprite(h.FIRE.Id,"inv_firepit"),this.setItemSprite(h.STONE.Id,"inv_stone"),this.setItemSprite(h.GOLD.Id,"inv_gold"),this.setItemSprite(h.DIAMOND.Id,"inv_diamond"),this.setItemSprite(h.BONE.Id,"inv_bones"),this.setItemSprite(h.RAW_MEAT.Id,"inv_rawmeat"),this.setItemSprite(h.COOKED_MEAT.Id,"inv_cookmeat"),this.setItemSprite(h.WOLF_FUR.Id,"inv_wolf_leather"),this.setItemSprite(h.RABBIT_FUR.Id,"inv_rabbit_leather"),this.setItemSprite(h.CORD.Id,"inv_strings"),this.setItemSprite(h.BERRY.Id,"inv_berry"),this.setItemSprite(h.WHEAT.Id,"inv_wheat"),this.setItemSprite(h.BERRY_SEED.Id,"inv_berry_seed"),this.setItemSprite(h.WHEAT_SEED.Id,"inv_wheat_seed"),this.setItemSprite(h.FLOUR.Id,"inv_flour"),this.setItemSprite(h.BREAD.Id,"inv_bread"),this.setItemSprite(h.BREAD_OVEN.Id,"inv_bread_oven"),this.setItemSprite(h.BOOK.Id,"inv_book"),this.setItemSprite(h.WOOD_PICKAXE.Id,"inv_pickaxe_wood"),this.setItemSprite(h.STONE_PICKAXE.Id,"inv_pickaxe_stone"),this.setItemSprite(h.GOLD_PICKAXE.Id,"inv_pickaxe_gold"),this.setItemSprite(h.DIAMOND_PICKAXE.Id,"inv_pickaxe_diamond"),this.setItemSprite(h.AMETHYST_PICKAXE.Id,"inv_pickaxe_amethyst"),this.setItemSprite(h.PLOT.Id,"inv_plot"),this.setItemSprite(h.WOOD_SWORD.Id,"inv_sword_wood"),this.setItemSprite(h.STONE_SWORD.Id,"inv_sword_stone"),this.setItemSprite(h.GOLD_SWORD.Id,"inv_sword_gold"),this.setItemSprite(h.DIAMOND_SWORD.Id,"inv_sword_diamond"),this.setItemSprite(h.AMETHYST_SWORD.Id,"inv_sword_amethyst"),this.setItemSprite(h.WOOD_SPEAR.Id,"inv_spear_wood"),this.setItemSprite(h.STONE_SPEAR.Id,"inv_spear_stone"),this.setItemSprite(h.GOLD_SPEAR.Id,"inv_spear_gold"),this.setItemSprite(h.DIAMOND_SPEAR.Id,"inv_spear_diamond"),this.setItemSprite(h.AMETHYST_SPEAR.Id,"inv_spear_amethyst"),this.setItemSprite(h.WOOD_HELMET.Id,"inv_helmet_wood"),this.setItemSprite(h.STONE_HELMET.Id,"inv_helmet_stone"),this.setItemSprite(h.GOLD_HELMET.Id,"inv_helmet_gold"),this.setItemSprite(h.DIAMOND_HELMET.Id,"inv_helmet_diamond"),this.setItemSprite(h.AMETHYST_HELMET.Id,"inv_helmet_amethyst"),this.setItemSprite(h.AMETHYST.Id,"inv_amethyst"),this.setItemSprite(h.STONE_HAMMER.Id,"inv_hammer_stone"),this.setItemSprite(h.GOLD_HAMMER.Id,"inv_hammer_gold"),this.setItemSprite(h.DIAMOND_HAMMER.Id,"inv_hammer_diamond"),this.setItemSprite(h.AMETHYST_HAMMER.Id,"inv_hammer_amethyst"),this.setItemSprite(h.WALL_WOOD.Id,"inv_wall_wood"),this.setItemSprite(h.WALL_STONE.Id,"inv_wall_stone"),this.setItemSprite(h.WALL_GOLD.Id,"inv_wall_gold"),this.setItemSprite(h.WALL_DIAMOND.Id,"inv_wall_diamond"),this.setItemSprite(h.WALL_AMETHYST.Id,"inv_wall_amethyst"),this.setItemSprite(h.SPIKE_WOOD.Id,"inv_spike_wood"),this.setItemSprite(h.SPIKE_STONE.Id,"inv_spike_stone"),this.setItemSprite(h.SPIKE_GOLD.Id,"inv_spike_gold"),this.setItemSprite(h.SPIKE_DIAMOND.Id,"inv_spike_diamond"),this.setItemSprite(h.SPIKE_AMETHYST.Id,"inv_spike_amethyst"),this.setItemSprite(h.STONE_PITCHFORK.Id,"inv_pitchfork_stone"),this.setItemSprite(h.WRENCH.Id,"inv_wrench"),this.setItemSprite(h.DOOR_WOOD.Id,"inv_door_wood"),this.setItemSprite(h.DOOR_STONE.Id,"inv_door_stone"),this.setItemSprite(h.DOOR_GOLD.Id,"inv_door_gold"),this.setItemSprite(h.DOOR_DIAMOND.Id,"inv_door_diamond"),this.setItemSprite(h.DOOR_AMETHYST.Id,"inv_door_amethyst"),this.setItemSprite(h.WARM_HELMET1.Id,"inv_hat_1"),this.setItemSprite(h.WARM_HELMET2.Id,"inv_hat_2"),this.setItemSprite(h.COMPRESSOR.Id,"inv_compressor"),this.setItemSprite(h.FURNACE.Id,"inv_furnace"),this.setItemSprite(h.WORKBENCH.Id,"inv_workbench"),this.setItemSprite(h.CHEST.Id,"inv_chest"),this.setItemSprite(h.BANDAGE.Id,"inv_bandage"),this.setItemSprite(h.TOTEM.Id,"inv_totem"),this.setUISprite(q.SOCIAL_DISCORD_BUTTON_IN,"/menu/Button_Discord_Hover"),this.setUISprite(q.SOCIAL_DISCORD_BUTTON_OUT,"/menu/Button_Discord"),this.setUISprite(q.SOCIAL_YOUTUBE_BUTTON_IN,"/menu/Button_Youtube_Hover"),this.setUISprite(q.SOCIAL_YOUTUBE_BUTTON_OUT,"/menu/Button_Youtube"),this.setUISprite(q.SOCIALS_BACKGROUND,"/menu/Social_Under"),this.setUISprite(q.PLAY_BUTTON_IN,"/menu/Button_Play"),this.setUISprite(q.PLAY_BUTTON_OUT,"/menu/Button_Play_Hover"),this.setUISprite(q.SERVERS_SELECT_BUTTON_IN,"/menu/Button_Server_Hover"),this.setUISprite(q.SERVERS_SELECT_BUTTON_OUT,"/menu/Button_Server"),this.setUISprite(q.MENU_CATEGORY_PLAY,"/menu/StartAGame"),this.setUISprite(q.MENU_CATEGORY_PROFILE,"/menu/Profile"),this.setUISprite(q.MENU_CATEGORY_SHOP,"/menu/Shop"),this.setUISprite(q.MENU_CATEGORY_LEADERBOARD,"/menu/Leaderboard"),this.setUISprite(q.MENU_CATEGORY_LEADERBOARD_IN,"/menu/Leaderboard_hover"),this.setUISprite(q.CHANGELOG,"/menu/Commands_Changelogs_Under"),this.setUISprite(q.PLAY_BACKGROUND,"/menu/Menu_Under"),this.setUISprite(q.LOGO,"/menu/Logo"),this.setUISprite(q.TV_BODY,"/menu/FeaturedVideos_Upper"),this.setUISprite(q.TV_FEAUTED_VIDEOS_UNDER,"/menu/FeaturedVideos_Under"),this.setUISprite(q.LOADING_BACKGROUND,"/loading/Background"),this.setUISprite(q.LOADING_BAR_LINE,"/loading/bar_line"),this.setUISprite(q.LOADING_BAR_UP,"/loading/bar_up"),this.setUISprite(q.LOADING_BG_BAR,"/loading/bg_bar"),this.setUISprite(q.LOADING_TITLE,"/loading/title"),this.setUISprite(q.LOADING_WHEEL,"/loading/wheel")}setUISprite(e,t){let i=this.createImage("/img/ui"+t+".png");this.ui_sprites[e]=i}getUISprite(e){return this.ui_sprites[e]}setItemSprite(e,t){let i=this.createImage("/img/items/icons/"+t+".png");this.itemSprites[e]=i}getItemSprite(e=h.AIR.Id){return this.itemSprites[e]}getSprite(e){return this.sprites[e+"_DAY"]}constructSprite(e){this.sprites[r[e].ID+"_DAY"]=this.createImage(r[e].URL.DAY)}},nickname:"",token:0,debugMode:!1,debugger:new class{constructor(){this.player_radius=32}update(e,t,i,a){for(let e=0;e<Ee.gameClient.world.objects.length;e++){let i=Ee.gameClient.world.objects[e];t.save(),t.beginPath(),t.lineWidth=5,t.arc(i.x+Ee.camera.cam.x+3,i.y+Ee.camera.cam.y,i.size,0,2*Math.PI),t.stroke(),t.restore()}for(let e=0;e<Ee.gameClient.entities[0].length;e++){let i=Ee.gameClient.entities[0][e];t.beginPath(),t.lineWidth=5,t.arc(i.x+Ee.camera.cam.x,i.y+Ee.camera.cam.y,this.player_radius,0,2*Math.PI),t.stroke()}for(let e=0;e<Ee.gameClient.entities[1].length;e++){let i=Ee.gameClient.entities[1][e];t.beginPath(),t.lineWidth=5,t.arc(i.x+Ee.camera.cam.x,i.y+Ee.camera.cam.y,60,0,2*Math.PI),t.stroke()}for(let e=0;e<Ee.gameClient.entities[2].length;e++){let i=Ee.gameClient.entities[2][e];t.beginPath(),t.lineWidth=5,t.arc(i.x+Ee.camera.cam.x,i.y+Ee.camera.cam.y,30,0,2*Math.PI),t.stroke()}for(let e=0;e<Ee.gameClient.entities[3].length;e++){let i=Ee.gameClient.entities[3][e];t.beginPath(),t.lineWidth=5,t.arc(i.x+Ee.camera.cam.x,i.y+Ee.camera.cam.y,30,0,2*Math.PI),t.stroke()}}},craftManager:new class{constructor(){this.crafts=[],this.craftables=[],this.in_craft={itemId:0,time:-1,timestamp:-1},this.last_states={lastIsFire:!1,lastIsWorkbench:!1,lastIsWater:!1}}on_state_update(){Ee.myPlayer.states.isInFire!=this.last_states.lastIsFire&&(this.last_states.lastIsFire=Ee.myPlayer.states.isInFire,this.get_craftables()),Ee.myPlayer.states.isInWorkbench!=this.last_states.lastIsWorkbench&&(this.last_states.lastIsWorkbench=Ee.myPlayer.states.isInWorkbench,this.get_craftables()),Ee.myPlayer.states.isInWater!=this.last_states.lastIsWater&&(this.last_states.lastIsWater=Ee.myPlayer.states.isInWater,this.get_craftables())}set_in_craft(e,t){this.in_craft.itemId=e,this.in_craft.time=t,this.in_craft.timestamp=+new Date}on_craft_finished(){this.in_craft.itemId=0,this.in_craft.time=-1,this.in_craft.timestamp=-1,this.get_craftables()}on_crafts_updated(){let e=[];for(let t=0;t<this.crafts.length;t++)e.push({id:this.crafts[t][0],items:this.crafts[t][1],priority:this.crafts[t][2],time:this.crafts[t][3],instances:this.crafts[t][4]});this.crafts=e}get_craft_by_id(e=0){return this.crafts.find((t=>t.id==e))}get_craftables(){if(0==this.in_craft.itemId){this.craftables=[];for(let e=0;e<this.crafts.length;e++)this.is_craft_allowed(this.crafts[e].id)&&this.craftables.push(this.crafts[e])}}is_craft_allowed(e=0){let t=this.get_craft_by_id(e);if(!t)return!1;let i=Ee.inventory,a=1==t.instances[1],s=1==t.instances[0],r=1==t.instances[2];if(a&&!Ee.myPlayer.states.isInFire||r&&!Ee.myPlayer.states.isInWater||s&&!Ee.myPlayer.states.isInWorkbench)return!1;for(let e=0;e<t.items.length;e++){let a=i.getCount(t.items[e][0]);if(0==a||a<t.items[e][1])return!1}return!0}},buildingsManager:new class{constructor(){this.current_building=0,this.lastBuild=-1,this.G_MODE=!1}on_build_response(e){1==e&&(this.current_building=0,this.lastBuild=+new Date)}on_build_action(e,t){switch(e){case 2:return this.G_MODE=!this.G_MODE;case 1:if(+new Date-this.lastBuild>=1e3){let e=Ee.myPlayer.obj;this.G_MODE,Ee.networkClient.sendJSON([10,this.current_building,this.G_MODE,h.fromId(this.current_building).offset_angle,e._angle])}break;case 0:this.current_building==t?this.current_building=0:this.current_building=t}}},accountService:new class{constructor(){this.url=(Ae?"https:":"http:")+"//51.75.76.191:3000",this.storage=(()=>{let e="localStorage"in window&&window.localStorage instanceof Storage?window.localStorage:void 0;if(!e)throw Error("Can't resolve localStorage");return(()=>{if(!e||!e.getItem(ye)){let t=null;try{t=pe(JSON.stringify(_e),743)}catch(e){throw e}finally{t&&"string"==typeof t&&e.setItem(ye,t)}}})(),{get(t){let i=e&&e.getItem(ye);if(!i)throw Error("Can't resolve store");let a=!1;try{a=fe(i,743)}catch(e){throw e}finally{if(a&&"string"==typeof a){let e=!1;try{e=JSON.parse(a)}catch(e){throw e}finally{if(e&&"object"==typeof e)return t in e?e[t]:null}}}},set(t,i){let a=e&&e.getItem(ye);if(!a)throw Error("Can't resolve store");let s=!1;try{s=fe(a,743)}catch(e){throw e}finally{if(s&&"string"==typeof s){let a=null,r=!1;try{r=JSON.parse(s)}catch(e){throw e}finally{if(r&&"object"==typeof r){t in r?r[t]!==i&&(r[t]=i):r[t]=i;try{a=pe(JSON.stringify(r),743)}catch(e){throw e}finally{a&&"string"==typeof a&&e.setItem(ye,a)}}}}}},clear(){let t=e&&e.getItem(ye);if(!t)throw Error("Can't resolve store");let i=!1;try{i=fe(t,743)}catch(e){throw e}finally{if(i&&"string"==typeof i){let t=null,a=!1;try{a=JSON.parse(i)}catch(e){throw e}finally{if(a&&"object"==typeof a)for(let e in a)e in _e?a[e]=e in _e?_e[e]:null:delete a[e]}try{t=pe(JSON.stringify(a),743)}catch(e){throw e}finally{t&&"string"==typeof t&&e.setItem(ye,t)}}}},remove(t){let i=e&&e.getItem(ye);if(!i)throw Error("Can't resolve store");let a=!1;try{a=fe(i,743)}catch(e){throw e}finally{if(a&&"string"==typeof a){let i=null,s=!1;try{s=JSON.parse(a)}catch(e){throw e}finally{if(s&&"object"==typeof s){if(!(t in s)||t in _e)return;delete s[t]}}try{i=pe(JSON.stringify(s),743)}catch(e){throw e}finally{i&&"string"==typeof i&&e.setItem(ye,i)}}}}}})(),this.dataValidation={login:{user:"string",password:"string"},register:{email:"string",username:"string",password:"string"}}}get token(){return this.storage.get(De)}_validateData(e,t={}){if("string"!=typeof e||!this.dataValidation[e]||0===Object.keys(t).length)return;let i=!0;for(let[a,s]of Object.entries(t))if(this.dataValidation[e][a]&&typeof t[a]!==this.dataValidation[e][a]){i=!1;break}return i}async login(e,t={}){if("function"==typeof e&&"string"!=typeof this.storage.get(De)&&this._validateData("login",t)){let i=await be(this.url+"/auth/login",Me(t),{"content-type":"application/json"});i&&(e(i),i.ok&&this.storage.set(De,i.data.account_access_token))}}async register(e,t={}){if("function"==typeof e&&"string"!=typeof this.storage.get(De)&&this._validateData("register",t)){let i=await be(this.url+"/auth/register",Me(t),{"content-type":"application/json"});i&&e(i)}}async checkData(e){if("function"!=typeof e)return;let t=this.storage.get(De);if("string"==typeof t){let i={"content-type":"application/json"};i.authorization="Bearer "+t;let a=await we(this.url+ve,i);if("string"==typeof a)try{a=JSON.parse(a)}catch(e){throw xe("Cannot parse response properly: "+e)}finally{e(a),a.ok||this.storage.set(De,null)}}}async initialize(e){if("function"!=typeof e)return;let t=this.storage.get(De);if("string"==typeof t){let i={"content-type":"application/json"};i.authorization="Bearer "+t;let a={};a.headers=i;let s=await we(this.url+ve,a);if("string"==typeof s)try{s=JSON.parse(s)}catch(e){throw xe("Cannot parse response properly: "+e)}finally{e(s),s.ok||this.storage.set(De,null)}}}},myPlayer:{id:0,bandage_heals:0,obj:null,states:{isInFire:!1,isInWorkbench:!1,isInWater:!1},totem_data:{players:null,leader:-1,entity:null}},keyboard:new class{constructor(){this.keyboard=new F,this.Direction=0,this.previous=-1,this.lastUp=-1}reset(){this.Direction=0,this.previous=0,this.keyboard=new F}Listen(){document.addEventListener("keydown",(e=>{if("flex"!=Ee.chat.body.style.display&&Ee.gameClient.inGame){if(Ee.console.state)return this.keyboard.down(e);this.keyboard.down(e),this.movement_()}})),document.addEventListener("keyup",(e=>{let t=-1;if(Ee.gameClient.inGame&&(27==e.which&&(Ee.console.state&&(Ee.console.state=!1,document.getElementsByClassName("consoleWrapper")[0].style.display="none"),"flex"==Ee.chat.body.style.display&&(Ee.chat.body.style.display="none")),13==e.which&&("flex"==Ee.chat.body.style.display?(Ee.chat.body.style.display="none",Ee.chat.send_message(Ee.chat.elemt.value),Ee.chat.elemt.value=""):Ee.console.state||(Ee.chat.body.style.display="flex",Ee.chat.elemt.focus())),"flex"!=Ee.chat.body.style.display)){if(this.keyboard.is_o()&&!$(".consoleInput").is(":focus")){let e=document.getElementsByClassName("consoleWrapper")[0],t="none"==e.style.display;Ee.console.state=t,e.style.display=0==t?"none":"flex",t&&document.getElementById("consoleInput").focus()}if(Ee.console.state)return this.keyboard.up(e);switch(this.keyboard.is_m()&&(Ee.bigmap=!Ee.bigmap),this.keyboard.is_r()&&Ee.autofeed.send_state(),this.keyboard.is_g()&&Ee.buildingsManager.on_build_action(2),e.which){case 49:case 48:t=0;break;case 50:t=1;break;case 51:t=2;break;case 52:t=3;break;case 53:t=4;break;case 54:t=5;break;case 55:t=6;break;case 56:t=7;break;case 57:t=8;break;default:t=-1}if(this.lastUp=+new Date,-1!=t&&Ee.craftManager.in_craft.itemId==h.AIR.Id){let i=Ee.inventory.slots[t];if(i.item!=h.AIR.Id){let t=h.fromId(i.item);if(t&&t.is_building)return Ee.buildingsManager.on_build_action(0,i.item),this.keyboard.up(e),this.movement_();Ee.networkClient.sendJSON([6,i.item])}}this.keyboard.up(e),this.movement_()}}))}movement_(e){if(Ee.gameClient.inGame&&Ee.gameClient.isMovable){var t=0;this.keyboard.is_left()&&(t|=1),this.keyboard.is_right()&&(t|=2),this.keyboard.is_bottom()&&(t|=4),this.keyboard.is_top()&&(t|=8),this.previous!=t&&Ee.networkClient.sendJSON([1,t]),this.previous=t}}},mouse:new class{constructor(){this.mouse={oldX:0,oldY:0,x:0,y:0},this.mouseAngle=0,this.oldAngle=1,this.angle=0,this.delays={itemAction:-1,craftAction:-1,dropAction:-1,angleSend:-1,attackSend:-1},this.pre_states={prepareToDown:!1,startedDown:0},this.states={isDown:!1,isAttacking:!1},this.abilities={isAttackable:!0,isClickable:!0},this.hovers={item_inventory:0,craft_inventory:0,item_drop:0,menu_button:0,storage_hover:0,plus_hover:0,shop_button:0,totem_button:0,minimap:0}}reset(){Object.keys(this.hovers).forEach(((e,t)=>{this.hovers[e]=0})),this.mouse={oldX:0,oldY:0,x:0,y:0},this.mouseAngle=0,this.oldAngle=1,this.angle=0,this.delays={itemAction:-1,craftAction:-1,dropAction:-1,angleSend:-1,attackSend:-1},this.pre_states={prepareToDown:!1,startedDown:0},this.states={isDown:!1,isAttacking:!1},this.abilities={isAttackable:!0,isClickable:!0}}onmouseup(){this.pre_states.prepareToDown=!1,this.states.isDown=!1,this.states.isAttacking=!1,this.startedAttack=!1,(()=>{if(Ee.gameClient.inGame)for(let e in Ee.inventory.slots)if(Ee.inventory.slots[e].SlotManager.isDrag){let t=Ee.inventory.slots[e].SlotManager;for(let i in Ee.inventory.slots){let a=Ee.inventory.slots[i].SlotManager,s={};if(s.x=a.x,s.y=a.y,s.width=a.width/2,s.height=a.height/2,Z(s)&&a.index!=t.index){if(0!=a.item){let t=Ee.inventory.slots[e],a=Ee.inventory.slots[i];Ee.inventory.slots[e]=a,Ee.inventory.slots[i]=t}}else t.drop()}}})()}Listen(){document.addEventListener("mousemove",(e=>{this.updatePosition(e),this.pre_states.prepareToDown&&+new Date-this.pre_states.startedDown>20&&(this.states.isDown=!0,this.pre_states.prepareToDown=!1)})),document.addEventListener("mousedown",(e=>{if(Ee.console.state)return this.onmouseup();this.send_attack(e)}),!1),document.addEventListener("mouseup",(e=>{if(1==Ee.gameClient.render.scene&&this.updateMenu(),Ee.console.state)return this.onmouseup();this.send_attack(e),this.pre_states.prepareToDown&&Ee.craftManager.in_craft.itemId==h.AIR.Id&&this.onItemClick(e),this.onmouseup()}),!1),document.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1)}updateMenu(){switch(this.hovers.menu_button){case q.PLAY_BUTTON_OUT:Ee.menu.play_button.update=!0,Ee.menu.server.waiting||(Ee.menu.server.waiting=!0,Ee.menu.server.timestamp=+new Date,Ee.networkClient.connect());break;case q.SOCIAL_DISCORD_BUTTON_OUT:window.open("https://discord.gg/bcKyxkcAKT");break;case q.SOCIAL_YOUTUBE_BUTTON_OUT:window.open("https://www.youtube.com/@Famishs/featured");break;case q.MENU_CATEGORY_LEADERBOARD:window.open("http://famishs.io/leaderboard.html","_blank").focus()}}minimapClick(){Ee.marker.x=40*(this.mouse.x-(window.innerWidth-255)-10),Ee.marker.y=40*(this.mouse.y-(window.innerHeight-255)-10),Ee.marker.ox=this.mouse.x-(window.innerWidth-255)-10,Ee.marker.oy=this.mouse.y-(window.innerHeight-255)-10,this.hovers.minimap=0}totemClick(){if(Ee.myPlayer.totem_data&&Ee.myPlayer.totem_data.players){let e=document.getElementById("team_box");e.style.display="none"==e.style.display?"inline-block":"none"}else Ee.networkClient.sendJSON([16,1,Ee.myPlayer.totem_data.entity.id]);this.hovers.totem_button=0}send_attack(e){if(Ee.gameClient.inGame&&this.abilities.isClickable&&Ee.craftManager.in_craft.itemId==h.AIR.Id)if("mousedown"==e.type){if(this.isClickOnUI(e))return this.pre_states.prepareToDown=!0,this.pre_states.startedDown=+new Date,this.downevX=this.evX,this.downevY=this.evY;this.isBreadClick()&&(Ee.market.opened=!Ee.market.opened,document.getElementById("shop_market").style.display=Ee.market.opened?"inline":"none"),!(this.isBreadClick()||this.isStorageClick()||this.isPlusClick()||this.isInventoryClick()||this.isCraftClick()||0!=Ee.buildingsManager.current_building||this.isTotemButtonClick()||this.isMinimapClick())&&this.abilities.isAttackable&&(this.delays.attackSend=Date.now(),this.states.isAttacking=!0,Ee.networkClient.sendJSON([4,this.angle.toFixed(2)]))}else{if(this.isMinimapClick()&&this.minimapClick(),this.isTotemButtonClick()&&this.totemClick(),this.isStorageClick()&&0==Ee.buildingsManager.current_building&&(Ee.networkClient.sendJSON([12,this.hovers.storage_hover]),this.restoreBuilding()),this.isPlusClick()&&0==Ee.buildingsManager.current_building&&(Ee.networkClient.sendJSON([12,this.hovers.plus_hover]),this.restoreBuilding()),this.isInventoryClick()||this.isCraftClick()||0==Ee.buildingsManager.current_building||Ee.buildingsManager.on_build_action(1),!this.states.isAttacking)return;this.states.isAttacking=!1,Ee.networkClient.sendJSON([5])}}restoreBuilding(){Ee.buildingsManager.current_building=0,this.hovers.item_inventory=0}onItemClick(e){if(3==e.which){if(this.isInventoryClick()&&this.isItemDropAllowed())return this.hovers.item_drop=this.hovers.item_inventory,document.getElementById("del_item").src=Ee.spriteClient.getItemSprite(this.hovers.item_inventory).src,Ee.gameClient.setElementVisible("delete_info",!0),void(this.hovers.item_inventory=0)}else{if(this.isInventoryClick()&&this.isInventoryClickAllowed())return h.fromId(this.hovers.item_inventory).is_building?Ee.buildingsManager.on_build_action(0,this.hovers.item_inventory):(this.updateDelay("itemAction"),Ee.buildingsManager.current_building!=h.AIR.Id&&(Ee.buildingsManager.current_building=0),Ee.networkClient.sendJSON([6,this.hovers.item_inventory]),void(this.hovers.item_inventory=0));this.isCraftClick()&&this.isCraftClickAllowed()&&(this.updateDelay("craftAction"),66!=Ee.myPlayer.obj.right&&Ee.networkClient.sendJSON([6,66]),Ee.networkClient.sendJSON([6,this.hovers.craft_inventory,1]),this.hovers.item_inventory=0)}}isMinimapClick(){return this.hovers.minimap}isTotemButtonClick(){return this.hovers.totem_button}isStorageClick(){return this.hovers.storage_hover!=h.AIR.Id}isPlusClick(){return this.hovers.plus_hover!=h.AIR.Id}isInventoryClick(){return this.hovers.item_inventory!=h.AIR.Id}isCraftClick(){return this.hovers.craft_inventory!=h.AIR.Id}isBreadClick(){return this.hovers.shop_button!=h.AIR.Id}dropItem(e=null,t){if(c.clear_building_data(),t.updateDelay("dropAction"),null!=e){let i=e.split("_"),a="one"==i[2]?1:"all"==i[2]?-1:"recycle"==i[2]?-2:-3;s.AutoRecycle.id=t.hovers.item_drop,Ee.gameClient.setElementVisible("delete_info",!1),-3!=a&&(Ee.networkClient.sendJSON([9,t.hovers.item_drop,a]),t.hovers.item_drop=h.AIR.Id)}}updateMouse(){if(!Ee.gameClient.inGame)return;let e=Math.atan2(Ee.camera.cam.y+Ee.myPlayer.obj.y-this.evY,Ee.camera.cam.x+Ee.myPlayer.obj.x-this.evX);e=e.map(-Math.PI,Math.PI,0,360)*Math.PI/180,Ee.abc=e/4,this.oldAngle=this.angle,this.angle=e,Date.now()-this.delays.angleSend>=70&&Number(this.oldAngle.toFixed(2))!=Number(this.angle.toFixed(2))&&(s.Aimbot.enable||s.AnimalAimbot.enable||Ee.networkClient.sendJSON([2,e.toFixed(2)]),this.delays.angleSend=Date.now())}updatePosition(e){c.setCursor(0!=this.hovers.craft_inventory||0!=this.hovers.item_drop||0!=this.hovers.item_inventory||0!=this.hovers.menu_button||0!=this.hovers.storage_hover||0!=this.hovers.plus_hover),this.mouse.oldX=this.mouse.x,this.mouse.oldY=this.mouse.y,this.mouse.x=e.pageX,this.mouse.y=e.pageY,this.evX=e.x,this.evY=e.y}isDown(){return this.states.isDown}onHover(e,t,i){switch(t){case"remove":e==this.hovers[i]&&(this.hovers[i]=h.AIR.Id);break;case"attach":this.hovers[i]=e}}difference(e,t){return Math.abs(e,t)}isClickOnUI(e){return 3!==e.which&&this.dragging,this.hovers.item_inventory!=h.AIR.Id||this.hovers.craft_inventory!=h.AIR.Id}isItemDropAllowed(){return Date.now()-this.delays.dropAction>100}isInventoryClickAllowed(){return Date.now()-this.delays.itemAction>100}isCraftClickAllowed(){return Date.now()-this.delays.craftAction>80}updateDelay(e=null){if(!e)throw SyntaxError("Unrecognized updateDelay");this.delays[e]=Date.now()}},InvEvents:{drag:0},gauges:{animation:{food:new n(!1,.6,.6,0,2,1),health:new n(!1,.6,.6,0,2,1),cold:new n(!1,.6,.6,0,2,1)},values:{health:new le(200,0,200),food:new le(200,0,200),cold:new le(200,0,200)}},delayManager:new class{constructor(){this.delays=[]}on_delay(e){let t=e[0],i=e[1];this.delays.push([t,+new Date,i])}disposeDelay(e){let t=this.delays.filter((t=>t!=e));this.delays=t}},ServerMessageManager:new class{constructor(){this.messages=[],this.animation=new n(!0,0,1,0,5,5),this.isUpdate=!1,this.timeout=-1,this.messageId=0,this.loop=0,this.timestamp=Date.now()}onMessage(e="Unknown message"){let t={};t.message=e,t.timestamp=-1,this.messages.push(t)}rawShift(){this.messages.shift(),this.loop=0,this.messages.length>0&&(this.messages[0].timestamp=Date.now())}updateMessages(){if(this.messages.length>0){let e=this.messages[0];if(-1==e.timestamp)return e.timestamp=Date.now(),void(this.isUpdate=!0);Date.now()-e.timestamp>4e3&&(this.messages.shift(),this.messages.length>0&&(e.timestamp=Date.now()))}}},inventory:new j(12),fakeDayCycle:!0,fakeWorld:[{type:"FLOWER1",x:692,y:76,width:55,height:51},{type:"SMALL_BUSH1",x:-659,y:50,width:58,height:55},{type:"GRASS4",x:1011,y:266,width:614,height:399},{type:"GRASS6",x:-328,y:-421,width:260,height:210},{type:"GRASS1",x:-593,y:149,width:263,height:207},{type:"GRASS3",x:-23,y:295,width:285,height:210},{type:"GRASS5",x:599,y:-235,width:296,height:210},{type:"TREE9",x:-255,y:-255,width:253,height:273},{type:"STONE2",x:540,y:36,width:280,height:300},{type:"STONE1",x:455,y:281,width:180,height:200},{type:"STONE0",x:-705,y:374,width:330,height:350},{type:"STONE2",x:189,y:-450,width:300,height:330},{type:"TREE9",x:-738,y:-195,width:253,height:276},{type:"TREE4",x:-566,y:-56,width:611,height:273},{type:"TREE2",x:420,y:-354,width:220,height:515},{type:"STONE0",x:0,y:354,width:165,height:175},{type:"STONE0",x:0,y:254,width:165,height:175},{type:"STONE0",x:0,y:154,width:165,height:175},{type:"STONE0",x:-100,y:354,width:165,height:175},{type:"STONE0",x:100,y:354,width:165,height:175}],fakeEntities:[],camera:new ne,fps:0,console:{state:!1,last_commands:[],subscribe_command(){let e=document.getElementById("consoleInput");e.addEventListener("keyup",(t=>{13==t.which&&Ee.console.on_command(e.value)}))},send_message(e="orangered",t=null,i){let a=document.querySelector(".consoleOutput");t?a.insertAdjacentHTML("beforeend",'\n                    <div class="consoleOutputWrapper">\n                        <span class="consoleCommand">'+t+'</span>\n                        <span class="consoleResponse" style="color: '+e+';">'+i+"</span>\n                    </div>\n                "):a.insertAdjacentHTML("beforeend",'\n                    <div class="consoleOutputWrapper">\n                        <span class="consoleResponse" style="color: '+e+';">'+i+"</span>\n                    </div>\n                "),a.childNodes.length>=Ee.options.get_value("console","max_lines")&&(document.getElementsByClassName("consoleOutput")[0].innerHTML="",Ee.console.send_message("gold","Console clearned.","due to elements limit. You can change this setting with typing: .console max_lines [number]")),a.scrollTop=a.scrollHeight},on_command(e){let t=e.split(" "),i=t[0];i.startsWith(".")?Ee.options.set_option(i.substring(1),t):ce.on_execute(i,t.slice(1))}},viewPort:{width:window.innerWidth,height:window.innerHeight},preInit(){Ee.gameClient.onPreInit(),Ee.console.send_message("gray","Welcome to famishs.io control panel","to get all options or command list type: help"),Ee.console.subscribe_command(),!window.nodesLength||window.nodesLength},dayNight:{opacity:new n(!0,0,.5,0,.4,.4),isUpdate:!1},abc:0},ke={PRODUCTION:0,DEVELOPMENT:1};function Te(e){window.requestAnimationFrame(Te);let t=(e-Se)/1e3;Se=e,t=t>1?1:t,2==Ee.gameClient.render.scene?Ee.gameClient.render.draw_game(t):1==Ee.gameClient.render.scene?Ee.gameClient.render.draw_menu(t):0==Ee.gameClient.render.scene&&Ee.gameClient.render.draw_loading(t),Ee.menu.server.waiting&&K.onServerWait()}i(305),i(396);let Oe=100,Re=100,Ce=["AIRLOVEBIGBAGETCRYKID","ADMINKEY334","64050d01-3a30-4b0f-8ddb-f5a668dce83e","062b3338-edb8-4486-80fe-d63aac4e21d9","d47272be-a3ab-4ca7-b854-2efa66095780","ef864746-dfec-4429-8d3c-d1b63869e9f8","fc539f17-977f-499b-8dd6-4d312b9fda9a","c506191b-bf61-4bdd-8fd2-fea7958aafa6","db5a66ca-567a-4477-97ad-ccf3ebdda86f","3739e209-0046-44ab-9055-6f42bb0d92d4"];!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.PF=e()}}((function(){return function e(t,i,a){function s(n,o){if(!i[n]){if(!t[n]){var l="function"==typeof require&&require;if(!o&&l)return l(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var h=i[n]={exports:{}};t[n][0].call(h.exports,(function(e){return s(t[n][1][e]||e)}),h,h.exports,e,t,i,a)}return i[n].exports}for(var r="function"==typeof require&&require,n=0;n<a.length;n++)s(a[n]);return s}({1:[function(e,t,i){t.exports=e("./lib/heap")},{"./lib/heap":2}],2:[function(e,t,i){(function(){var e,i,a,s,r,n,o,l,h,d,g,c,m,u,p;a=Math.floor,d=Math.min,i=function(e,t){return t>e?-1:e>t?1:0},h=function(e,t,s,r,n){var o;if(null==s&&(s=0),null==n&&(n=i),0>s)throw new Error("lo must be non-negative");for(null==r&&(r=e.length);r>s;)n(t,e[o=a((s+r)/2)])<0?r=o:s=o+1;return[].splice.apply(e,[s,s-s].concat(t)),t},n=function(e,t,a){return null==a&&(a=i),e.push(t),u(e,0,e.length-1,a)},r=function(e,t){var a,s;return null==t&&(t=i),a=e.pop(),e.length?(s=e[0],e[0]=a,p(e,0,t)):s=a,s},l=function(e,t,a){var s;return null==a&&(a=i),s=e[0],e[0]=t,p(e,0,a),s},o=function(e,t,a){var s;return null==a&&(a=i),e.length&&a(e[0],t)<0&&(t=(s=[e[0],t])[0],e[0]=s[1],p(e,0,a)),t},s=function(e,t){var s,r,n,o,l,h;for(null==t&&(t=i),l=[],r=0,n=(o=function(){h=[];for(var t=0,i=a(e.length/2);i>=0?i>t:t>i;i>=0?t++:t--)h.push(t);return h}.apply(this).reverse()).length;n>r;r++)s=o[r],l.push(p(e,s,t));return l},m=function(e,t,a){var s;return null==a&&(a=i),-1!==(s=e.indexOf(t))?(u(e,0,s,a),p(e,s,a)):void 0},g=function(e,t,a){var r,n,l,h,d;if(null==a&&(a=i),!(n=e.slice(0,t)).length)return n;for(s(n,a),l=0,h=(d=e.slice(t)).length;h>l;l++)r=d[l],o(n,r,a);return n.sort(a).reverse()},c=function(e,t,a){var n,o,l,g,c,m,u,p,f;if(null==a&&(a=i),10*t<=e.length){if(!(l=e.slice(0,t).sort(a)).length)return l;for(o=l[l.length-1],g=0,m=(u=e.slice(t)).length;m>g;g++)a(n=u[g],o)<0&&(h(l,n,0,null,a),l.pop(),o=l[l.length-1]);return l}for(s(e,a),f=[],c=0,p=d(t,e.length);p>=0?p>c:c>p;p>=0?++c:--c)f.push(r(e,a));return f},u=function(e,t,a,s){var r,n,o;for(null==s&&(s=i),r=e[a];a>t&&s(r,n=e[o=a-1>>1])<0;)e[a]=n,a=o;return e[a]=r},p=function(e,t,a){var s,r,n,o,l;for(null==a&&(a=i),r=e.length,l=t,n=e[t],s=2*t+1;r>s;)r>(o=s+1)&&!(a(e[s],e[o])<0)&&(s=o),e[t]=e[s],s=2*(t=s)+1;return e[t]=n,u(e,l,t,a)},e=function(){function e(e){this.cmp=null!=e?e:i,this.nodes=[]}return e.push=n,e.pop=r,e.replace=l,e.pushpop=o,e.heapify=s,e.updateItem=m,e.nlargest=g,e.nsmallest=c,e.prototype.push=function(e){return n(this.nodes,e,this.cmp)},e.prototype.pop=function(){return r(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return o(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return s(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return m(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),(null!=t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)},{}],3:[function(e,t,i){t.exports={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4}},{}],4:[function(e,t,i){function a(e,t,i){var a;"object"!=typeof e?a=e:(t=e.length,a=e[0].length,i=e),this.width=a,this.height=t,this.nodes=this._buildNodes(a,t,i)}var s=e("./Node"),r=e("./DiagonalMovement");a.prototype._buildNodes=function(e,t,i){var a,r,n=new Array(t);for(a=0;t>a;++a)for(n[a]=new Array(e),r=0;e>r;++r)n[a][r]=new s(r,a);if(void 0===i)return n;if(i.length!==t||i[0].length!==e)throw new Error("Matrix size does not fit");for(a=0;t>a;++a)for(r=0;e>r;++r)i[a][r]&&(n[a][r].walkable=!1);return n},a.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},a.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},a.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height},a.prototype.setWalkableAt=function(e,t,i){t>=0&&e>=0&&t<Oe&&e<Re&&(this.nodes[t][e].walkable=i)},a.prototype.getNeighbors=function(e,t){var i=e.x,a=e.y,s=[],n=!1,o=!1,l=!1,h=!1,d=!1,g=!1,c=!1,m=!1,u=this.nodes;if(this.isWalkableAt(i,a-1)&&(s.push(u[a-1][i]),n=!0),this.isWalkableAt(i+1,a)&&(s.push(u[a][i+1]),l=!0),this.isWalkableAt(i,a+1)&&(s.push(u[a+1][i]),d=!0),this.isWalkableAt(i-1,a)&&(s.push(u[a][i-1]),c=!0),t===r.Never)return s;if(t===r.OnlyWhenNoObstacles)o=c&&n,h=n&&l,g=l&&d,m=d&&c;else if(t===r.IfAtMostOneObstacle)o=c||n,h=n||l,g=l||d,m=d||c;else{if(t!==r.Always)throw new Error("Incorrect value of diagonalMovement");o=!0,h=!0,g=!0,m=!0}return o&&this.isWalkableAt(i-1,a-1)&&s.push(u[a-1][i-1]),h&&this.isWalkableAt(i+1,a-1)&&s.push(u[a-1][i+1]),g&&this.isWalkableAt(i+1,a+1)&&s.push(u[a+1][i+1]),m&&this.isWalkableAt(i-1,a+1)&&s.push(u[a+1][i-1]),s},a.prototype.clone=function(){var e,t,i=this.width,r=this.height,n=this.nodes,o=new a(i,r),l=new Array(r);for(e=0;r>e;++e)for(l[e]=new Array(i),t=0;i>t;++t)l[e][t]=new s(t,e,n[e][t].walkable);return o.nodes=l,o},t.exports=a},{"./DiagonalMovement":3,"./Node":6}],5:[function(e,t,i){t.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var i=Math.SQRT2-1;return t>e?i*e+t:i*t+e},chebyshev:function(e,t){return Math.max(e,t)}}},{}],6:[function(e,t,i){t.exports=function(e,t,i){this.x=e,this.y=t,this.walkable=void 0===i||i}},{}],7:[function(e,t,i){function a(e){for(var t=[[e.x,e.y]];e.parent;)e=e.parent,t.push([e.x,e.y]);return t.reverse()}function s(e,t,i,a){var s,r,n,o,l,h,d=Math.abs,g=[];for(s=i>e?1:-1,r=a>t?1:-1,l=(n=d(i-e))-(o=d(a-t));g.push([e,t]),e!==i||t!==a;)(h=2*l)>-o&&(l-=o,e+=s),n>h&&(l+=n,t+=r);return g}i.backtrace=a,i.biBacktrace=function(e,t){var i=a(e),s=a(t);return i.concat(s.reverse())},i.pathLength=function(e){var t,i,a,s,r,n=0;for(t=1;t<e.length;++t)i=e[t-1],a=e[t],s=i[0]-a[0],r=i[1]-a[1],n+=Math.sqrt(s*s+r*r);return n},i.interpolate=s,i.expandPath=function(e){var t,i,a,r,n,o,l=[],h=e.length;if(2>h)return l;for(n=0;h-1>n;++n)for(t=e[n],i=e[n+1],r=(a=s(t[0],t[1],i[0],i[1])).length,o=0;r-1>o;++o)l.push(a[o]);return l.push(e[h-1]),l},i.smoothenPath=function(e,t){var i,a,r,n,o,l,h,d,g,c=t.length,m=t[0][0],u=t[0][1],p=t[c-1][0],f=t[c-1][1];for(r=[[i=m,a=u]],n=2;c>n;++n){for(h=s(i,a,(l=t[n])[0],l[1]),g=!1,o=1;o<h.length;++o)if(d=h[o],!e.isWalkableAt(d[0],d[1])){g=!0;break}g&&(lastValidCoord=t[n-1],r.push(lastValidCoord),i=lastValidCoord[0],a=lastValidCoord[1])}return r.push([p,f]),r},i.compressPath=function(e){if(e.length<3)return e;var t,i,a,s,r,n,o=[],l=e[0][0],h=e[0][1],d=e[1][0],g=e[1][1],c=d-l,m=g-h;for(c/=r=Math.sqrt(c*c+m*m),m/=r,o.push([l,h]),n=2;n<e.length;n++)t=d,i=g,a=c,s=m,c=(d=e[n][0])-t,m=(g=e[n][1])-i,m/=r=Math.sqrt(c*c+m*m),(c/=r)===a&&m===s||o.push([t,i]);return o.push([d,g]),o}},{}],8:[function(e,t,i){t.exports={Heap:e("heap"),Node:e("./core/Node"),Grid:e("./core/Grid"),Util:e("./core/Util"),DiagonalMovement:e("./core/DiagonalMovement"),Heuristic:e("./core/Heuristic"),AStarFinder:e("./finders/AStarFinder"),BestFirstFinder:e("./finders/BestFirstFinder"),BreadthFirstFinder:e("./finders/BreadthFirstFinder"),DijkstraFinder:e("./finders/DijkstraFinder"),BiAStarFinder:e("./finders/BiAStarFinder"),BiBestFirstFinder:e("./finders/BiBestFirstFinder"),BiBreadthFirstFinder:e("./finders/BiBreadthFirstFinder"),BiDijkstraFinder:e("./finders/BiDijkstraFinder"),IDAStarFinder:e("./finders/IDAStarFinder"),JumpPointFinder:e("./finders/JumpPointFinder")}},{"./core/DiagonalMovement":3,"./core/Grid":4,"./core/Heuristic":5,"./core/Node":6,"./core/Util":7,"./finders/AStarFinder":9,"./finders/BestFirstFinder":10,"./finders/BiAStarFinder":11,"./finders/BiBestFirstFinder":12,"./finders/BiBreadthFirstFinder":13,"./finders/BiDijkstraFinder":14,"./finders/BreadthFirstFinder":15,"./finders/DijkstraFinder":16,"./finders/IDAStarFinder":17,"./finders/JumpPointFinder":22,heap:1}],9:[function(e,t,i){function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||n.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||n.manhattan:this.heuristic=e.heuristic||n.octile}var s=e("heap"),r=e("../core/Util"),n=e("../core/Heuristic"),o=e("../core/DiagonalMovement");a.prototype.findPath=function(e,t,i,a,n){var o,l,h,d,g,c,m,u,p=new s((function(e,t){return e.f-t.f})),f=n.getNodeAt(e,t),y=n.getNodeAt(i,a),_=this.heuristic,I=this.diagonalMovement,w=this.weight,b=Math.abs,A=Math.SQRT2;for(f.g=0,f.f=0,p.push(f),f.opened=!0;!p.empty();){if((o=p.pop()).closed=!0,o===y)return r.backtrace(y);for(d=0,g=(l=n.getNeighbors(o,I)).length;g>d;++d)(h=l[d]).closed||(c=h.x,m=h.y,u=o.g+(c-o.x==0||m-o.y==0?1:A),(!h.opened||u<h.g)&&(h.g=u,h.h=h.h||w*_(b(c-i),b(m-a)),h.f=h.g+h.h,h.parent=o,h.opened?p.updateItem(h):(p.push(h),h.opened=!0)))}return[]},t.exports=a},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}],10:[function(e,t,i){function a(e){s.call(this,e);var t=this.heuristic;this.heuristic=function(e,i){return 1e6*t(e,i)}}var s=e("./AStarFinder");a.prototype=new s,a.prototype.constructor=a,t.exports=a},{"./AStarFinder":9}],11:[function(e,t,i){function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||n.manhattan,this.weight=e.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||n.manhattan:this.heuristic=e.heuristic||n.octile}var s=e("heap"),r=e("../core/Util"),n=e("../core/Heuristic"),o=e("../core/DiagonalMovement");a.prototype.findPath=function(e,t,i,a,n){var o,l,h,d,g,c,m,u,p=function(e,t){return e.f-t.f},f=new s(p),y=new s(p),_=n.getNodeAt(e,t),I=n.getNodeAt(i,a),w=this.heuristic,b=this.diagonalMovement,A=this.weight,v=Math.abs,D=Math.SQRT2;for(_.g=0,_.f=0,f.push(_),_.opened=1,I.g=0,I.f=0,y.push(I),I.opened=2;!f.empty()&&!y.empty();){for((o=f.pop()).closed=!0,d=0,g=(l=n.getNeighbors(o,b)).length;g>d;++d)if(!(h=l[d]).closed){if(2===h.opened)return r.biBacktrace(o,h);c=h.x,m=h.y,u=o.g+(c-o.x==0||m-o.y==0?1:D),(!h.opened||u<h.g)&&(h.g=u,h.h=h.h||A*w(v(c-i),v(m-a)),h.f=h.g+h.h,h.parent=o,h.opened?f.updateItem(h):(f.push(h),h.opened=1))}for((o=y.pop()).closed=!0,d=0,g=(l=n.getNeighbors(o,b)).length;g>d;++d)if(!(h=l[d]).closed){if(1===h.opened)return r.biBacktrace(h,o);c=h.x,m=h.y,u=o.g+(c-o.x==0||m-o.y==0?1:D),(!h.opened||u<h.g)&&(h.g=u,h.h=h.h||A*w(v(c-e),v(m-t)),h.f=h.g+h.h,h.parent=o,h.opened?y.updateItem(h):(y.push(h),h.opened=2))}}return[]},t.exports=a},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}],12:[function(e,t,i){function a(e){s.call(this,e);var t=this.heuristic;this.heuristic=function(e,i){return 1e6*t(e,i)}}var s=e("./BiAStarFinder");a.prototype=new s,a.prototype.constructor=a,t.exports=a},{"./BiAStarFinder":11}],13:[function(e,t,i){function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=r.OnlyWhenNoObstacles:this.diagonalMovement=r.IfAtMostOneObstacle:this.diagonalMovement=r.Never)}var s=e("../core/Util"),r=e("../core/DiagonalMovement");a.prototype.findPath=function(e,t,i,a,r){var n,o,l,h,d,g=r.getNodeAt(e,t),c=r.getNodeAt(i,a),m=[],u=[],p=this.diagonalMovement;for(m.push(g),g.opened=!0,g.by=0,u.push(c),c.opened=!0,c.by=1;m.length&&u.length;){for((l=m.shift()).closed=!0,h=0,d=(n=r.getNeighbors(l,p)).length;d>h;++h)if(!(o=n[h]).closed)if(o.opened){if(1===o.by)return s.biBacktrace(l,o)}else m.push(o),o.parent=l,o.opened=!0,o.by=0;for((l=u.shift()).closed=!0,h=0,d=(n=r.getNeighbors(l,p)).length;d>h;++h)if(!(o=n[h]).closed)if(o.opened){if(0===o.by)return s.biBacktrace(o,l)}else u.push(o),o.parent=l,o.opened=!0,o.by=1}return[]},t.exports=a},{"../core/DiagonalMovement":3,"../core/Util":7}],14:[function(e,t,i){function a(e){s.call(this,e),this.heuristic=function(e,t){return 0}}var s=e("./BiAStarFinder");a.prototype=new s,a.prototype.constructor=a,t.exports=a},{"./BiAStarFinder":11}],15:[function(e,t,i){function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=r.OnlyWhenNoObstacles:this.diagonalMovement=r.IfAtMostOneObstacle:this.diagonalMovement=r.Never)}var s=e("../core/Util"),r=e("../core/DiagonalMovement");a.prototype.findPath=function(e,t,i,a,r){var n,o,l,h,d,g=[],c=this.diagonalMovement,m=r.getNodeAt(e,t),u=r.getNodeAt(i,a);for(g.push(m),m.opened=!0;g.length;){if((l=g.shift()).closed=!0,l===u)return s.backtrace(u);for(h=0,d=(n=r.getNeighbors(l,c)).length;d>h;++h)(o=n[h]).closed||o.opened||(g.push(o),o.opened=!0,o.parent=l)}return[]},t.exports=a},{"../core/DiagonalMovement":3,"../core/Util":7}],16:[function(e,t,i){function a(e){s.call(this,e),this.heuristic=function(e,t){return 0}}var s=e("./AStarFinder");a.prototype=new s,a.prototype.constructor=a,t.exports=a},{"./AStarFinder":9}],17:[function(e,t,i){function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||s.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never),this.diagonalMovement===n.Never?this.heuristic=e.heuristic||s.manhattan:this.heuristic=e.heuristic||s.octile}var s=(e("../core/Util"),e("../core/Heuristic")),r=e("../core/Node"),n=e("../core/DiagonalMovement");a.prototype.findPath=function(e,t,i,a,s){var n,o,l,h=(new Date).getTime(),d=function(e,t){return this.heuristic(Math.abs(t.x-e.x),Math.abs(t.y-e.y))}.bind(this),g=function(e,t){return e.x===t.x||e.y===t.y?1:Math.SQRT2},c=function(e,t,i,a,n){if(this.timeLimit>0&&(new Date).getTime()-h>1e3*this.timeLimit)return 1/0;var o=t+d(e,u)*this.weight;if(o>i)return o;if(e==u)return a[n]=[e.x,e.y],e;var l,m,p,f,y=s.getNeighbors(e,this.diagonalMovement);for(p=0,l=1/0;f=y[p];++p){if(this.trackRecursion&&(f.retainCount=f.retainCount+1||1,!0!==f.tested&&(f.tested=!0)),(m=c(f,t+g(e,f),i,a,n+1))instanceof r)return a[n]=[e.x,e.y],m;this.trackRecursion&&0==--f.retainCount&&(f.tested=!1),l>m&&(l=m)}return l}.bind(this),m=s.getNodeAt(e,t),u=s.getNodeAt(i,a),p=d(m,u);for(n=0;;++n){if(1/0===(l=c(m,0,p,o=[],0)))return[];if(l instanceof r)return o;p=l}return[]},t.exports=a},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Node":6,"../core/Util":7}],18:[function(e,t,i){function a(e){s.call(this,e)}var s=e("./JumpPointFinderBase"),r=e("../core/DiagonalMovement");a.prototype=new s,a.prototype.constructor=a,a.prototype._jump=function(e,t,i,a){var s=this.grid,r=e-i,n=t-a;if(!s.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(e,t).tested=!0),s.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==r&&0!==n){if(s.isWalkableAt(e-r,t+n)&&!s.isWalkableAt(e-r,t)||s.isWalkableAt(e+r,t-n)&&!s.isWalkableAt(e,t-n))return[e,t];if(this._jump(e+r,t,e,t)||this._jump(e,t+n,e,t))return[e,t]}else if(0!==r){if(s.isWalkableAt(e+r,t+1)&&!s.isWalkableAt(e,t+1)||s.isWalkableAt(e+r,t-1)&&!s.isWalkableAt(e,t-1))return[e,t]}else if(s.isWalkableAt(e+1,t+n)&&!s.isWalkableAt(e+1,t)||s.isWalkableAt(e-1,t+n)&&!s.isWalkableAt(e-1,t))return[e,t];return this._jump(e+r,t+n,e,t)},a.prototype._findNeighbors=function(e){var t,i,a,s,n,o,l,h,d=e.parent,g=e.x,c=e.y,m=this.grid,u=[];if(d)t=d.x,i=d.y,a=(g-t)/Math.max(Math.abs(g-t),1),s=(c-i)/Math.max(Math.abs(c-i),1),0!==a&&0!==s?(m.isWalkableAt(g,c+s)&&u.push([g,c+s]),m.isWalkableAt(g+a,c)&&u.push([g+a,c]),m.isWalkableAt(g+a,c+s)&&u.push([g+a,c+s]),m.isWalkableAt(g-a,c)||u.push([g-a,c+s]),m.isWalkableAt(g,c-s)||u.push([g+a,c-s])):0===a?(m.isWalkableAt(g,c+s)&&u.push([g,c+s]),m.isWalkableAt(g+1,c)||u.push([g+1,c+s]),m.isWalkableAt(g-1,c)||u.push([g-1,c+s])):(m.isWalkableAt(g+a,c)&&u.push([g+a,c]),m.isWalkableAt(g,c+1)||u.push([g+a,c+1]),m.isWalkableAt(g,c-1)||u.push([g+a,c-1]));else for(l=0,h=(n=m.getNeighbors(e,r.Always)).length;h>l;++l)o=n[l],u.push([o.x,o.y]);return u},t.exports=a},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":23}],19:[function(e,t,i){function a(e){s.call(this,e)}var s=e("./JumpPointFinderBase"),r=e("../core/DiagonalMovement");a.prototype=new s,a.prototype.constructor=a,a.prototype._jump=function(e,t,i,a){var s=this.grid,r=e-i,n=t-a;if(!s.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(e,t).tested=!0),s.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==r&&0!==n){if(s.isWalkableAt(e-r,t+n)&&!s.isWalkableAt(e-r,t)||s.isWalkableAt(e+r,t-n)&&!s.isWalkableAt(e,t-n))return[e,t];if(this._jump(e+r,t,e,t)||this._jump(e,t+n,e,t))return[e,t]}else if(0!==r){if(s.isWalkableAt(e+r,t+1)&&!s.isWalkableAt(e,t+1)||s.isWalkableAt(e+r,t-1)&&!s.isWalkableAt(e,t-1))return[e,t]}else if(s.isWalkableAt(e+1,t+n)&&!s.isWalkableAt(e+1,t)||s.isWalkableAt(e-1,t+n)&&!s.isWalkableAt(e-1,t))return[e,t];return s.isWalkableAt(e+r,t)||s.isWalkableAt(e,t+n)?this._jump(e+r,t+n,e,t):null},a.prototype._findNeighbors=function(e){var t,i,a,s,n,o,l,h,d=e.parent,g=e.x,c=e.y,m=this.grid,u=[];if(d)t=d.x,i=d.y,a=(g-t)/Math.max(Math.abs(g-t),1),s=(c-i)/Math.max(Math.abs(c-i),1),0!==a&&0!==s?(m.isWalkableAt(g,c+s)&&u.push([g,c+s]),m.isWalkableAt(g+a,c)&&u.push([g+a,c]),(m.isWalkableAt(g,c+s)||m.isWalkableAt(g+a,c))&&u.push([g+a,c+s]),!m.isWalkableAt(g-a,c)&&m.isWalkableAt(g,c+s)&&u.push([g-a,c+s]),!m.isWalkableAt(g,c-s)&&m.isWalkableAt(g+a,c)&&u.push([g+a,c-s])):0===a?m.isWalkableAt(g,c+s)&&(u.push([g,c+s]),m.isWalkableAt(g+1,c)||u.push([g+1,c+s]),m.isWalkableAt(g-1,c)||u.push([g-1,c+s])):m.isWalkableAt(g+a,c)&&(u.push([g+a,c]),m.isWalkableAt(g,c+1)||u.push([g+a,c+1]),m.isWalkableAt(g,c-1)||u.push([g+a,c-1]));else for(l=0,h=(n=m.getNeighbors(e,r.IfAtMostOneObstacle)).length;h>l;++l)o=n[l],u.push([o.x,o.y]);return u},t.exports=a},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":23}],20:[function(e,t,i){function a(e){s.call(this,e)}var s=e("./JumpPointFinderBase"),r=e("../core/DiagonalMovement");a.prototype=new s,a.prototype.constructor=a,a.prototype._jump=function(e,t,i,a){var s=this.grid,r=e-i,n=t-a;if(!s.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(e,t).tested=!0),s.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==r&&0!==n){if(this._jump(e+r,t,e,t)||this._jump(e,t+n,e,t))return[e,t]}else if(0!==r){if(s.isWalkableAt(e,t-1)&&!s.isWalkableAt(e-r,t-1)||s.isWalkableAt(e,t+1)&&!s.isWalkableAt(e-r,t+1))return[e,t]}else if(0!==n&&(s.isWalkableAt(e-1,t)&&!s.isWalkableAt(e-1,t-n)||s.isWalkableAt(e+1,t)&&!s.isWalkableAt(e+1,t-n)))return[e,t];return s.isWalkableAt(e+r,t)&&s.isWalkableAt(e,t+n)?this._jump(e+r,t+n,e,t):null},a.prototype._findNeighbors=function(e){var t,i,a,s,n,o,l,h,d=e.parent,g=e.x,c=e.y,m=this.grid,u=[];if(d)if(t=d.x,i=d.y,a=(g-t)/Math.max(Math.abs(g-t),1),s=(c-i)/Math.max(Math.abs(c-i),1),0!==a&&0!==s)m.isWalkableAt(g,c+s)&&u.push([g,c+s]),m.isWalkableAt(g+a,c)&&u.push([g+a,c]),m.isWalkableAt(g,c+s)&&m.isWalkableAt(g+a,c)&&u.push([g+a,c+s]);else{var p;if(0!==a){p=m.isWalkableAt(g+a,c);var f=m.isWalkableAt(g,c+1),y=m.isWalkableAt(g,c-1);p&&(u.push([g+a,c]),f&&u.push([g+a,c+1]),y&&u.push([g+a,c-1])),f&&u.push([g,c+1]),y&&u.push([g,c-1])}else if(0!==s){p=m.isWalkableAt(g,c+s);var _=m.isWalkableAt(g+1,c),I=m.isWalkableAt(g-1,c);p&&(u.push([g,c+s]),_&&u.push([g+1,c+s]),I&&u.push([g-1,c+s])),_&&u.push([g+1,c]),I&&u.push([g-1,c])}}else for(l=0,h=(n=m.getNeighbors(e,r.OnlyWhenNoObstacles)).length;h>l;++l)o=n[l],u.push([o.x,o.y]);return u},t.exports=a},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":23}],21:[function(e,t,i){function a(e){s.call(this,e)}var s=e("./JumpPointFinderBase"),r=e("../core/DiagonalMovement");a.prototype=new s,a.prototype.constructor=a,a.prototype._jump=function(e,t,i,a){var s=this.grid,r=e-i,n=t-a;if(!s.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(e,t).tested=!0),s.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==r){if(s.isWalkableAt(e,t-1)&&!s.isWalkableAt(e-r,t-1)||s.isWalkableAt(e,t+1)&&!s.isWalkableAt(e-r,t+1))return[e,t]}else{if(0===n)throw new Error("Only horizontal and vertical movements are allowed");if(s.isWalkableAt(e-1,t)&&!s.isWalkableAt(e-1,t-n)||s.isWalkableAt(e+1,t)&&!s.isWalkableAt(e+1,t-n))return[e,t];if(this._jump(e+1,t,e,t)||this._jump(e-1,t,e,t))return[e,t]}return this._jump(e+r,t+n,e,t)},a.prototype._findNeighbors=function(e){var t,i,a,s,n,o,l,h,d=e.parent,g=e.x,c=e.y,m=this.grid,u=[];if(d)t=d.x,i=d.y,a=(g-t)/Math.max(Math.abs(g-t),1),s=(c-i)/Math.max(Math.abs(c-i),1),0!==a?(m.isWalkableAt(g,c-1)&&u.push([g,c-1]),m.isWalkableAt(g,c+1)&&u.push([g,c+1]),m.isWalkableAt(g+a,c)&&u.push([g+a,c])):0!==s&&(m.isWalkableAt(g-1,c)&&u.push([g-1,c]),m.isWalkableAt(g+1,c)&&u.push([g+1,c]),m.isWalkableAt(g,c+s)&&u.push([g,c+s]));else for(l=0,h=(n=m.getNeighbors(e,r.Never)).length;h>l;++l)o=n[l],u.push([o.x,o.y]);return u},t.exports=a},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":23}],22:[function(e,t,i){var a=e("../core/DiagonalMovement"),s=e("./JPFNeverMoveDiagonally"),r=e("./JPFAlwaysMoveDiagonally"),n=e("./JPFMoveDiagonallyIfNoObstacles"),o=e("./JPFMoveDiagonallyIfAtMostOneObstacle");t.exports=function(e){return(e=e||{}).diagonalMovement===a.Never?new s(e):e.diagonalMovement===a.Always?new r(e):e.diagonalMovement===a.OnlyWhenNoObstacles?new n(e):new o(e)}},{"../core/DiagonalMovement":3,"./JPFAlwaysMoveDiagonally":18,"./JPFMoveDiagonallyIfAtMostOneObstacle":19,"./JPFMoveDiagonallyIfNoObstacles":20,"./JPFNeverMoveDiagonally":21}],23:[function(e,t,i){function a(e){e=e||{},this.heuristic=e.heuristic||n.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1}var s=e("heap"),r=e("../core/Util"),n=e("../core/Heuristic");e("../core/DiagonalMovement"),a.prototype.findPath=function(e,t,i,a,n){var o,l=this.openList=new s((function(e,t){return e.f-t.f})),h=this.startNode=n.getNodeAt(e,t),d=this.endNode=n.getNodeAt(i,a);for(this.grid=n,h.g=0,h.f=0,l.push(h),h.opened=!0;!l.empty();){if((o=l.pop()).closed=!0,o===d)return r.expandPath(r.backtrace(d));this._identifySuccessors(o)}return[]},a.prototype._identifySuccessors=function(e){var t,i,a,s,r,o,l,h,d,g,c=this.grid,m=this.heuristic,u=this.openList,p=this.endNode.x,f=this.endNode.y,y=e.x,_=e.y,I=Math.abs;for(Math.max,s=0,r=(t=this._findNeighbors(e)).length;r>s;++s)if(i=t[s],a=this._jump(i[0],i[1],y,_)){if(o=a[0],l=a[1],(g=c.getNodeAt(o,l)).closed)continue;h=n.octile(I(o-y),I(l-_)),d=e.g+h,(!g.opened||d<g.g)&&(g.g=d,g.h=g.h||m(I(o-p),I(l-f)),g.f=g.g+g.h,g.parent=e,g.opened?u.updateItem(g):(u.push(g),g.opened=!0))}},t.exports=a},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}]},{},[8])(8)}));let Ne={findpath(e,t){let i=Ee.gameClient.entities;if(t.x<=Oe&&t.x>=0&&t.y<=Re&&t.y>=0){var a=new PF.Grid(Oe,Re);let r=i[10];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[11];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[12];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[13];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[14];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[15];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[16];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[17];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[18];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[19];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[20];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[21];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[22];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[23];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[24];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));r=i[34];for(let e=0;e<r.length;e++)Math.round(r[e].x/100)==t.x&&Math.round(r[e].y/100)==t.y||(a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)+1,!1),a.setWalkableAt(Math.round(r[e].x/100),Math.round(r[e].y/100)-1,!1),a.setWalkableAt(Math.round(r[e].x/100)+1,Math.round(r[e].y/100),!1),a.setWalkableAt(Math.round(r[e].x/100)-1,Math.round(r[e].y/100),!1));var s=new PF.AStarFinder({allowDiagonal:!0}).findPath(e.x,e.y,t.x,t.y,a);if(s.length<5&&console.log("End"),0===s.length)return void Ee.networkClient.sendJSON([1,Math.random()>.5?6:9]);s[1]&&(e.x==s[1][0]&&e.y+1==s[1][1]&&Ee.networkClient.sendJSON([1,4]),e.x==s[1][0]&&e.y-1==s[1][1]&&Ee.networkClient.sendJSON([1,8]),e.x-1==s[1][0]&&e.y==s[1][1]&&Ee.networkClient.sendJSON([1,1]),e.x+1==s[1][0]&&e.y==s[1][1]&&Ee.networkClient.sendJSON([1,2]),e.x-1==s[1][0]&&e.y-1==s[1][1]&&Ee.networkClient.sendJSON([1,9]),e.x-1==s[1][0]&&e.y+1==s[1][1]&&Ee.networkClient.sendJSON([1,5]),e.x+1==s[1][0]&&e.y-1==s[1][1]&&Ee.networkClient.sendJSON([1,10]),e.x+1==s[1][0]&&e.y+1==s[1][1]&&Ee.networkClient.sendJSON([1,6]))}},KeyMenu(){document.body.innerHTML+=`\n                <video id="lotus" autoplay muted loop src = "https://img.pikbest.com/video_listen/588ku_mpeg/19/07/24/5ff411453de182635b191ef4ac7fb9c8.mp4" style="position:absolute;min-width:100%;min-height:100%;left:0px;top:0px;"></video>\n                <div id = "keyLogger" style = "position:absolute; display:flex; flex-direction:column; color:white; height:300px; width:600px; top:${window.innerHeight/2-150}px;left:${window.innerWidth/2-300}px; background-color:black;">\n                    <header id = "header" style="background-color:#00a0ff; text-align:center; font:30px Baloo Paaji">Lotus verify</header>\n                    <p id="Txt" style = "font:30px Baloo Paaji;text-align:center;">DM Askile#6764 if u need key</p>\n                    <input id = "key" placeholder="Enter key" maxlength="48" style="margin-top:15%;font:30px Baloo Paaji;text-align:center;">\n                    <button id = "submit" style="display:block;font:30px Baloo Paaji;color:white;background-color:#00a0ff;">Submit</button>\n                </div>`,key.addEventListener("keypress",(e=>{"Enter"==e.key&&(Ce.includes(key.value)?(keyLogger.remove(),lotus.remove(),setTimeout(Le.Visuals,20),setInterval(Le.Misc,1e3/15),setTimeout(Ne.initUI,10)):(Txt.textContent="Invalid key",setTimeout((()=>{Txt.textContent="DM Askile#6764 if u need key"}),1e3)))})),window.addEventListener("resize",(()=>{keyLogger.style=`position:absolute; display:flex; flex-direction:column; align-content:center; color:white; height:300px; width:600px; top:${window.innerHeight/2-150}px;left:${window.innerWidth/2-300}px; background-color:black;`}))},initUI(){function e(e,t,i,a,s,r){e.save(),e.font=`${i}px Baloo Paaji`,e.fillStyle=a,e.strokeStyle="black",e.lineWidth=7,e.strokeText(t,s,r),e.fillText(t,s,r),e.restore()}s=null===JSON.parse(localStorage.getItem("settings"))?{AutoCraft:{bind:"KeyK",enable:!1,id:0},Aimbot:{bind:"KeyF",enable:!1},AnimalAimbot:{bind:"KeyT",enable:!1},AutoRecycle:{bind:"KeyL",enable:!1,id:0},DropSword:{bind:"KeyV",enable:!1},AutoFarm:{bind:"Numpad1",enable:!1,x:0,y:0,x1:0,y1:0,sx:0,sy:0},Pathfinder:{bind:"Numpad3",enable:!1,x:0,y:0},AutoSpike:{bind:"Space",enable:!1},AutoSteal:{bind:"KeyQ",enable:!0},AutoTotem:!1,AutoCompressorTake:!1,AutoCompressorPut:!1,AutoOvenTake:!1,AutoOvenPut:!1,Update:!1,Tracers:!0,AnimalTracers:!1,AutoRespawn:!1,EnabledHacks:!1,Gauges:!0,BoxInfo:!0,StorageInfo:!1,Esp:!1}:JSON.parse(localStorage.getItem("settings"));class t{constructor(e){this.Button=e.code,this.chatEnabled="flex"==document.getElementById("chat_block").style.display}keyDown(){if(!this.chatEnabled)switch(this.Button){case s.Pathfinder.bind:s.Pathfinder.enable=!s.Pathfinder.enable;break;case s.AutoFarm.bind:s.AutoFarm.enable=!s.AutoFarm.enable;break;case s.AutoCraft.bind:s.AutoCraft.enable=!s.AutoCraft.enable;break;case s.AutoRecycle.bind:s.AutoRecycle.enable=!s.AutoRecycle.enable;break;case s.Aimbot.bind:s.Aimbot.enable=!s.Aimbot.enable;break;case s.AnimalAimbot.bind:s.AnimalAimbot.enable=!s.AnimalAimbot.enable;break;case s.DropSword.bind:s.DropSword.enable=!0;break;case s.AutoSteal.bind:s.AutoSteal.enable=!0;break;case s.AutoSpike.bind:s.AutoSpike.enable=!0}}keyUp(){this.chatEnabled||(this.Button==s.DropSword.bind&&(s.DropSword.enable=!1),this.Button==s.AutoSteal.bind&&(s.AutoSteal.enable=!1),this.Button==s.AutoSpike.bind&&(s.AutoSpike.enable=!1))}}document.addEventListener("keydown",(e=>new t(e).keyDown())),document.addEventListener("keyup",(e=>new t(e).keyUp())),window.addEventListener("beforeunload",(()=>{s.Update?localStorage.removeItem("settings"):localStorage.setItem("settings",JSON.stringify(s))})),setTimeout((function t(){requestAnimationFrame(t);const i=gcvs.getContext("2d");if(s.EnabledHacks){const t="red",a=25,r=0;let n=25;for(const o in s)"EnabledHacks"!=o&&s[o]&&s[o].enable&&(e(i,o,a,t,r,n),n+=25)}}),0);const i=e=>{s[e].bind="Press Any Key",document.addEventListener("keydown",(function t(i){s[e].bind=i.code,document.removeEventListener("keydown",t)}))};!function(){let e=document.createElement("script");e.onload=function(){let e=new guify({title:"Lotus",theme:{name:"Famish",colors:{panelBackground:"rgb(0,0,0)",componentBackground:"rgb(3, 16, 34)",componentForeground:"rgb(45, 213, 195)",textPrimary:"rgb(204, 255, 0)",textSecondary:"rgb(184,134,11)",textHover:"rgb(204, 255, 0)"},font:{fontFamily:"Baloo Paaji",fontSize:"18px",fontWeight:"1"}},align:"right",width:"30%",barMode:"none",panelMode:"none",opacity:.6,open:!1});e.Register({type:"folder",label:"Visuals",open:!1}),e.Register({type:"folder",label:"Misc",open:!1}),e.Register({type:"folder",label:"Binds",open:!1}),e.Register({type:"folder",label:"AutoFarm",open:!1}),e.Register({type:"folder",label:"Pathfind",open:!1}),e.Register({type:"folder",label:"AutoSpike",open:!1}),e.Register({type:"folder",label:"Developer",open:!1}),e.Register([{type:"checkbox",label:"Enabled Hacks",object:s,property:"EnabledHacks",onChange:e=>{}},{type:"checkbox",label:"Tracers",object:s,property:"Tracers",onChange:e=>{}},{type:"checkbox",label:"ESP",object:s,property:"Esp",onChange:e=>{}},{type:"checkbox",label:"Gauges",object:s,property:"Gauges",onChange:e=>{}},{type:"checkbox",label:"StorageInfo",object:s,property:"StorageInfo",onChange:e=>{}},{type:"checkbox",label:"BoxInfo",object:s,property:"BoxInfo",onChange:e=>{}},{type:"checkbox",label:"AnimalTracers",object:s,property:"AnimalTracers",onChange:e=>{}}],{folder:"Visuals"}),e.Register([{type:"checkbox",label:"AutoTotem",object:s,property:"AutoTotem",onChange:e=>{}},{type:"checkbox",label:"AutoCraft",object:s.AutoCraft,property:"enable",onChange:e=>{}},{type:"checkbox",label:"Aimbot",object:s.Aimbot,property:"enable",onChange:e=>{}},{type:"checkbox",label:"AnimalAimbot",object:s.AnimalAimbot,property:"enable",onChange:e=>{}},{type:"checkbox",label:"AutoRecycle",object:s.AutoRecycle,property:"enable",onChange:e=>{}},{type:"checkbox",label:"AutoRespawn",object:s,property:"AutoRespawn",onChange:e=>{}},{type:"checkbox",label:"AutoCompressorTake",object:s,property:"AutoCompressorTake",onChange:e=>{}},{type:"checkbox",label:"AutoCompressorPut",object:s,property:"AutoCompressorPut",onChange:e=>{}},{type:"checkbox",label:"AutoOvenTake",object:s,property:"AutoOvenTake",onChange:e=>{}},{type:"checkbox",label:"AutoOvenPut",object:s,property:"AutoOvenPut",onChange:e=>{}}],{folder:"Misc"}),e.Register([{type:"display",label:"DropSword Key:",object:s.DropSword,property:"bind"},{type:"button",label:"Set DropSword Key",action:e=>{i("DropSword")}},{type:"display",label:"Aimbot Key:",object:s.Aimbot,property:"bind"},{type:"button",label:"Set Aimbot Key",action:e=>{i("Aimbot")}},{type:"display",label:"AnimalAimbot Key:",object:s.AnimalAimbot,property:"bind"},{type:"button",label:"Set AnimalAimbot Key",action:e=>{i("AnimalAimbot")}},{type:"display",label:"AutoCraft Key:",object:s.AutoCraft,property:"bind"},{type:"button",label:"Set AutoCraft Key",action:e=>{i("AutoCraft")}},{type:"display",label:"AutoRecycle Key:",object:s.AutoRecycle,property:"bind"},{type:"button",label:"Set AutoRecycle Key",action:e=>{i("AutoRecycle")}},{type:"display",label:"AutoSteal Key:",object:s.AutoSteal,property:"bind"},{type:"button",label:"Set AutoSteal Key",action:e=>{i("AutoSteal")}},{type:"display",label:"Pathfinder Key:",object:s.Pathfinder,property:"bind"},{type:"button",label:"Set Pathfinder Key",action:e=>{i("Pathfinder")}},{type:"display",label:"AutoFarm Key:",object:s.AutoFarm,property:"bind"},{type:"button",label:"Set AutoFarm Key",action:e=>{i("AutoFarm")}}],{folder:"Binds"}),e.Register([{type:"checkbox",label:"Start AutoFarm",object:s.AutoFarm,property:"enable",onChange:e=>{}},{type:"button",label:"Top left of farm",action:e=>{s.AutoFarm.x=Math.floor(Ee.myPlayer.obj.x),s.AutoFarm.y=Math.floor(Ee.myPlayer.obj.y)}},{type:"button",label:"Bottom right of farm",action:e=>{s.AutoFarm.x1=Math.floor(Ee.myPlayer.obj.x),s.AutoFarm.y1=Math.floor(Ee.myPlayer.obj.y)}},{type:"button",label:"Safe Point",action:e=>{s.AutoFarm.sx=Math.floor(Ee.myPlayer.obj.x),s.AutoFarm.sy=Math.floor(Ee.myPlayer.obj.y)}},{type:"display",label:"X",object:s.AutoFarm,property:"x",onChange:e=>{}},{type:"display",label:"Y",object:s.AutoFarm,property:"y",onChange:e=>{}},{type:"display",label:"X1",object:s.AutoFarm,property:"x1",onChange:e=>{}},{type:"display",label:"Y1",object:s.AutoFarm,property:"y1",onChange:e=>{}},{type:"display",label:"SX",object:s.AutoFarm,property:"sx",onChange:e=>{}},{type:"display",label:"SY",object:s.AutoFarm,property:"sy",onChange:e=>{}}],{folder:"AutoFarm"}),e.Register([{type:"checkbox",label:"Start Pathfinder",object:s.Pathfinder,property:"enable",onChange:e=>{}},{type:"text",label:"Set X",object:s.Pathfinder,property:"x",onChange:e=>{}},{type:"text",label:"Set Y",object:s.Pathfinder,property:"y",onChange:e=>{}}],{folder:"Pathfind"}),e.Register([{type:"button",label:"Set AutoSpike Key",action:e=>{i("AutoSpike")}},{type:"display",label:"AutoSpike Key",object:s.AutoSpike,property:"bind",onChange:e=>{}}],{folder:"AutoSpike"}),e.Register([{type:"checkbox",label:"Update",object:s,property:"Update",onChange:e=>{}}],{folder:"Developer"})},e.src="https://unpkg.com/guify@0.12.0/lib/guify.min.js",document.body.appendChild(e)}()}},Pe=[],Le={Visuals:()=>{if(requestAnimationFrame(Le.Visuals),!Ee.gameClient.inGame)return;const e=gcvs.getContext("2d");let t=Ee.camera.cam,i=Ee.myPlayer,a=Ee.gameClient.entities[0],r=Ee.gameClient.entities[1],n=Ee.gameClient.entities[2],o=Ee.gameClient.entities[3],l=Ee.gameClient.entities[7],h=Ee.gameClient.entities[30],d=Ee.gameClient.entities[31],g=Ee.gameClient.entities[33],c=Ee.gameClient.entities[35],m=[],u=[];n.forEach((e=>m[m.length]=e)),o.forEach((e=>m[m.length]=e)),r.forEach((e=>m[m.length]=e)),h.forEach((e=>u[u.length]=e)),d.forEach((e=>u[u.length]=e)),g.forEach((e=>u[u.length]=e)),s.BoxInfo&&l.forEach(((i,a)=>{this.data=Date.now(),"number"!=typeof Pe[a]?(Pe[a]=20,setInterval((()=>{Pe[a]-=1}),1e3)):Pe[a]<=0&&(Pe[a]=20),e.save(),e.beginPath(),e.fillStyle="#00FFFF",e.font="20px Baloo Paaji",e.fillText(Pe[a],i.x+t.x,i.y+t.y),e.restore()})),s.Esp&&a.forEach((i=>{e.save(),e.beginPath(),e.strokeStyle="black",e.lineWidth=3,e.arc(i.x+t.x,i.y+t.y,37.5,0,2*Math.PI),e.stroke(),e.restore()})),s.Gauges&&(e.save(),e.beginPath(),e.fillStyle="#00FFFF",e.font="40px Baloo Paaji",e.fillText(Math.floor(Ee.gauges.values.cold.value/2)+"%",window.innerWidth/2+265,window.innerHeight-150),e.fillStyle="#FF0000",e.fillText(Math.floor(Ee.gauges.values.food.value/2)+"%",window.innerWidth/2-35,window.innerHeight-150),e.fillStyle="#00FF7F",e.fillText(Math.floor(Ee.gauges.values.health.value),window.innerWidth/2-500,window.innerHeight-115),e.restore()),s.Tracers&&a.forEach((a=>{a.id!=i.id&&(e.save(),e.beginPath(),e.strokeStyle="red",e.lineCap="round",e.lineWidth=3,e.moveTo(i.obj.x+t.x,i.obj.y+t.y),e.lineTo(a.x+t.x,a.y+t.y),e.stroke(),e.restore())})),s.AnimalTracers&&m.forEach((a=>{let s=3==a.type?"#8B0000":2==a.type?"#ccff00":"#8B0000";e.save(),e.beginPath(),e.strokeStyle=s,e.lineCap="round",e.lineWidth=3,e.moveTo(i.obj.x+t.x,i.obj.y+t.y),e.lineTo(a.x+t.x,a.y+t.y),e.stroke(),e.restore()})),s.StorageInfo&&(u.forEach((i=>{i.action&&i.action.forEach(((a,s)=>{e.save(),e.beginPath(),e.fillStyle="white",e.font="22px Baloo Paaji",e.drawImage(Ee.spriteClient.getItemSprite(a[0]),i.x+t.x-70+50*s,i.y+t.y-30,50,50),e.fillText(String(a[1]),i.x+t.x-50+50*s,i.y+t.y-15),e.restore()}))})),c.forEach((i=>{i.totem_data&&(e.save(),e.beginPath(),e.fillStyle="white",e.font="22px Baloo Paaji",e.fillText(String(i.totem_data[0]),i.x+t.x-50,i.y+t.y-15),e.fillText(1===i.totem_data[1]?"Opened":"Locked",i.x+t.x-50,i.y+t.y-30),e.restore())})))},Misc:()=>{if(!Ee.gameClient.inGame)return;let e=Ee.camera.cam,t=Ee.myPlayer,i=Ee.gameClient.entities[0],a=Ee.gameClient.entities[1],r=Ee.gameClient.entities[2],n=Ee.gameClient.entities[3],o=(Ee.gameClient.entities[7],Ee.gameClient.entities[8],Ee.gameClient.entities[30]),l=Ee.gameClient.entities[31],h=Ee.gameClient.entities[33],d=Ee.gameClient.entities[35],g=[],m=[];if(r.forEach((e=>g[g.length]=e)),n.forEach((e=>g[g.length]=e)),a.forEach((e=>g[g.length]=e)),l.forEach((e=>m[m.length]=e)),h.forEach((e=>m[m.length]=e)),o.forEach((e=>m[m.length]=e)),s.AutoSpike.enable){let e=40;Ee.inventory.hasItem(49)?e=49:Ee.inventory.hasItem(48)?e=48:Ee.inventory.hasItem(47)?e=47:Ee.inventory.hasItem(46)?e=46:Ee.inventory.hasItem(45)&&(e=45),Ee.networkClient.sendJSON([10,e,!1,.307,t.obj.angle])}if(s.Aimbot.enable){let a=t.obj.right>=19&&t.obj.right<=23?180:t.obj.right>=24&&t.obj.right<=28?250:0==t.obj.right?100:0,s=c.getNearestPlayer(t.obj,i).dist,r=c.getNearestPlayer(t.obj,i).entity;if(!s||!a)return;if(s>a)return Ee.networkClient.sendJSON([5]);let n=Math.atan2(t.obj.y+e.y-(r.r.y+e.y),t.obj.x+e.x-(r.r.x+e.x));Ee.abc=n/4,Ee.mouse.evX=r.r.x+e.x,Ee.mouse.evY=r.r.y+e.y,n=n.map(-Math.PI,Math.PI,0,360)*Math.PI/180,Ee.networkClient.sendJSON([4,n.toFixed(2)])}if(s.AnimalAimbot.enable){let i=t.obj.right>=19&&t.obj.right<=23?180:t.obj.right>=24&&t.obj.right<=28?280:0==t.obj.right?100:i=0,a=c.getNearest(t.obj,g).dist,s=c.getNearest(t.obj,g).entity;if(!a||!i)return;if(a>i)return Ee.networkClient.sendJSON([5]);let r=Math.atan2(t.obj.y+e.y-(s.r.y+e.y),t.obj.x+e.x-(s.r.x+e.x));Ee.abc=r/4,Ee.mouse.evX=s.r.x+e.x,Ee.mouse.evY=s.r.y+e.y,r=r.map(-Math.PI,Math.PI,0,360)*Math.PI/180,Ee.networkClient.sendJSON([4,r.toFixed(2)])}if(s.AutoRecycle.enable){if(!Ee.inventory.hasItem(s.AutoRecycle.id))return;Ee.networkClient.sendJSON([6,s.AutoRecycle.id,-2])}s.AutoTotem&&d.forEach((e=>{c.getDist(t.obj.x,t.obj.y,e.x,e.y)<=140&&Ee.networkClient.sendJSON([16,1,e.id])})),s.AutoCompressorPut&&o.forEach((e=>{c.getDist(t.obj.x,t.obj.y,oven.x,oven.y)<=140&&Ee.networkClient.sendJSON([12,[1,13,e.id,1]])})),s.AutoCompressorTake&&o.forEach((e=>{c.getDist(Ee.myPlayer.obj.x,Ee.myPlayer.obj.y,e.x,e.y)<=140&&Ee.networkClient.sendJSON([12,[0,2,e.id]])})),s.AutoOvenPut&&l.forEach((e=>{c.getDist(t.obj.x,t.obj.y,e.x,e.y)<=140&&(Ee.networkClient.sendJSON([12,[1,1,e.id,1]]),Ee.networkClient.sendJSON([12,[1,63,e.id,1]]))})),s.AutoOvenTake&&l.forEach((e=>{c.getDist(t.obj.x,t.obj.y,e.x,e.y)<=140&&Ee.networkClient.sendJSON([12,[0,3,e.id]])})),s.AutoSteal.enable&&m.forEach((e=>{c.getDist(t.obj.x,t.obj.y,e.x,e.y)<=140&&e.action.forEach(((t,i)=>{Ee.networkClient.sendJSON([12,[0,i+1,e.id]])}))})),s.AutoCraft.enable&&Ee.networkClient.sendJSON([6,s.AutoCraft.id,1]),s.Pathfinder.enable&&Ne.findpath({x:Math.floor(t.obj.x/100),y:Math.floor(t.obj.y/100)},{x:Number(s.Pathfinder.x),y:Number(s.Pathfinder.y)}),s.DropSword.enable&&(t.obj.right>=19||t.obj.right<=28)&&Ee.networkClient.sendJSON([9,t.obj.right,-1])}};window.addEventListener("DOMContentLoaded",(()=>{Ne.KeyMenu(),Ee.preInit(),Te(0),window.onbeforeunload=function(){if(null!==Ee.networkClient.websocket)return"Data will be lost if you leave the page, are you sure?"}}))})()})();
